## ç»„ä»¶



#### navigator

[navigator | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)](https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html)

**ç›¸å¯¹è·¯å¾„ä¸ç»å¯¹è·¯å¾„**

**ç›¸å¯¹è·¯å¾„**

å¤§å®¶æ³¨æ„æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„è·¯å¾„åŸºæœ¬éƒ½æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œç›¸å¯¹è·¯å¾„ä½¿ç”¨â€œ/â€å­—ç¬¦ä½œä¸ºç›®å½•çš„åˆ†éš”å­—ç¬¦ï¼Œ

- "./" ä»£è¡¨å½“å‰ç›®å½•

- â€œ../â€ ä»£è¡¨ä¸Šä¸€çº§ç›®å½•
- "/" **å½“å‰æ ¹ç›®å½•**ï¼Œæ˜¯ç›¸å¯¹ç›®å½•

*/pages/home/imgshow/imgshow å’Œ./../home/imgshow/imgshow*   éƒ½æŒ‡å‘åŒä¸€ä¸ªè·¯å¾„!



æ¯”å¦‚:åœ¨è¿™ç§æ–‡ä»¶ç»“æ„ä¸‹å¯ä»¥é‡‡å–è¿™ä¸¤ç§åœ°å€å†™æ³•

 <img src="APIå­¦ä¹ .assets/image-20210520110503109.png" alt="image-20210520110503109" style="zoom:53%;" />

```html
<!--pages/index/imgshow/imgshow.wxml-->
<text>pages/index/imgshow/imgshow.wxml</text>
<image src="../../../images/faye.png"></image>
<image src="/images/faye.png"></image>
```



more: å¯¹imgè°ƒæ ·å¼å¹¶ä½¿å…¶å±…ä¸­æ˜¾ç¤º:

```html
<view class="img-list">
  <image class="img-icon" src="../../../images/faye.png"></image>
</view>
<image src="/images/faye.png"></image>
```

```css
.img-icon{
  width: 200rpx;
  height: 200rpx;
  margin: 20rpx;
}

.img-list{
  text-align: center;
}
```

<img src="APIå­¦ä¹ .assets/image-20210520111228200.png" alt="image-20210520111228200" style="zoom:33%;" />





åœ¨å°ç¨‹åº API å·¦ä¾§ä¹Ÿå¯ä»¥çœ‹åˆ° 5 ä¸ªä¸åŒçš„ APIã€‚å®ƒä»¬ä¹‹é—´çš„å¯¹åº”å…³ç³»å¦‚ä¸‹:

| **é¡µé¢è·¯ç”± API**                                             | **Navigator open-type å€¼** | **å«ä¹‰**                                                     |
| ------------------------------------------------------------ | -------------------------- | ------------------------------------------------------------ |
| [redirectTo](https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.redirectTo.html) | redirect                   | å…³é—­å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ã€‚ä½†æ˜¯ä¸å…è®¸è·³è½¬åˆ° tabbar é¡µé¢ã€‚ |
| [navigateTo](https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateTo.html) | navigate                   | ä¿ç•™å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ã€‚ä½†æ˜¯ä¸èƒ½è·³åˆ° tabbar é¡µé¢ã€‚ |
| [navigateBack](https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateBack.html) | navigateBack               | å…³é—­å½“å‰é¡µé¢ï¼Œè¿”å›ä¸Šä¸€é¡µé¢æˆ–å¤šçº§é¡µé¢ã€‚                       |
| [switchTab](https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.switchTab.html) | switchTab                  | è·³è½¬åˆ° tabBar é¡µé¢ï¼Œå¹¶å…³é—­å…¶ä»–æ‰€æœ‰é tabBar é¡µé¢             |
| [reLaunch](https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.reLaunch.html) | reLaunch                   | å…³é—­æ‰€æœ‰é¡µé¢ï¼Œæ‰“å¼€åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢                         |

ä¹Ÿå°±æ˜¯è¯´ Navigator ç»„ä»¶å¯ä»¥åšåˆ°çš„äº‹æƒ…ï¼Œä½¿ç”¨ JavaScript è°ƒç”¨å°ç¨‹åºè·¯ç”± API ä¹Ÿå¯ä»¥åšåˆ°ã€‚Navigator ç»„ä»¶çš„å†…å®¹æ˜¯å†™æ­»çš„ï¼Œè€Œ JavaScript åˆ™å¯ä»¥æä¾›åŠ¨æ€çš„æ•°æ®ã€‚



##### è·³è½¬åˆ°æ–°é¡µé¢ä¸ Tab é¡µ

æˆ‘ä»¬å¯ä»¥åœ¨ä¹‹å‰åˆ›å»ºçš„ home.wxml é‡Œè¾“å…¥ä»¥ä¸‹ä»£ç ï¼š

```html
<button bindtap="navigateTo">ä¿ç•™é¡µé¢å¹¶è·³è½¬</button>
<button bindtap="switchTab">è·³è½¬åˆ°ç»„ä»¶Tabé¡µ</button>
<button bindtap="redirectTo">å…³é—­å½“å‰é¡µé¢è·³è½¬</button>
```

ç„¶ååœ¨ home.js æ–‡ä»¶é‡Œæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

```js
navigateTo() {
    wx.navigateTo({
        url: '/pages/home/imgshow/imgshow'
    })
},
switchTab() {
    wx.switchTab({
        url: "/pages/list/list",
    })
},
redirectTo() {
    wx.redirectTo({
        url: '/pages/home/imgshow/imgshow'
    })
},
```

ä¿å­˜ä¹‹ååœ¨å¼€å‘è€…å·¥å…·çš„æ¨¡æ‹Ÿå™¨ç‚¹å‡»æŒ‰é’®ï¼Œå°±å®ç°äº†é¡µé¢å’Œ Tab é¡µçš„åˆ‡æ¢æ•ˆæœã€‚åœ¨å‰é¢æˆ‘ä»¬æåˆ° bintap æ˜¯å°ç¨‹åºæ‰€æœ‰ç»„ä»¶çš„å…¬æœ‰å±æ€§ï¼Œåªæœ‰ bintap ç»‘å®šäº†é¡µé¢è·¯ç”±åˆ‡æ¢çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œç»„ä»¶æ˜¯ä¸æ˜¯ Navigator ä¹Ÿå°±ä¸é‡è¦äº†ï¼Œä¹Ÿå°±æ˜¯é“¾æ¥è·³è½¬ä¸å†æ˜¯ Navigator ç»„ä»¶çš„ä¸“åˆ©ã€‚





#### image

[image | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)](https://developers.weixin.qq.com/miniprogram/dev/component/image.html)

| å±æ€§                     | ç±»å‹          | é»˜è®¤å€¼      | å¿…å¡« | è¯´æ˜                                                   | æœ€ä½ç‰ˆæœ¬                                                     |
| :----------------------- | :------------ | :---------- | :--- | :----------------------------------------------------- | :----------------------------------------------------------- |
| `src`                    | `string`      |             | å¦   | å›¾ç‰‡èµ„æºåœ°å€                                           | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| `mode`                   | `string`      | scaleToFill | å¦   | å›¾ç‰‡è£å‰ªã€ç¼©æ”¾çš„æ¨¡å¼                                   | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| `webp`                   | `boolean`     | false       | å¦   | é»˜è®¤ä¸è§£æ webP æ ¼å¼ï¼Œåªæ”¯æŒç½‘ç»œèµ„æº                   | [2.9.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| `lazy-load`              | `boolean`     | false       | å¦   | å›¾ç‰‡æ‡’åŠ è½½ï¼Œåœ¨å³å°†è¿›å…¥ä¸€å®šèŒƒå›´ï¼ˆä¸Šä¸‹ä¸‰å±ï¼‰æ—¶æ‰å¼€å§‹åŠ è½½ | [1.5.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| `show-menu-by-longpress` | `boolean`     | false       | å¦   | å¼€å¯é•¿æŒ‰å›¾ç‰‡æ˜¾ç¤ºè¯†åˆ«å°ç¨‹åºç èœå•                       | [2.7.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| `binderror`              | `eventhandle` |             | å¦   | å½“é”™è¯¯å‘ç”Ÿæ—¶è§¦å‘ï¼Œevent.detail = {errMsg}              | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| `bindload`               | `eventhandle` |             | å¦   | å½“å›¾ç‰‡è½½å…¥å®Œæ¯•æ—¶è§¦å‘ï¼Œevent.detail = {height, width}   | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |



**`mode` çš„åˆæ³•å€¼**

| å€¼           | è¯´æ˜                                                         | æœ€ä½ç‰ˆæœ¬                                                     |
| :----------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| scaleToFill  | ç¼©æ”¾æ¨¡å¼ï¼Œä¸ä¿æŒçºµæ¨ªæ¯”ç¼©æ”¾å›¾ç‰‡ï¼Œä½¿å›¾ç‰‡çš„å®½é«˜å®Œå…¨æ‹‰ä¼¸è‡³å¡«æ»¡ image å…ƒç´  |                                                              |
| aspectFit    | ç¼©æ”¾æ¨¡å¼ï¼Œä¿æŒçºµæ¨ªæ¯”ç¼©æ”¾å›¾ç‰‡ï¼Œä½¿å›¾ç‰‡çš„é•¿è¾¹èƒ½å®Œå…¨æ˜¾ç¤ºå‡ºæ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥å®Œæ•´åœ°å°†å›¾ç‰‡æ˜¾ç¤ºå‡ºæ¥ã€‚ |                                                              |
| aspectFill   | ç¼©æ”¾æ¨¡å¼ï¼Œä¿æŒçºµæ¨ªæ¯”ç¼©æ”¾å›¾ç‰‡ï¼Œåªä¿è¯å›¾ç‰‡çš„çŸ­è¾¹èƒ½å®Œå…¨æ˜¾ç¤ºå‡ºæ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå›¾ç‰‡é€šå¸¸åªåœ¨æ°´å¹³æˆ–å‚ç›´æ–¹å‘æ˜¯å®Œæ•´çš„ï¼Œå¦ä¸€ä¸ªæ–¹å‘å°†ä¼šå‘ç”Ÿæˆªå–ã€‚ |                                                              |
| widthFix     | ç¼©æ”¾æ¨¡å¼ï¼Œå®½åº¦ä¸å˜ï¼Œé«˜åº¦è‡ªåŠ¨å˜åŒ–ï¼Œä¿æŒåŸå›¾å®½é«˜æ¯”ä¸å˜         |                                                              |
| heightFix    | ç¼©æ”¾æ¨¡å¼ï¼Œé«˜åº¦ä¸å˜ï¼Œå®½åº¦è‡ªåŠ¨å˜åŒ–ï¼Œä¿æŒåŸå›¾å®½é«˜æ¯”ä¸å˜         | [2.10.3](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| top          | è£å‰ªæ¨¡å¼ï¼Œä¸ç¼©æ”¾å›¾ç‰‡ï¼Œåªæ˜¾ç¤ºå›¾ç‰‡çš„é¡¶éƒ¨åŒºåŸŸ                   |                                                              |
| bottom       | è£å‰ªæ¨¡å¼ï¼Œä¸ç¼©æ”¾å›¾ç‰‡ï¼Œåªæ˜¾ç¤ºå›¾ç‰‡çš„åº•éƒ¨åŒºåŸŸ                   |                                                              |
| center       | è£å‰ªæ¨¡å¼ï¼Œä¸ç¼©æ”¾å›¾ç‰‡ï¼Œåªæ˜¾ç¤ºå›¾ç‰‡çš„ä¸­é—´åŒºåŸŸ                   |                                                              |
| left         | è£å‰ªæ¨¡å¼ï¼Œä¸ç¼©æ”¾å›¾ç‰‡ï¼Œåªæ˜¾ç¤ºå›¾ç‰‡çš„å·¦è¾¹åŒºåŸŸ                   |                                                              |
| right        | è£å‰ªæ¨¡å¼ï¼Œä¸ç¼©æ”¾å›¾ç‰‡ï¼Œåªæ˜¾ç¤ºå›¾ç‰‡çš„å³è¾¹åŒºåŸŸ                   |                                                              |
| top left     | è£å‰ªæ¨¡å¼ï¼Œä¸ç¼©æ”¾å›¾ç‰‡ï¼Œåªæ˜¾ç¤ºå›¾ç‰‡çš„å·¦ä¸Šè¾¹åŒºåŸŸ                 |                                                              |
| top right    | è£å‰ªæ¨¡å¼ï¼Œä¸ç¼©æ”¾å›¾ç‰‡ï¼Œåªæ˜¾ç¤ºå›¾ç‰‡çš„å³ä¸Šè¾¹åŒºåŸŸ                 |                                                              |
| bottom left  | è£å‰ªæ¨¡å¼ï¼Œä¸ç¼©æ”¾å›¾ç‰‡ï¼Œåªæ˜¾ç¤ºå›¾ç‰‡çš„å·¦ä¸‹è¾¹åŒºåŸŸ                 |                                                              |
| bottom right | è£å‰ªæ¨¡å¼ï¼Œä¸ç¼©æ”¾å›¾ç‰‡ï¼Œåªæ˜¾ç¤ºå›¾ç‰‡çš„å³ä¸‹è¾¹åŒºåŸŸ                 |                                                              |

Bug & Tip

1. `tip`ï¼šimageç»„ä»¶é»˜è®¤å®½åº¦320pxã€é«˜åº¦240px
2. `tip`ï¼šimageç»„ä»¶ä¸­äºŒç»´ç /å°ç¨‹åºç å›¾ç‰‡ä¸æ”¯æŒé•¿æŒ‰è¯†åˆ«ã€‚ä»…åœ¨wx.previewImageä¸­æ”¯æŒé•¿æŒ‰è¯†åˆ«

## 



## å…¨å±€å¯¹è±¡ wx

wx æ˜¯å°ç¨‹åºçš„å…¨å±€å¯¹è±¡ï¼Œç”¨äºæ‰¿è½½å°ç¨‹åºèƒ½åŠ›ç›¸å…³ APIã€‚å°ç¨‹åºå¼€å‘æ¡†æ¶æä¾›ä¸°å¯Œçš„å¾®ä¿¡åŸç”Ÿ APIï¼Œå¯ä»¥æ–¹ä¾¿çš„è°ƒèµ·å¾®ä¿¡æä¾›çš„èƒ½åŠ›ï¼Œå¦‚è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œäº†è§£ç½‘ç»œçŠ¶æ€ç­‰ã€‚å¤§å®¶å¯ä»¥åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·çš„æ§åˆ¶å° Console é‡Œäº†è§£ä¸€ä¸‹è¿™ä¸ª wx è¿™ä¸ªå¯¹è±¡ã€‚

```
wx
```

å¯ä»¥çœ‹åˆ° wx çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œå¦‚æœä½ å¯¹ wx çš„å“ªä¸ªå±æ€§å’Œæ–¹æ³•ä¸äº†è§£ï¼Œä½ å¯ä»¥æŸ¥é˜…æŠ€æœ¯æ–‡æ¡£ã€‚

æŠ€æœ¯æ–‡æ¡£ï¼š[API æŠ€æœ¯æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/api.html#API)





#### äº†è§£ç½‘ç»œçŠ¶æ€

è·å–ç½‘ç»œç±»å‹æŠ€æœ¯æ–‡æ¡£ï¼š[wx.getNetworkType()](https://developers.weixin.qq.com/miniprogram/dev/api/device/network/wx.getNetworkType.html)

å¤§å®¶å¯ä»¥åˆ‡æ¢ä¸€ä¸‹å¼€å‘è€…å·¥å…·çš„æ¨¡æ‹Ÿå™¨çš„ç½‘ç»œï¼Œç„¶åå¤šæ¬¡åœ¨æ§åˆ¶å° console è¾“å…¥ä»¥ä¸‹ä»£ç æŸ¥çœ‹æœ‰ä»€ä¹ˆä¸åŒï¼š

```
wx.getNetworkType({
      success(res) {
        console.log(res)
      }
    });
```





#### äº†è§£ç”¨æˆ·ä¿¡æ¯

è·å–ç”¨æˆ·ä¿¡æ¯æŠ€æœ¯æ–‡æ¡£ï¼š[wx.getUserInfo()](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserInfo.html)

ç™»å½•å¼€å‘è€…å·¥å…·ä¹‹åï¼ˆå¤§å®¶åº”è¯¥å·²ç»å¤„äºç™»å½•çŠ¶æ€ï¼‰ï¼Œåœ¨æ§åˆ¶å° console é‡Œè¾“å…¥ä»¥ä¸‹ä»£ç ï¼Œçœ‹å¾—åˆ°ä»€ä¹ˆä¿¡æ¯ï¼š

```
wx.getUserInfo({
  success(res) {
      console.log(res);
  }
});
```

ç„¶åé€€å‡ºå¼€å‘è€…å·¥å…·ï¼Œå†è¾“å…¥ä»¥ä¸Šä»£ç ï¼Œçœ‹çœ‹æ˜¯ä»€ä¹ˆä»¤äººå…´å¥‹çš„ç»“æœï¼Ÿ





#### è·å–è®¾å¤‡ä¿¡æ¯

è·å–è®¾å¤‡ä¿¡æ¯æŠ€æœ¯æ–‡æ¡£ï¼š[wx.getSystemInfo()](https://developers.weixin.qq.com/miniprogram/dev/api/base/system/system-info/wx.getSystemInfo.html)

```
wx.getSystemInfo({
  success (res) {
    console.log(res.model)
    console.log(res.pixelRatio)
    console.log(res.windowWidth)
    console.log(res.windowHeight)
    console.log(res.language)
    console.log(res.version)
    console.log(res.platform)
  }
})
```





#### é¡µé¢é“¾æ¥è·³è½¬

é¡µé¢è·³è½¬æŠ€æœ¯æ–‡æ¡£ï¼š[wx.navigateTo()](https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateTo.html)

é™¤äº†å¯ä»¥è·å–åˆ°ç”¨æˆ·ã€è®¾å¤‡ã€ç½‘ç»œç­‰çš„ä¿¡æ¯ï¼Œä½¿ç”¨æ§åˆ¶å°æ¥è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ä¹Ÿå¯ä»¥æ‰§è¡Œä¸€äº›åŠ¨ä½œï¼Œæ¯”å¦‚é¡µé¢è·³è½¬ã€‚åœ¨æ§åˆ¶å° Console é‡Œè¾“å…¥ï¼š

```js
wx.navigateTo({
  url: '/pages/home/imgshow/imgshow'
})
```

è¿˜å¯ä»¥è¿”å›é¡µé¢çš„ä¸Šä¸€å±‚ï¼Œåœ¨æ§åˆ¶å°é‡Œè¾“å…¥

é¡µé¢è¿”å›æŠ€æœ¯æ–‡æ¡£ï¼š[wx.navigateBack()](https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateBack.html)

```js
wx.navigateBack({
  delta: 1
})
```





#### æ˜¾ç¤ºæ¶ˆæ¯æç¤ºæ¡†

æ˜¾ç¤ºæ¶ˆæ¯æç¤ºæ¡†æŠ€æœ¯æ–‡æ¡£ï¼š[wx.showToast()](https://developers.weixin.qq.com/miniprogram/dev/api/ui/interaction/wx.showToast.html)

```js
  wx.showToast({
    title: 'å¼¹å‡ºæˆåŠŸ',
    icon: 'success',
    duration: 1000
  })
```

å‚æ•°

Object object

| å±æ€§     | ç±»å‹     | é»˜è®¤å€¼    | å¿…å¡« | è¯´æ˜                                             | æœ€ä½ç‰ˆæœ¬                                                     |
| :------- | :------- | :-------- | :--- | :----------------------------------------------- | :----------------------------------------------------------- |
| title    | string   |           | æ˜¯   | æç¤ºçš„å†…å®¹                                       |                                                              |
| icon     | string   | 'success' | å¦   | å›¾æ ‡                                             |                                                              |
| image    | string   |           | å¦   | è‡ªå®šä¹‰å›¾æ ‡çš„æœ¬åœ°è·¯å¾„ï¼Œimage çš„ä¼˜å…ˆçº§é«˜äº icon    | [1.1.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| duration | number   | 1500      | å¦   | æç¤ºçš„å»¶è¿Ÿæ—¶é—´                                   |                                                              |
| mask     | boolean  | false     | å¦   | æ˜¯å¦æ˜¾ç¤ºé€æ˜è’™å±‚ï¼Œé˜²æ­¢è§¦æ‘¸ç©¿é€                   |                                                              |
| success  | function |           | å¦   | æ¥å£è°ƒç”¨æˆåŠŸçš„å›è°ƒå‡½æ•°                           |                                                              |
| fail     | function |           | å¦   | æ¥å£è°ƒç”¨å¤±è´¥çš„å›è°ƒå‡½æ•°                           |                                                              |
| complete | function |           | å¦   | æ¥å£è°ƒç”¨ç»“æŸçš„å›è°ƒå‡½æ•°ï¼ˆè°ƒç”¨æˆåŠŸã€å¤±è´¥éƒ½ä¼šæ‰§è¡Œï¼‰ |                                                              |

**object.icon çš„åˆæ³•å€¼**

| å€¼      | è¯´æ˜                                                         | æœ€ä½ç‰ˆæœ¬ |
| :------ | :----------------------------------------------------------- | :------- |
| success | æ˜¾ç¤ºæˆåŠŸå›¾æ ‡ï¼Œæ­¤æ—¶ title æ–‡æœ¬æœ€å¤šæ˜¾ç¤º 7 ä¸ªæ±‰å­—é•¿åº¦           |          |
| error   | æ˜¾ç¤ºå¤±è´¥å›¾æ ‡ï¼Œæ­¤æ—¶ title æ–‡æœ¬æœ€å¤šæ˜¾ç¤º 7 ä¸ªæ±‰å­—é•¿åº¦           |          |
| loading | æ˜¾ç¤ºåŠ è½½å›¾æ ‡ï¼Œæ­¤æ—¶ title æ–‡æœ¬æœ€å¤šæ˜¾ç¤º 7 ä¸ªæ±‰å­—é•¿åº¦           |          |
| none    | ä¸æ˜¾ç¤ºå›¾æ ‡ï¼Œæ­¤æ—¶ title æ–‡æœ¬æœ€å¤šå¯æ˜¾ç¤ºä¸¤è¡Œï¼Œ[1.9.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html)åŠä»¥ä¸Šç‰ˆæœ¬æ”¯æŒ |          |







#### è®¾ç½®å½“å‰é¡µé¢çš„æ ‡é¢˜

è®¾ç½®æ ‡é¢˜æŠ€æœ¯æ–‡æ¡£ï¼š[wx.setNavigationBarTitle()](https://developers.weixin.qq.com/miniprogram/dev/api/ui/navigation-bar/wx.setNavigationBarTitle.html)

```js
wx.setNavigationBarTitle({
  title: 'æ§åˆ¶å°æ›´æ–°çš„æ ‡é¢˜'
})
```





#### æ‰“å¼€æ–‡ä»¶é€‰æ‹©

æ‰“å¼€æ–‡ä»¶é€‰æ‹©æŠ€æœ¯æ–‡æ¡£ï¼š[wx.chooseImage()](https://developers.weixin.qq.com/miniprogram/dev/api/media/image/wx.chooseImage.html)

```js
wx.chooseImage({
  count: 1,
  sizeType: ['original', 'compressed'],
  sourceType: ['album', 'camera'],
  success (res) {
    const tempFilePaths = res.tempFilePaths
  }
})
```

è¿™ä¸€éƒ¨åˆ†ä¸»è¦æ˜¯è®©å¤§å®¶æ˜ç™½æ§åˆ¶å° Console çš„å¼ºå¤§ä¹‹å¤„ï¼Œä»¥åŠé€šè¿‡æ§åˆ¶å°å®æˆ˜çš„æ–¹æ³•å¯¹å°ç¨‹åº API çš„è¿è¡Œæœºåˆ¶æœ‰ä¸€ä¸ªåˆæ­¥çš„äº†è§£ã€‚





#### é¡µé¢æ»šåŠ¨

[wx.pageScrollTo(Object object) | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)](https://developers.weixin.qq.com/miniprogram/dev/api/ui/scroll/wx.pageScrollTo.html)

| å±æ€§      | ç±»å‹     | é»˜è®¤å€¼ | å¿…å¡« | è¯´æ˜                                             | æœ€ä½ç‰ˆæœ¬                                                     |
| :-------- | :------- | :----- | :--- | :----------------------------------------------- | :----------------------------------------------------------- |
| scrollTop | number   |        | å¦   | æ»šåŠ¨åˆ°é¡µé¢çš„ç›®æ ‡ä½ç½®ï¼Œå•ä½ px                    |                                                              |
| duration  | number   | 300    | å¦   | æ»šåŠ¨åŠ¨ç”»çš„æ—¶é•¿ï¼Œå•ä½ ms                          |                                                              |
| selector  | string   |        | å¦   | é€‰æ‹©å™¨                                           | [2.7.3](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| success   | function |        | å¦   | æ¥å£è°ƒç”¨æˆåŠŸçš„å›è°ƒå‡½æ•°                           |                                                              |
| fail      | function |        | å¦   | æ¥å£è°ƒç”¨å¤±è´¥çš„å›è°ƒå‡½æ•°                           |                                                              |
| complete  | function |        | å¦   | æ¥å£è°ƒç”¨ç»“æŸçš„å›è°ƒå‡½æ•°ï¼ˆè°ƒç”¨æˆåŠŸã€å¤±è´¥éƒ½ä¼šæ‰§è¡Œï¼‰ |                                                              |



ç®€å•ç¤ºä¾‹:

wxml:

```html
<button type="primary" bindtap="scrollToPosition" style="width:fit-content;">æ»šåŠ¨åˆ°é¡µé¢æŒ‡å®šä½ç½®</button>
<view class="pagetop" style="background-color:lightblue;width:100%;height:500px"></view>
<view id="pageblock" style="background-color:brown;width:100%;height:800px">
  this is page-block!
  <button type="primary" bindtap="scrollToTop">æ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨ï¼ˆè¿”å›é¡¶éƒ¨ï¼‰</button>
</view>
```

js:

```js
  scrollToTop() {
    wx.pageScrollTo({
      scrollTop:0,
      duration: 300,
      success:()=>{
        console.log('è¿”å›é¡¶éƒ¨æˆåŠŸ!!!');
      }
    })
  },

  scrollToPosition(){
    wx.pageScrollTo({
      selector:"#pageblock",
      duration: 300,
      success:()=>{
        wx.showToast({
          title: 'è·³è½¬æˆåŠŸ!',
          icon:'success',
          duration:3000
        })
        console.log('è·³è½¬åˆ°æŒ‡å®šä½ç½®æˆåŠŸ!!!');
      }
    })
  },
```







## äº‹ä»¶



#### currentTarget äº‹ä»¶å¯¹è±¡

åœ¨å‰é¢çš„åˆ—è¡¨æ¸²æŸ“é‡Œï¼Œæˆ‘ä»¬çŸ¥é“ç‚¹å‡»ç”µå½±åˆ—è¡¨é‡Œçš„æŸä¸€éƒ¨ç”µå½±ï¼Œè¦è¿›è¡Œé¡µé¢è·³è½¬æ˜¾ç¤ºè¯¥ç”µå½±çš„è¯¦æƒ…ï¼Œæˆ‘ä»¬éœ€è¦ç»™è¯¥ç”µå½±åˆ›å»ºä¸€ä¸ªé¡µé¢ï¼Œé‚£å¦‚æœè¦æ˜¾ç¤ºæ•°åƒéƒ¨çš„ç”µå½±çš„è¯¦æƒ…ï¼Œä¸€ä¸€åˆ›å»ºç”µå½±è¯¦æƒ…é¡µæ˜¾ç„¶ä¸åˆé€‚ï¼Œæ¯•ç«Ÿæ‰€æœ‰ç”µå½±çš„è¯¦æƒ…é¡µéƒ½æ˜¯åŒä¸€ä¸€ä¸ªç»“æ„ï¼Œæœ‰æ²¡æœ‰åŠæ³•æ‰€æœ‰ç”µå½±è¯¦æƒ…éƒ½å…±ç”¨ä¸€ä¸ªé¡µé¢ï¼Œä½†æ˜¯æ ¹æ®ç‚¹å‡»çš„é“¾æ¥çš„ä¸åŒï¼Œæ¸²æŸ“ç›¸åº”çš„æ•°æ®ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œè¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆæˆ‘ä»¬è¦äº†è§£é“¾æ¥ç»„ä»¶çš„ç‚¹å‡»ä¿¡æ¯ã€‚

> å½“ç‚¹å‡»ç»„ä»¶è§¦å‘äº‹ä»¶æ—¶ï¼Œé€»è¾‘å±‚ç»‘å®šè¯¥äº‹ä»¶çš„å¤„ç†å‡½æ•°ä¼šæ”¶åˆ°ä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œé€šè¿‡ event å¯¹è±¡å¯ä»¥è·å–äº‹ä»¶è§¦å‘æ—¶å€™çš„ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚æ—¶é—´æˆ³ã€ detail ä»¥åŠå½“å‰ç»„ä»¶çš„ä¸€äº›å±æ€§å€¼é›†åˆï¼Œå°¤å…¶æ˜¯äº‹ä»¶æºç»„ä»¶çš„ idã€‚



â–¼ç¤ºä¾‹:

![image-20210521155810581](2.APIå­¦ä¹ .assets/image-20210521155810581.png)

wxml:

```html
<view class="weui-navbar">
  <block wx:for="{{tabs}}" wx:key="index">
    <view id="{{index}}" class="weui-navbar__item {{activeIndex == index ? 'weui-bar__item_on' : ''}}"
      bindtap="tabClick">
      <view class="weui-navbar__title">{{item}}</view>
    </view>
  </block>
</view>

<view class="weui-tab__panel" style="text-align:center;">
  <view hidden="{{activeIndex != 0}}">å¸éƒ½</view>
  <view hidden="{{activeIndex != 1}}">é­”éƒ½</view>
  <view hidden="{{activeIndex != 2}}">å¦–éƒ½</view>
  <view hidden="{{activeIndex != 3}}">æ¸”æ‘</view>
</view>
```



js:

```js
 data: {
    tabs: ["åŒ—äº¬", "ä¸Šæµ·", "å¹¿å·", "æ·±åœ³"],
    activeIndex:0,
  },

  tabClick: function (e) {
    console.log(e)
    this.setData({
      activeIndex: e.currentTarget.id
    });
  },
```





## ç½‘ç»œAPI



#### äº†è§£ç½‘ç»œæ•°æ® API

å¤åˆ¶ä»¥ä¸‹é“¾æ¥åœ°å€ï¼Œç”¨æµè§ˆå™¨æ‰“å¼€ï¼Œçœ‹çœ‹ä¼šè¿”å›ä»€ä¹ˆç»“æœï¼š

```
//çŸ¥ä¹æ—¥æŠ¥çš„æœ€æ–°è¯é¢˜
https://news-at.zhihu.com/api/4/news/latest

//çŸ¥ä¹æ—¥æŠ¥æŸä¸€ä¸ªè¯é¢˜çš„å†…å®¹
https://news-at.zhihu.com/api/4/news/9714883

//v2exè®ºå›çš„æœ€æ–°ä¸»é¢˜
https://www.v2ex.com/api/topics/latest.json

//CNodeè®ºå›çš„æœ€æ–°è¯é¢˜
https://cnodejs.org/api/v1/topics
```

ä»¥ä¸Šæ‰€è¿”å›çš„æ•°æ®ç±»å‹éƒ½æ˜¯ json æ ¼å¼ï¼Œç›¸ä¿¡å¤§å®¶åº”è¯¥æ¯”è¾ƒç†Ÿæ‚‰äº†ã€‚é‚£æˆ‘ä»¬å¦‚ä½•æŠŠä»¥ä¸Šæ•°æ®æ¸²æŸ“åˆ°æˆ‘ä»¬çš„å°ç¨‹åºé¡µé¢ä¸Šå‘¢ï¼Ÿ



#### ç»ƒæ‰‹ API èµ„æºæ¨è

è¿™é‡Œæ¨èå‡ ä¸ªç¨‹åºå‘˜ç»å¸¸ä¼šæ‹¿æ¥ç»ƒæ‰‹çš„ API èµ„æºï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™äº› API æ¥åšç½‘ç«™ã€å°ç¨‹åºã€ç§»åŠ¨ç«¯ï¼ˆiOSã€å®‰å“ï¼‰ã€æ¡Œé¢ç«¯ï¼Œä¹Ÿå¯ä»¥ç”¨äºå„ç§æ¡†æ¶æ¯”å¦‚ Vueã€Reactã€Flutter ç­‰ç­‰ï¼Œæ•°æ®æ²¡å˜ï¼Œåªæ˜¯è§£å†³æ–¹æ¡ˆä¸åŒã€‚

- [èšåˆ API](https://www.juhe.cn/)ï¼šä¸€ä¸ªæ¯”è¾ƒå…¨é¢çš„ç»¼åˆæ€§ API æœåŠ¡å¹³å°
- [å³é€Ÿ API](https://www.jisuapi.com/)ï¼šä¹Ÿæ˜¯æä¾›ä¸€äº›ç»¼åˆæ€§çš„ API æœåŠ¡
- [V2EX API](https://www.v2ex.com/p/7v9TEc53)ï¼šv2ex è®ºå›æ˜¯å¾ˆå¤šç¨‹åºå‘˜ç»å¸¸ä¼šå…‰é¡¾çš„ç»¼åˆæ€§æŠ€æœ¯è®ºå›
- [CNode API](https://cnodejs.org/api/)ï¼šNodejs äº¤æµè®ºå›
- [å’Œé£å¤©æ°”](https://www.heweather.com/)ï¼šå«å¤©æ°”é¢„æŠ¥ã€ç©ºæ°”è´¨é‡ã€å®å†µå¤©æ°”ç­‰æ•°æ®
- [Github API](https://developer.github.com/v3/)ï¼šGithub æ˜¯æ‰€æœ‰ç¨‹åºå‘˜éƒ½ï¼ˆå¿…é¡»ï¼‰ä¼šä½¿ç”¨çš„ç½‘ç«™
- [çŸ¥ä¹æ—¥æŠ¥ API](https://github.com/izzyleung/ZhihuDailyPurify/wiki/çŸ¥ä¹æ—¥æŠ¥-API-åˆ†æ)ï¼šçŸ¥ä¹æ—¥æŠ¥ API åˆ†æ

> å„å¤§å…¬å¸çš„å¼€å‘å¹³å°ï¼šæ¯”å¦‚[å¾®ä¿¡å¼€æ”¾å¹³å°](https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&lang=zh_CN&tab=dev)æä¾›äº†å¾®ä¿¡è´¦å·ä½“ç³»çš„æ¥å…¥ï¼Œ[è…¾è®¯äº‘ API ä¸­å¿ƒ](https://cloud.tencent.com/document/api)åˆ™æä¾›äº†è°ƒç”¨äº‘èµ„æºçš„èƒ½åŠ›ï¼ˆåŒ…å«æœåŠ¡å™¨ã€ç‰©è”ç½‘ã€äººå·¥æ™ºèƒ½ç­‰ APIï¼‰ã€[å¼€æºç½‘ç«™ Wordpress](https://developer.wordpress.org/rest-api/reference/)ä¹Ÿæä¾› API è°ƒç”¨çš„æœåŠ¡ï¼Œåœ¨ API èµ„æºçš„å¼€æ”¾æ–¹é¢ï¼Œå›½å¤–ä¹Ÿåšå¾—æ¯”è¾ƒé¢†å…ˆï¼ˆ[å›½å¤–å…è´¹ API åˆ—è¡¨](https://github.com/public-apis/public-apis)ï¼‰ã€‚è€Œå¯¹äºç‰¹å®šçš„æ•°æ®èµ„æºï¼Œä¹Ÿå¯ä»¥é€šè¿‡çˆ¬è™«ç­‰æ–¹å¼æ¥è‡ªå»ºã€‚



**â–¼ç®€å•ç¤ºä¾‹**

ä½¿ç”¨å¼€å‘è€…å·¥å…·æ–°å»ºä¸€ä¸ª request é¡µé¢ï¼Œç„¶ååœ¨ request.js é‡Œçš„ onLoad ç”Ÿå‘½å‘¨æœŸå‡½æ•°é‡Œè¾“å…¥ä»¥ä¸‹ä»£ç ï¼š

```js
  onLoad: function (options) {
    wx.request({
      url: 'https://news-at.zhihu.com/api/4/news/latest', //çŸ¥ä¹æ—¥æŠ¥æœ€æ–°è¯é¢˜
      header: {
        'content-type': 'application/json' // é»˜è®¤å€¼
      },
      success(res) {
        console.log('ç½‘ç»œè¯·æ±‚æˆåŠŸä¹‹åè·å–åˆ°çš„æ•°æ®',res)
        console.log('çŸ¥ä¹æ—¥æŠ¥æœ€æ–°è¯é¢˜',res.data)
      }
    })
  },
```



è¿”å›çš„ res ç»„æˆ:

 <img src="2.APIå­¦ä¹ .assets/image-20210525092829098.png" alt="image-20210525092829098" style="zoom:63%;" />

- headerï¼šå¼€å‘è€…æœåŠ¡å™¨è¿”å›çš„ HTTP æ¶ˆæ¯å¤´ï¼Œå…¶ä¸­ Content-Type ä¸ºæœåŠ¡å™¨æ–‡æ¡£çš„ MIME ç±»å‹ï¼ŒAPI çš„ MIME ç±»å‹é€šå¸¸ä¸º "application/json; charset=UTF-8"ï¼Œå»ºè®®æœåŠ¡å™¨è¿”å›å€¼ä½¿ç”¨ UTF-8 ç¼–ç ï¼ˆå¦‚æœä½ æœ‰æœåŠ¡å™¨çš„è¯ï¼‰ã€‚
- wx.request åªèƒ½å‘èµ· HTTPS è¯·æ±‚ï¼Œé»˜è®¤è¶…æ—¶æ—¶é—´ä¸º 60sï¼Œæœ€å¤§å¹¶å‘é™åˆ¶ä¸º 10 ä¸ª





#### â˜…ç®€å•çš„çŸ¥ä¹æ—¥æŠ¥å°ç¨‹åº

| åˆ—è¡¨                                                         | è¯¦ç»†é¡µé¢                                                     |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| <img src="2.APIå­¦ä¹ .assets/image-20210525102756696.png" alt="image-20210525102756696" style="zoom: 80%;" /> | ![image-20210525102859986](2.APIå­¦ä¹ .assets/image-20210525102859986.png) |



ğŸš©å…·ä½“æµç¨‹: è·å–æ•°æ®åˆ—è¡¨æ˜¾ç¤ºåœ¨ä¸»é¡µé¢ ==> å­é¡µé¢æ¸²æŸ“ä¼šæ ¹æ®id  ==> ç‚¹å‡»ä¸»é¡µé¢çš„é“¾æ¥å¼•å¯¼è‡³å­é¡µé¢ ==> å­é¡µé¢é€šè¿‡ä¸»é¡µé¢ä¼ æ¥çš„idæ¥è·å–å…·ä½“æ•°æ®å¹¶æ˜¾ç¤ºå†…å®¹

ä½¿ç”¨å¼€å‘è€…å·¥å…·åœ¨ request.wxml é‡Œè¾“å…¥ weui çš„åˆ—è¡¨æ ·å¼ï¼ˆéœ€è¦å¼•å…¥ weui æ¡†æ¶å“¦ï¼‰

```html
<view class="page__bd">
    <view class="weui-panel weui-panel_access">
        <view class="weui-panel__bd" wx:for="{{stories}}" wx:for-item="stories" wx:key="*item">
            <navigator url="" class="weui-media-box weui-media-box_appmsg" hover-class="weui-cell_active">
                <view class="weui-media-box__hd weui-media-box__hd_in-appmsg">
                    <image class="weui-media-box__thumb" mode="widthFix" src="{{stories.images[0]}}" sytle="height:auto"></image>
                </view>
                <view class="weui-media-box__bd weui-media-box__bd_in-appmsg">
                    <view class="weui-media-box__title">{{stories.title}}</view>
                </view>
            </navigator>
        </view>
    </view>
</view>
```

ç„¶åå†åœ¨ request.js çš„ data é‡Œå£°æ˜ dateã€storiesã€top_stories çš„åˆå§‹å€¼ï¼ˆä½¿ç”¨çš„å˜é‡å’Œ API çš„å­—æ®µå°½é‡ä¿æŒä¸€è‡´ï¼Œè¿™æ ·å°±ä¸å®¹æ˜“æ··ä¹±ï¼‰

```js
  data: {
    date:"",
    stories:[],
    top_stories:[],
  },
```

åœ¨ onLoad ç”Ÿå‘½å‘¨æœŸå‡½æ•°é‡Œå°†æ•°æ®é€šè¿‡ setData çš„æ–¹å¼ç»™èµ‹å€¼ç»™ dataï¼š

```js
  onLoad: function (options) {
    let that=this
    wx.request({
      url: 'https://news-at.zhihu.com/api/4/news/latest',
      header: {
        'content-type': 'application/json'
      },
      success(res) {
        let date=res.data.date
        let stories=res.data.stories
        let top_stories = res.data.top_stories
        that.setData({
          date,stories,top_stories
        })
      }
    })
  },
```

ç¼–è¯‘ä¹‹åï¼Œæˆ‘ä»¬å°±èƒ½çœ‹åˆ°çŸ¥ä¹æ—¥æŠ¥çš„æ•°æ®å°±æ¸²æŸ“åœ¨é¡µé¢ä¸Šäº†ã€‚

```
å°ä»»åŠ¡ï¼š top_stories æ˜¯ç•Œé¢é¡¶éƒ¨è½®æ’­çš„æ˜¾ç¤ºå†…å®¹ï¼Œåˆ¶ä½œä¸€ä¸ªswiperè½®æ’­ï¼Œå°†top_storiesé‡Œçš„å†…å®¹æ¸²æŸ“åˆ°è½®æ’­ä¸Šã€‚

æ‰“å¼€å¼€å‘è€…å·¥å…·è°ƒè¯•å·¥å…·æ çš„AppDataæ ‡ç­¾é¡µï¼Œå°±èƒ½çœ‹åˆ°ä»ç½‘ç»œAPIé‡Œè·å–åˆ°çš„æ•°æ®ã€‚ä¹Ÿå¯ä»¥åœ¨æ­¤å¤„ç¼–è¾‘æ•°æ®ï¼Œå¹¶åŠæ—¶åœ°åé¦ˆåˆ°ç•Œé¢ä¸Šã€‚å¦‚æœAppDataé‡Œæœ‰æ•°æ®ï¼Œå¯ä»¥ç¡®è®¤é¡µé¢å·²ç»å–å¾—resé‡Œçš„dataæ•°æ®ï¼Œå¦‚æœæ•°æ®æ²¡æœ‰æ¸²æŸ“åˆ°é¡µé¢ï¼Œè¯´æ˜åˆ—è¡¨æ¸²æŸ“å¯èƒ½æœ‰è¯¯ã€‚é€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥è¯Šæ–­é¡µé¢æ¸²æŸ“é—®é¢˜æ‰€åœ¨ã€‚
```

##### è¯¦æƒ…é¡µæ•°æ®æ¸²æŸ“

å‰é¢æˆ‘ä»¬è·å–çš„åªæ˜¯çŸ¥ä¹çš„æœ€æ–°æ–‡ç« åˆ—è¡¨ï¼Œé‚£æ–‡ç« é‡Œé¢çš„å†…å®¹å‘¢ï¼Ÿé€šè¿‡ API æ–‡æ¡£ä»¥åŠæˆ‘ä»¬é€šè¿‡é“¾æ¥è®¿é—®çš„ç»“æœæ¥çœ‹ï¼Œæˆ‘ä»¬åªéœ€è¦å–å¾—äº†æ–‡ç« çš„ IDï¼Œå°±èƒ½ä» API é‡Œè·å–åˆ°æ–‡ç« çš„è¯¦æƒ…é¡µå†…å®¹ï¼š

```
https://news-at.zhihu.com/api/4/news/9714883  //9714883æ˜¯æ–‡ç« çš„ID
```

ä½¿ç”¨å¼€å‘è€…å·¥å…·æ–°å»ºä¸€ä¸ª story é¡µé¢ï¼Œç„¶ååœ¨ story.wxml é‡Œè¾“å…¥ä»¥ä¸‹ä»£ç :

```html
<view class="page__bd">
    <view class="weui-article">
        <view class="weui-article__h1">{{title}}</view>
        <view class="weui-article__section">
            <view class="weui-article__section">
                <view class="weui-article__p">
                    <image class="weui-article__img" src="{{image}}" mode="widthFix" style="width:100%" />
                 </view>
                 <view class="weui-article__p">
                      {{body}}
                </view>
                <view class="weui-article__p">
                        çŸ¥ä¹é“¾æ¥ï¼š{{share_url}}
                </view>
            </view>
        </view>
    </view>
</view>
```

ç„¶åå†åœ¨ request.js çš„ data é‡Œå£°æ˜ titleã€bodyã€imageã€share_url çš„åˆå§‹å€¼ï¼š

```js
data: {
    title:"",
    body:"",
    image:"",
    share_url:"",
  },
```

åœ¨ onLoad ç”Ÿå‘½å‘¨æœŸå‡½æ•°é‡Œè°ƒç”¨ wx.request è·å–æ–‡ç« è¯¦æƒ…é¡µçš„æ•°æ®ï¼Œå¹¶é€šè¿‡ setData çš„æ–¹å¼ç»™èµ‹å€¼ç»™ dataï¼š

```js
  onLoad: function (options) {
    let stories_id=9714883
    let that = this
    wx.request({
      url: 'https://news-at.zhihu.com/api/4/news/'+stories_id,
      header: {
        'content-type': 'application/json'
      },
      success(res) {
        let title = res.data.title
        let body=res.data.body
        let image=res.data.image
        let share_url=res.data.share_url
        that.setData({
          title,body,image,share_url
        })
      }
    })
```

ç¼–è¯‘ä¹‹åï¼Œå‘ç°æ•°æ®è™½ç„¶æ¸²æŸ“å‡ºæ¥äº†ï¼Œä½†æ˜¯å­˜åœ¨â€œä¹±ç â€ï¼ˆæ˜¯ HTML æ ‡ç­¾ï¼‰ï¼Œé‚£è¿™ä¸ªè¦å¦‚ä½•å¤„ç†å‘¢ï¼Ÿè¿™ä¸ªå°±æ¶‰åŠåˆ°å°ç¨‹åºçš„å¯Œæ–‡æœ¬è§£æäº†ã€‚

##### HTML æ ‡ç­¾è§£æ rich-text

åªéœ€è¦å°†å¯Œæ–‡æœ¬å¯¹è±¡æ”¾åœ¨ rich-text çš„ nodes é‡Œï¼Œå°±èƒ½å°†å¯Œæ–‡æœ¬è§£æå‡ºæ¥äº†ï¼Œæ¯”å¦‚å°†ä¸Šé¢çš„{{body}}æ›¿æ¢æˆä»¥ä¸‹ä»£ç ã€‚

```
<rich-text nodes="{{body}}"></rich-text>
å°ç¨‹åºå¯Œæ–‡æœ¬è§£æçš„æ–¹æ¡ˆè¿˜æœ‰ï¼šComi ï¼Œè…¾è®¯ Omi å›¢é˜Ÿå¼€å‘çš„å°ç¨‹åºä»£ç é«˜äº®å’Œ markdown æ¸²æŸ“ç»„ä»¶ï¼ŒGithubåœ°å€ï¼Œå…·ä½“æ•ˆæœå¯ä»¥åœ¨å¾®ä¿¡å°ç¨‹åºé‡Œæœç´¢omiCloudï¼›ä»¥åŠwxPraseï¼Œå¾®ä¿¡å°ç¨‹åºå¯Œæ–‡æœ¬è§£æè‡ªå®šä¹‰ç»„ä»¶ï¼Œæ”¯æŒHTMLåŠmarkdownè§£æï¼ŒGithubåœ°å€ï¼Œå½“ä½ é‡åˆ°æ›´åŠ å¤æ‚çš„å¯Œæ–‡æœ¬è§£ææ—¶ï¼Œå¯ä»¥æ¥æ·±å…¥äº†è§£ã€‚
```

##### è·¨é¡µé¢æ•°æ®æ¸²æŸ“

ä¸Šé¢æˆ‘ä»¬åªæ˜¯æ¸²æŸ“äº†å•ç¯‡æ–‡ç« çš„è¯¦æƒ…é¡µï¼Œé‚£å¦‚ä½•ç‚¹å‡»æ–‡ç« åˆ—è¡¨å°±èƒ½æ¸²æŸ“ä¸ä¹‹ç›¸åº”çš„æ–‡ç« è¯¦æƒ…é¡µå‘¢ï¼Ÿè¿™å°±å›åˆ°äº†æˆ‘ä»¬ä¹‹å‰å­¦è¿‡çš„è·¨é¡µé¢æ•°æ®æ¸²æŸ“ã€‚

é¦–å…ˆæŠŠ request é¡µé¢ç½®äºé¦–é¡µï¼Œç„¶åå†ç»™ request.wxml é‡Œçš„ navigator ç»„ä»¶çš„é“¾æ¥ä¸Šæºå¸¦æ–‡ç« çš„ idï¼š

```
url="/pages/story/story?id={{stories.id}}"
```

å½“ç‚¹å‡» request é¡µé¢çš„é“¾æ¥æ—¶ï¼Œé“¾æ¥æºå¸¦çš„æ•°æ®å°±ä¼šä¼ åˆ° story é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•° onLoad çš„ options å¯¹è±¡é‡Œï¼Œå°† options é‡Œçš„ idï¼Œèµ‹å€¼ç»™ stories_idï¼Œä¹Ÿå°±æ˜¯å°†æ–‡ç«  id 9714883 ä¿®æ”¹ä¸º [options.id](http://options.id/)

```
let stories_id=options.id
```

è¿™æ ·å†æ¥ç‚¹å‡» request é¡µé¢çš„é“¾æ¥ï¼Œä¸åŒçš„é“¾æ¥å°±ä¼šæ¸²æŸ“ä¸åŒçš„æ–‡ç« è¯¦æƒ…ã€‚

##### è§£æ„èµ‹å€¼

è§£æ„èµ‹å€¼ä¹Ÿå°±æ˜¯ä»æ•°ç»„ Array å’Œå¯¹è±¡ Object ä¸­æå–å€¼ï¼ŒæŒ‰ç…§å¯¹ç…§çš„ä½ç½®ï¼Œå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ã€‚æ¯”å¦‚ä¸Šé¢çš„å˜é‡å£°æ˜ï¼Œä¸ºäº†èƒ½å¤Ÿä¸ API é‡Œçš„æ•°æ®å­—æ®µä¸€ä¸€å¯¹åº”ï¼Œæˆ‘ä»¬ä¼šå£°æ˜å¾ˆå¤šå˜é‡ï¼ŒçŸ¥ä¹æ—¥æŠ¥çš„ API è¿˜ç®—æ¯”è¾ƒå°‘çš„ï¼Œå¤šäº†å°±æ¯”è¾ƒå¤æ‚äº†ã€‚

```js
let title = res.data.title
let body=res.data.body
let image=res.data.image
let share_url=res.data.share_url
```

è¿™æ—¶å¯ä»¥ç®€å†™æˆï¼š

```js
let { title, body, image, share_url}=res.data
```





#### å¯¹äºkeyçš„å­˜æ”¾:

åœ¨apiç½‘ç»œè¯·æ±‚æ•°æ®æ—¶ä¼šæä¾›å¾ˆå¤šè¯·æ±‚æ—¶çš„keyï¼Œé€šå¸¸æˆ‘ä»¬ä¼šæŠŠæ‹¿åˆ°çš„ key æ”¾åœ¨ app.js çš„ globalData é‡Œï¼Œæˆ–è€…åœ¨å°ç¨‹åºé‡Œæ–°å»ºä¸€ä¸ª config.jsï¼Œæ–¹ä¾¿ä»¥åå…¨å±€è°ƒç”¨ï¼Œè€Œä¸æ˜¯æŠŠ key ç›´æ¥å†™åœ¨é¡µé¢é‡Œã€‚



æ–¹æ³•ä¸€ï¼šå†™åœ¨ app.js é‡Œçš„ globalDataï¼Œæˆ–è€…æ–°å»ºä¸€ä¸ª keyData å¯¹è±¡ï¼Œåªè¦è¾¾åˆ°å…¨å±€è°ƒç”¨çš„ç›®çš„éƒ½å¯ä»¥ï¼Œä»¥ globalData ä¸ºä¾‹

```
  globalData: {
    juheKey:"366444.......00ff", //èšåˆAppKey
  },
```

è¿™ç§æ–¹å¼è°ƒç”¨æ—¶é¦–å…ˆåœ¨é¡µé¢çš„ js æ–‡ä»¶é‡Œã€Page()å‡½æ•°çš„å‰é¢ä½¿ç”¨

```
const app=getApp()
```

ä¹‹åå°±å¯ä»¥ä½¿ç”¨ app.globalData.juheKey æ¥è°ƒç”¨å®ƒäº†ã€‚

æ–¹æ³•äºŒï¼šä¹Ÿå¯ä»¥åœ¨å°ç¨‹åºçš„æ ¹ç›®å½•æˆ–è€… utils æ–‡ä»¶å¤¹æ–°å»ºä¸€ä¸ª config.jsï¼Œç„¶åç»“åˆå‰é¢æ¨¡å—åŒ–çš„çŸ¥è¯†ï¼Œå†™å…¥ä»¥ä¸‹ä»£ç ï¼š

```
module.exports = {
  juheKey:"366444.......00ff", //èšåˆAppKey
}
```

è¿™ç§æ–¹å¼è°ƒç”¨æ—¶æˆ‘ä»¬éœ€è¦å…ˆåœ¨é¡µé¢çš„ Page()å‡½æ•°å‰é¢å¼•å…¥æ¨¡å—åŒ–æ–‡ä»¶

```
const key = require('../../utils/config.js')
```

ç„¶åå°±å¯ä»¥ä½¿ç”¨ key.juheKey è°ƒç”¨å®ƒäº†ã€‚

> å°†ä¸€äº›é€šç”¨çš„æ•°æ®ã€å‡½æ•°å•ç‹¬æ‹¿å‡ºæ¥å­˜æ”¾åœ¨globalDataé‡Œæˆ–è¿›è¡Œæ¨¡å—åŒ–ï¼Œæ˜¯åœ¨å®é™…å¼€å‘ä¸­ä¼šç»å¸¸ä½¿ç”¨åˆ°çš„ä¸€ç§æ–¹æ³•ï¼Œå®ƒå¯ä»¥è®©æ•°æ®ã€å‡½æ•°æ›´å®¹æ˜“ç®¡ç†ä»¥åŠå¯ä»¥











