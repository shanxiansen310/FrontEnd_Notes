å…³äºå †çš„è¯¦ç»†ä»‹ç»: ğŸ‘‰  [å †](https://www.cnblogs.com/chengxiao/p/6129630.html)

- å †æ˜¯ä¸€ä¸ª**å®Œå…¨äºŒå‰æ ‘ã€‚**

- å®Œå…¨äºŒå‰æ ‘ï¼š äºŒå‰æ ‘é™¤å¼€æœ€åä¸€å±‚ï¼Œå…¶ä»–å±‚ç»“ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§ï¼Œæœ€åä¸€å±‚çš„æ‰€æœ‰ç»“ç‚¹éƒ½é›†ä¸­åœ¨å·¦è¾¹ï¼ˆå·¦è¾¹ç»“ç‚¹æ’åˆ—æ»¡çš„æƒ…å†µä¸‹ï¼Œå³è¾¹æ‰èƒ½ç¼ºå¤±ç»“ç‚¹ï¼‰ã€‚

- **å †**

  **å †æ˜¯å…·æœ‰ä»¥ä¸‹æ€§è´¨çš„å®Œå…¨äºŒå‰æ ‘ï¼šæ¯ä¸ªç»“ç‚¹çš„å€¼éƒ½å¤§äºæˆ–ç­‰äºå…¶å·¦å³å­©å­ç»“ç‚¹çš„å€¼ï¼Œç§°ä¸ºå¤§é¡¶å †ï¼›æˆ–è€…æ¯ä¸ªç»“ç‚¹çš„å€¼éƒ½å°äºæˆ–ç­‰äºå…¶å·¦å³å­©å­ç»“ç‚¹çš„å€¼ï¼Œç§°ä¸ºå°é¡¶å †ã€‚å¦‚ä¸‹å›¾ï¼š**

  ![image-20210202105248316](å †.assets/image-20210202105248316.png)

  åŒæ—¶ï¼Œæˆ‘ä»¬å¯¹å †ä¸­çš„ç»“ç‚¹æŒ‰å±‚è¿›è¡Œç¼–å·ï¼Œå°†è¿™ç§é€»è¾‘ç»“æ„æ˜ å°„åˆ°æ•°ç»„ä¸­å°±æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­

  ![image-20210202105315674](å †.assets/image-20210202105315674.png)

  è¯¥æ•°ç»„ä»é€»è¾‘ä¸Šè®²å°±æ˜¯ä¸€ä¸ªå †ç»“æ„ï¼Œæˆ‘ä»¬ç”¨ç®€å•çš„å…¬å¼æ¥æè¿°ä¸€ä¸‹å †çš„å®šä¹‰å°±æ˜¯ï¼š

  **å¤§é¡¶å †ï¼šarr[i] >= arr[2i+1] && arr[i] >= arr[2i+2]**  

  **å°é¡¶å †ï¼šarr[i] <= arr[2i+1] && arr[i] <= arr[2i+2]**  

å®Œå…¨äºŒå‰æ ‘ä¸­éå¶å­èŠ‚ç‚¹åºå·ä¸ºiçš„è¯, å…¶å·¦å­æ ‘åºå·ä¸º2i+1, å³å­æ ‘åºå·ä¸º2i+2



#### **å †ç»“æ„å®ç°**  å¤§å°é¡¶å †é€šç”¨(æ›´æ¢cmpæ–¹æ³•)

1.insert()  æ’å…¥numåœ¨æ•°ç»„æœ€å, æ ¹æ®å †æ˜¯å®Œå…¨äºŒå‰æ ‘çš„æ€§è´¨, ä»ä¸‹å¾€ä¸Šè°ƒæ•´

**æ—¶é—´å¤æ‚åº¦**ï¼šO(logn)

å°†å…ƒç´ æ’å…¥æœ€åä¸€ä½ï¼Œå†è¿›è¡Œå‘ä¸Šå†’æ³¡ï¼Œå³å¦‚æœçˆ¶èŠ‚ç‚¹çš„å€¼å°äºè¢«æ’å…¥çš„å…ƒç´ ï¼Œçˆ¶èŠ‚ç‚¹ä¸‹ç§»ï¼Œè¢«æ’å…¥çš„å…ƒç´ ä¸Šç§»ã€‚æ—¶é—´å¤æ‚åº¦å–å†³äºæ ‘çš„é«˜åº¦hã€‚è€Œå®Œå…¨äºŒå‰æ ‘çš„æ ‘çš„é«˜åº¦ä¸º[logn+1]çš„ä¸Šå–æ•´ï¼Œæ‰€ç¤ºæ—¶é—´å¤æ‚åº¦ä¸ºO(logn)ã€‚

2.extract()  äº¤æ¢é¦–å°¾, pop()   ä»ä¸Šå‘ä¸‹è¿›è¡Œè°ƒæ•´

**æ—¶é—´å¤æ‚åº¦**ï¼šO(logn)

åˆ é™¤æ“ä½œçš„é€»è¾‘ä¸ºï¼Œåˆ é™¤å †çš„æ ¹èŠ‚ç‚¹ï¼Œå°†æœ€åä¸€ä¸ªèŠ‚ç‚¹è¡¥åˆ°æ ¹èŠ‚ç‚¹ä½ç½®ï¼Œå¾—åˆ°ä¸€é¢—ä¸ç¬¦åˆè§„åˆ™çš„å †ã€‚å†å¯¹æ ¹èŠ‚ç‚¹è¿›è¡Œå‘ä¸‹å†’æ³¡ï¼Œå³å¦‚æœçˆ¶èŠ‚ç‚¹å°äºæŸä¸€å­©å­æˆ–æ‰€æœ‰å­©å­ï¼Œå°†å…ƒç´ å€¼æœ€å¤§ çš„å­©å­ä¸çˆ¶èŠ‚ç‚¹äº¤æ¢ã€‚å­©å­ä¸Šç§»ï¼Œçˆ¶èŠ‚ç‚¹ä¸‹ç§»ï¼Œä¸‹ç§»åä¸å­©å­é‡å¤è¯¥æ“ä½œï¼Œç›´åˆ°æ¯”å­©å­éƒ½å¤§æˆ–æ²¡æœ‰å­©å­ã€‚
åˆ é™¤æ“ä½œå‘ä¸‹æ·±å…¥ï¼Œæ“ä½œæ—¶é—´è¿˜æ˜¯å–å†³äºæ ‘çš„é«˜åº¦ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(logn)


```js
const maxHeapCmp=(x,y)=>x>y;  //æœ€å¤§å †
const swap=(arr,i,j)=>([arr[i], arr[j]] = [arr[j], arr[i]]);
class Heap{
    /*é»˜è®¤æœ€å¤§å †*/
    constructor(cmp=maxHeapCmp) {
        this.container=[];
        this.cmp=cmp;
    }

    insert(data){
        const  {container,cmp}=this;
        container.push(data);
        let index=container.length-1;
        //å»ºç«‹å¤§é¡¶å †/å°é¡¶å †
        while (index) {
            let parent = Math.floor((index - 1) / 2);
            if (!cmp(container[index],container[parent])){
                return;
            }
            swap(container,index,parent);
            index=parent;
        }
    }

    extract(){
        const  {container,cmp}=this;
        if (!container.length) return null;
        swap(container,0,container.length-1);
        const res=container.pop();  //å¾—åˆ°ç»“æœ

        //è°ƒæ•´å †
        const length=container.length;
        let index=0,exchange=index*2+1;
        while (exchange<length){
            //ç”±æ¯”è¾ƒå‡½æ•°ç¡®å®šå¤§å°é¡¶å †. å¦‚æœè¿™é‡Œæ˜¯å¤§é¡¶å †,åˆ™éœ€è¦å¤§çš„,
            // æ‰€ä»¥æˆ‘ä»¬åˆ¤æ–­çš„æ˜¯å³èŠ‚ç‚¹æ˜¯å¦å¤§äºå·¦èŠ‚ç‚¹
            if (exchange+1<length && cmp(container[exchange+1],container[exchange])){
                exchange++;
            }
            if (cmp(container[exchange],container[index])){
                swap(container,exchange,index);
                index=exchange;
                exchange=exchange*2+1;
            }else {   //è¿™æ˜¯å»ºç«‹åœ¨åŸæœ¬ä¸‹é¢çš„éƒ½æ˜¯å¤§é¡¶å †çš„æƒ…å†µ,æ‰€ä»¥å¯ä»¥break
                break;
            }
        }
        return res;
    }

    top(){
        return  this.container.length? this.container[0]:null;
    }
}
```



