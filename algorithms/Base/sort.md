## æ’åºç®—æ³•æ€»ç»“

[TOC]



æ’åºç®—æ³•å¯ä»¥åˆ†ä¸º**å†…éƒ¨æ’åº**å’Œ**å¤–éƒ¨æ’åº**ã€‚

å†…éƒ¨æ’åºæ˜¯æ•°æ®è®°å½•åœ¨å†…å­˜ä¸­è¿›è¡Œæ’åºã€‚

è€Œå¤–éƒ¨æ’åºæ˜¯å› æ’åºçš„æ•°æ®å¾ˆå¤§ï¼Œä¸€æ¬¡ä¸èƒ½å®¹çº³å…¨éƒ¨çš„æ’åºè®°å½•ï¼Œåœ¨æ’åºè¿‡ç¨‹ä¸­éœ€è¦è®¿é—®å¤–å­˜ã€‚

å¸¸è§çš„å†…éƒ¨æ’åºç®—æ³•æœ‰ï¼šæ’å…¥æ’åºã€å¸Œå°”æ’åºã€é€‰æ‹©æ’åºã€å†’æ³¡æ’åºã€å½’å¹¶æ’åºã€å¿«é€Ÿæ’åºã€å †æ’åºã€åŸºæ•°æ’åºç­‰ã€‚

ç”¨ä¸€å¼ å›¾æ¦‚æ‹¬ï¼š

![image-20210202105137716](sort.assets/image-20210202105137716.png)



**â˜…IN-PLACE**

å‡å¦‚é—®é¢˜è§„æ¨¡æ˜¯nï¼Œåœ¨è§£å†³é—®é¢˜è¿‡ç¨‹ä¸­ï¼Œåªå¼€è¾Ÿäº†å¸¸æ•°é‡çš„ç©ºé—´ï¼Œä¸næ— å…³ï¼Œè¿™æ˜¯åŸå€æ“ä½œï¼Œå°±æ˜¯In-place

**â˜…OUT-PLACE**

å¦‚æœå¼€è¾Ÿçš„è¾…åŠ©ç©ºé—´ä¸é—®é¢˜è§„æ¨¡æœ‰å…³ï¼Œåˆ™æ˜¯out-placeã€‚
æ‹¿ä¸Šé¢çš„ä¾‹å­æ¥è¯´ï¼Œå‡è®¾ä½ æŠŠæ’åºæ—¶æŠŠæ•°ç»„ä¸­çš„æ•°æŒ‰é¡ºåºæ”¾å…¥äº†ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œæˆ‘å°±å¼€äº†ä¸€ä¸ªnè§„æ¨¡å¤§å°çš„æ•°ç»„ï¼Œè¿™ä¸ªå°±ä¸æ•°æ®è§„æ¨¡æœ‰å…³ã€‚



**ç¨³å®šæ€§**:å‡å®šåœ¨å¾…æ’åºçš„è®°å½•åºåˆ—ä¸­ï¼Œå­˜åœ¨å¤šä¸ªå…·æœ‰ç›¸åŒçš„å…³é”®å­—çš„è®°å½•ï¼Œè‹¥ç»è¿‡æ’åºï¼Œè¿™äº›è®°å½•çš„ç›¸å¯¹æ¬¡åºä¿æŒä¸å˜ï¼Œå³åœ¨åŸåºåˆ—ä¸­ï¼Œr[i]=r[j]ï¼Œä¸”r[i]åœ¨r[j]ä¹‹å‰ï¼Œè€Œåœ¨æ’åºåçš„åºåˆ—ä¸­ï¼Œr[i]ä»åœ¨r[j]ä¹‹å‰ï¼Œåˆ™ç§°è¿™ç§æ’åºç®—æ³•æ˜¯ç¨³å®šçš„ï¼›å¦åˆ™ç§°ä¸ºä¸ç¨³å®šçš„ã€‚

å¯¹æ¯ç§æ’åºç®—æ³•ç¨³å®šæ€§çš„è§£æ:  ğŸ‘‰  [æ’åºç®—æ³•ç¨³å®šæ€§_ç™¾åº¦ç™¾ç§‘ (baidu.com)](https://baike.baidu.com/item/æ’åºç®—æ³•ç¨³å®šæ€§)

â–¼é€‰æ‹©æ’åºã€å¿«é€Ÿæ’åºã€å¸Œå°”æ’åºã€å †æ’åºä¸æ˜¯ç¨³å®šçš„æ’åºç®—æ³•ï¼Œè€Œå†’æ³¡æ’åºã€æ’å…¥æ’åºã€å½’å¹¶æ’åºå’ŒåŸºæ•°æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ã€‚





### å†’æ³¡æ’åº

â˜…å†’æ³¡æ’åºæœ¬è´¨ï¼š**Nä¸ªæ•°ï¼Œéœ€è¦N-1è¶Ÿï¼Œæ¯è¶Ÿéœ€è¦æ¯”è¾ƒN-iæ¬¡ï¼ˆiæ˜¯æŒ‡ç¬¬iè¶Ÿï¼‰**

å¦‚10ä¸ªæ•°éœ€è¦æ¯”9+8+7+6+5+4+3+2+1=45æ¬¡

â˜…å†’æ³¡æ’åºçš„ä¼˜ç‚¹ï¼šæ¯è¿›è¡Œä¸€è¶Ÿæ’åºï¼Œå°±ä¼šå°‘æ¯”è¾ƒä¸€æ¬¡ï¼Œå› ä¸ºæ¯è¿›è¡Œä¸€è¶Ÿæ’åºéƒ½ä¼šæ‰¾å‡ºä¸€ä¸ªè¾ƒå¤§å€¼ã€‚å¦‚ä¸Šä¾‹ï¼šç¬¬ä¸€è¶Ÿæ¯”è¾ƒä¹‹åï¼Œæ’åœ¨æœ€åçš„ä¸€ä¸ªæ•°ä¸€å®šæ˜¯æœ€å¤§çš„ä¸€ä¸ªæ•°ï¼Œç¬¬äºŒè¶Ÿæ’åºçš„æ—¶å€™ï¼Œåªéœ€è¦æ¯”è¾ƒé™¤äº†æœ€åä¸€ä¸ªæ•°ä»¥å¤–çš„å…¶ä»–çš„æ•°ï¼ŒåŒæ ·ä¹Ÿèƒ½æ‰¾å‡ºä¸€ä¸ªæœ€å¤§çš„æ•°æ’åœ¨å‚ä¸ç¬¬äºŒè¶Ÿæ¯”è¾ƒçš„æ•°åé¢ï¼Œç¬¬ä¸‰è¶Ÿæ¯”è¾ƒçš„æ—¶å€™ï¼Œåªéœ€è¦æ¯”è¾ƒé™¤äº†æœ€åä¸¤ä¸ªæ•°ä»¥å¤–çš„å…¶ä»–çš„æ•°ï¼Œä»¥æ­¤ç±»æ¨â€¦â€¦ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯è¿›è¡Œä¸€è¶Ÿæ¯”è¾ƒï¼Œæ¯ä¸€è¶Ÿå°‘æ¯”è¾ƒä¸€æ¬¡ï¼Œä¸€å®šç¨‹åº¦ä¸Šå‡å°‘äº†ç®—æ³•çš„é‡

```js
/**
 * @param arr
 * @returns {*}
 */
/*å†’æ³¡æ’åº O(n^2)*/
const BubbleSort=(arr)=>{
    let isSorted=true;
    /*æ³¨æ„è¿™é‡Œåªéœ€è¦n-1è¶Ÿå°±è¡Œäº†!!!*/
    for (let i=0;i<arr.length-1;i++){
        /*ä¼˜åŒ–ä¸€ä¸‹,å¦‚æœæ²¡æœ‰å†è¿›è¡Œäº¤æ¢å°±ç»“æŸ*/
        isSorted=true;
        /*æ¯å®Œæˆä¸€è¶Ÿéƒ½ä¼šé€‰å‡ºä¸€ä¸ªæå¤§å€¼æ”¾åœ¨æœ€å,æ‰€ä»¥å¯ä»¥å°‘æ£€æŸ¥iä¸ªæ•°*/
        for (let j=0;j<arr.length-1-i;j++){
            if (arr[j]>arr[j+1]){
                [arr[j],arr[j+1]]=[arr[j+1],arr[j]];
                isSorted=false;
            }
        }
        if (isSorted){  //è¡¨ç¤ºæ²¡æœ‰å†è¿›è¡Œäº¤æ¢
            break;
        }
    }
    return arr;
}
```

â–¼ç¨³å®šæ€§:å†’æ³¡æ’åºå°±æ˜¯æŠŠå°çš„å…ƒç´ å¾€å‰è°ƒæˆ–è€…æŠŠå¤§çš„å…ƒç´ å¾€åè°ƒã€‚æ¯”è¾ƒæ˜¯ç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ æ¯”è¾ƒï¼Œäº¤æ¢ä¹Ÿå‘ç”Ÿåœ¨è¿™ä¸¤ä¸ªå…ƒç´ ä¹‹é—´ã€‚æ‰€ä»¥ï¼Œå¦‚æœä¸¤ä¸ªå…ƒç´ ç›¸ç­‰ï¼Œæˆ‘æƒ³ä½ æ˜¯ä¸ä¼šå†æ— èŠåœ°æŠŠä»–ä»¬ä¿©äº¤æ¢ä¸€ä¸‹çš„ï¼›å¦‚æœä¸¤ä¸ªç›¸ç­‰çš„å…ƒç´ æ²¡æœ‰ç›¸é‚»ï¼Œé‚£ä¹ˆå³ä½¿é€šè¿‡å‰é¢çš„ä¸¤ä¸¤äº¤æ¢æŠŠä¸¤ä¸ªç›¸é‚»èµ·æ¥ï¼Œè¿™æ—¶å€™ä¹Ÿä¸ä¼šäº¤æ¢ï¼Œæ‰€ä»¥ç›¸åŒå…ƒç´ çš„å‰åé¡ºåºå¹¶æ²¡æœ‰æ”¹ å˜ï¼Œæ‰€ä»¥å†’æ³¡æ’åºæ˜¯ä¸€ç§ç¨³å®šæ’åºç®—æ³•ã€‚



### å¿«é€Ÿæ’åº

![quickSort](sort.assets\quickSort.gif)



è‡ªå·±çš„ç†è§£:

![qs](sort.assets\qs.png)

â˜…å…¶å®è¿™ä¸­é—´æœ‰é‡å¤çš„æ•°å­—, å…¶å®é‡å¤çš„é‚£ä¸ªæ•°å­—åªæ˜¯æš‚æ—¶è¡¨ç¤ºkeyæ¢çº½å€¼çš„ä½ç½®, æ–¹ä¾¿åœ¨æœ€åçš„æ—¶å€™æ›¿æ¢!!!

JavaScriptä»£ç :

```js
/**
 * @param {Number[]} arr
 * @return {Number[]}
 */
const QuickSort=(arr)=>{

    const divide=(arr,low,high)=>{
        //æ¯æ¬¡å‡è®¾arr[low]ä¸ºkey,ä¸è¦å†™æˆarr[0],æ¯æ¬¡divideèŒƒå›´ä¸åŒ!
        let key=arr[low];
        while (low<high) {
            while (key <= arr[high] && low < high) high--;
            arr[low] = arr[high];
            while (key >= arr[low] && low < high) low++;
            arr[high] = arr[low];
        }
        arr[low]=key;
        return low;     //è¿”å›çš„æ˜¯ä½ç½®,ä¸æ˜¯key!!!
    }

    let sort=(arr,low,high)=>{
        /*è¿™æ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹, æˆ‘ä»¬éœ€è¦ç”¨ifæ¥è¡¨ç¤ºæ‰§è¡Œé€’å½’çš„æƒ…å†µ,åˆ«å†™æˆwhileäº†
        * åŒæ—¶è¿™é‡Œåªéœ€è¦å¯¹ç¬¦åˆæƒ…å†µçš„è¿›è¡Œæ’åºè€Œå·², å°±ä¸ç”¨å†™if(ä¸æ»¡è¶³) return nulläº†*/

        if (low<high){
            let  mid=divide(arr,low,high);
            sort(arr,low,mid-1);
            sort(arr,mid+1,high);
        }
    }

    sort(arr,0,arr.length-1)
    return  arr;
}
```

æœ€ä¼˜æƒ…å†µ: æ¯æ¬¡é€‰å–åˆ°çš„keyåˆšå¥½å¹³åˆ†æ•´ä¸ªæ•°ç»„, å°±æ˜¯æŠŠæ•°ç»„åˆšå¥½åˆ†ä¸ºé•¿åº¦ç›¸ç­‰çš„ä¸¤éƒ¨åˆ†
t(n) = cn + 2t(n/2)
= cn + 2(cn/2 + 2t(n/4)) = 2cn + 4t(n/4)
= 2cn + 4(cn/4 + 2t(n/8)) = 3cn + 8t(n/8)
= icn + 2^i * t(n/(2^i))
å½“ 2^i = næ—¶, i = logn, æ’åºç»“æŸï¼Œ
t(n) = cnlogn + n*t(1) = o(nlogn)
ğŸŒŸå¯ä»¥ç†è§£ä¸º lognå±‚ , æ¯å±‚ä¼šè¿›è¡Œnæ¬¡æ¯”è¾ƒ:  n * logn 

æœ€åæƒ…å†µ: å®Œå…¨æœ‰åº, å¾…æ’åºçš„åºåˆ—ä¸ºæ­£åºæˆ–è€…é€†åºï¼Œæ¯æ¬¡åˆ’åˆ†åªå¾—åˆ°ä¸€ä¸ªæ¯”ä¸Šä¸€æ¬¡åˆ’åˆ†å°‘ä¸€ä¸ªè®°å½•çš„å­åºåˆ—ï¼Œæ³¨æ„å¦ä¸€ä¸ªä¸ºç©ºã€‚å¦‚æœé€’å½’æ ‘ç”»å‡ºæ¥ï¼Œå®ƒå°±æ˜¯ä¸€æ£µæ–œæ ‘ã€‚æ­¤æ—¶éœ€è¦æ‰§è¡Œnâ€1æ¬¡é€’å½’è°ƒç”¨ï¼Œä¸”ç¬¬iæ¬¡åˆ’åˆ†éœ€è¦ç»è¿‡nâ€iæ¬¡å…³é”®å­—çš„æ¯”è¾ƒæ‰èƒ½æ‰¾åˆ°ç¬¬iä¸ªè®°å½•, å› æ­¤æ¯”è¾ƒæ¬¡æ•°ä¸º

 <img src="sort.assets/image-20210202172249433.png" alt="image-20210202172249433" style="zoom:67%;" />

ğŸŒŸå¯ä»¥ç†è§£ä¸º nå±‚ , æ¯å±‚ä¼šè¿›è¡Œnæ¬¡æ¯”è¾ƒ:  n^2^ 



ç¨³å®šæ€§åˆ†æ: ä¸ç¨³å®š

â–¼åœ¨ä¸­æ¢å…ƒç´ å’Œa[j]äº¤æ¢çš„æ—¶å€™ï¼Œå¾ˆæœ‰å¯èƒ½æŠŠå‰é¢çš„å…ƒç´ çš„ç¨³å®šæ€§æ‰“ä¹±ï¼Œæ¯”å¦‚åºåˆ—ä¸º 5 3 3 4 3 8 9 10 11ï¼Œ ç°åœ¨ä¸­æ¢å…ƒç´ 5å’Œ3(ç¬¬5ä¸ªå…ƒç´ ï¼Œä¸‹æ ‡ä»1å¼€å§‹è®¡)äº¤æ¢å°±ä¼šæŠŠå…ƒç´ 3çš„ç¨³å®šæ€§æ‰“ä¹±ï¼Œæ‰€ä»¥å¿«é€Ÿæ’åºæ˜¯ä¸€ä¸ªä¸ç¨³å®šçš„æ’åºç®—æ³•ï¼Œä¸ç¨³å®šå‘ç”Ÿåœ¨ä¸­æ¢å…ƒç´ å’Œa[j] äº¤æ¢çš„æ—¶åˆ»





### å½’å¹¶æ’åº

**ç®—æ³•æ­¥éª¤**

1. ç”³è¯·ç©ºé—´ï¼Œä½¿å…¶å¤§å°ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—ä¹‹å’Œï¼Œè¯¥ç©ºé—´ç”¨æ¥å­˜æ”¾åˆå¹¶åçš„åºåˆ—ï¼›
2. è®¾å®šä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€åˆä½ç½®åˆ†åˆ«ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼›
3. æ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ ï¼Œé€‰æ‹©ç›¸å¯¹å°çš„å…ƒç´ æ”¾å…¥åˆ°åˆå¹¶ç©ºé—´ï¼Œå¹¶ç§»åŠ¨æŒ‡é’ˆåˆ°ä¸‹ä¸€ä½ç½®ï¼›
4. é‡å¤æ­¥éª¤ 3 ç›´åˆ°æŸä¸€æŒ‡é’ˆè¾¾åˆ°åºåˆ—å°¾ï¼›
5. å°†å¦ä¸€åºåˆ—å‰©ä¸‹çš„æ‰€æœ‰å…ƒç´ ç›´æ¥å¤åˆ¶åˆ°åˆå¹¶åºåˆ—å°¾ã€‚

**æ—¶é—´å¤æ‚åº¦åˆ†æ**: O(nlogn):  æ‹†åˆ†çš„æ—¶å€™ä¼šæ‹†åˆ†lognå±‚, ç„¶åæ¯ä¸€æ¬¡mergeéƒ½ä¼šæœ‰næ¬¡æ“ä½œ.  â˜…å¹¶ä¸”å½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦ååˆ†ç¨³å®š, ä¸ç®¡ä»€ä¹ˆæƒ…å†µä¸‹éƒ½ä¼šè¿›è¡Œç›¸åº”çš„æ“ä½œ, æœ€å¥½æœ€åéƒ½æ˜¯O(nlogn)

**ç©ºé—´å¤æ‚åº¦åˆ†æ**:O(n)  å½’å¹¶çš„ç©ºé—´å¤æ‚åº¦å°±æ˜¯é‚£ä¸ªä¸´æ—¶çš„æ•°ç»„(res)å’Œé€’å½’æ—¶å‹å…¥æ ˆçš„æ•°æ®å ç”¨çš„ç©ºé—´ï¼šn + lognï¼›æ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¸º: O(n)



![mergeSort](sort.assets\mergeSort.gif)



```js
/*å½’å¹¶æ’åº*/
/**
 * @param {Number[]} arr
 * @return {Number[]}
 */
const mergeSort=(arr)=>{
    const merge=(left,right)=>{
        let result=[];
        while (left.length>0&&right.length>0){
            left[0]<right[0]? result.push(left.shift()) : result.push(right.shift());
        }
        return result.concat(left,right);
    }

    /*é€’å½’è¿›è¡Œæ‹†åˆ†,ç„¶åè¿”å›æ—¶è¿›è¡Œmerge*/
    const sort=(arr)=>{
        if (arr.length<=1){  //å°äºçš„æƒ…å†µä¹Ÿè¦è€ƒè™‘è¿›å»!!!
            return arr;
        }
        let mid=Math.floor(arr.length/2);
        return merge(sort(arr.slice(0,mid)),sort(arr.slice(mid)))
    }

    return sort(arr);
}
```

â—â—â—æ³¨æ„ä¸è¦å†™ (arr.length-1)/2 å› ä¸ºè¿™æ ·çš„è¯å¦‚æœæœ€ååªå‰©ä¸‹ä¸¤ä¸ªæ•°, slice(0,0)è¿”å›çš„æ˜¯[] , è€Œ slice(0)è¿”å›çš„æ˜¯[a,b] è¿™æ ·ä¼šæ°¸è¿œé€’å½’ä¸‹å»ğŸ’£

(arr.length-1)/2å–å¾—æ˜¯ä¸­ä½æ•°ä¸­è¾ƒå°çš„é‚£ä¸€ä¸ª, è€Œslice [ ) å·¦å¼€å³é—­



### å †æ’åº

**åŸºæœ¬æ€æƒ³**:å †æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå°†å¾…æ’åºåºåˆ—æ„é€ æˆä¸€ä¸ªå¤§é¡¶å †ï¼Œæ­¤æ—¶ï¼Œæ•´ä¸ªåºåˆ—çš„æœ€å¤§å€¼å°±æ˜¯å †é¡¶çš„æ ¹èŠ‚ç‚¹ã€‚å°†å…¶ä¸æœ«å°¾å…ƒç´ è¿›è¡Œäº¤æ¢ï¼Œæ­¤æ—¶æœ«å°¾å°±ä¸ºæœ€å¤§å€¼ã€‚ç„¶åå°†å‰©ä½™n-1ä¸ªå…ƒç´ é‡æ–°æ„é€ æˆä¸€ä¸ªå †ï¼Œè¿™æ ·ä¼šå¾—åˆ°nä¸ªå…ƒç´ çš„æ¬¡å°å€¼ã€‚å¦‚æ­¤åå¤æ‰§è¡Œï¼Œä¾¿èƒ½å¾—åˆ°ä¸€ä¸ªæœ‰åºåºåˆ—äº†



å…³äºå †çš„è¯¦ç»†ä»‹ç»: ğŸ‘‰  [å †](https://www.cnblogs.com/chengxiao/p/6129630.html)

- å †æ˜¯ä¸€ä¸ª**å®Œå…¨äºŒå‰æ ‘ã€‚**

- å®Œå…¨äºŒå‰æ ‘ï¼š äºŒå‰æ ‘é™¤å¼€æœ€åä¸€å±‚ï¼Œå…¶ä»–å±‚ç»“ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§ï¼Œæœ€åä¸€å±‚çš„æ‰€æœ‰ç»“ç‚¹éƒ½é›†ä¸­åœ¨å·¦è¾¹ï¼ˆå·¦è¾¹ç»“ç‚¹æ’åˆ—æ»¡çš„æƒ…å†µä¸‹ï¼Œå³è¾¹æ‰èƒ½ç¼ºå¤±ç»“ç‚¹ï¼‰ã€‚

- **å †**

  ã€€ã€€**å †æ˜¯å…·æœ‰ä»¥ä¸‹æ€§è´¨çš„å®Œå…¨äºŒå‰æ ‘ï¼šæ¯ä¸ªç»“ç‚¹çš„å€¼éƒ½å¤§äºæˆ–ç­‰äºå…¶å·¦å³å­©å­ç»“ç‚¹çš„å€¼ï¼Œç§°ä¸ºå¤§é¡¶å †ï¼›æˆ–è€…æ¯ä¸ªç»“ç‚¹çš„å€¼éƒ½å°äºæˆ–ç­‰äºå…¶å·¦å³å­©å­ç»“ç‚¹çš„å€¼ï¼Œç§°ä¸ºå°é¡¶å †ã€‚å¦‚ä¸‹å›¾ï¼š**

  ![image-20210202105248316](sort.assets/image-20210202105248316.png)

  åŒæ—¶ï¼Œæˆ‘ä»¬å¯¹å †ä¸­çš„ç»“ç‚¹æŒ‰å±‚è¿›è¡Œç¼–å·ï¼Œå°†è¿™ç§é€»è¾‘ç»“æ„æ˜ å°„åˆ°æ•°ç»„ä¸­å°±æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­

  ![image-20210202105315674](sort.assets/image-20210202105315674.png)

  è¯¥æ•°ç»„ä»é€»è¾‘ä¸Šè®²å°±æ˜¯ä¸€ä¸ªå †ç»“æ„ï¼Œæˆ‘ä»¬ç”¨ç®€å•çš„å…¬å¼æ¥æè¿°ä¸€ä¸‹å †çš„å®šä¹‰å°±æ˜¯ï¼š

  **å¤§é¡¶å †ï¼šarr[i] >= arr[2i+1] && arr[i] >= arr[2i+2]**  

  **å°é¡¶å †ï¼šarr[i] <= arr[2i+1] && arr[i] <= arr[2i+2]**  



**ç®—æ³•æ­¥éª¤:**

1. **å°†æ— åºåºåˆ—æ„å»ºæˆä¸€ä¸ªå †ï¼Œæ ¹æ®å‡åºé™åºéœ€æ±‚é€‰æ‹©å¤§é¡¶å †æˆ–å°é¡¶å †;**
2. **å°†å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ äº¤æ¢ï¼Œå°†æœ€å¤§å…ƒç´ "æ²‰"åˆ°æ•°ç»„æœ«ç«¯;**
3. **é‡æ–°è°ƒæ•´ç»“æ„ï¼Œä½¿å…¶æ»¡è¶³å †å®šä¹‰ï¼Œç„¶åç»§ç»­äº¤æ¢å †é¡¶å…ƒç´ ä¸å½“å‰æœ«å°¾å…ƒç´ ï¼Œåå¤æ‰§è¡Œè°ƒæ•´+äº¤æ¢æ­¥éª¤ï¼Œç›´åˆ°æ•´ä¸ªåºåˆ—æœ‰åºã€‚**

![heapSort](sort.assets\heapSort.gif)

**æ—¶é—´å¤æ‚åº¦**:O(nlogn)      ç©ºé—´å¤æ‚åº¦:O(1)

**åˆå§‹åŒ–å †çš„æ—¶é—´å¤æ‚åº¦åˆ†æ**

åˆå§‹åŒ–å †çš„æ—¶å€™ï¼Œå¯¹äºæ¯ä¸ªéå¶å­ç»“ç‚¹ï¼Œéƒ½è¦è°ƒç”¨ä¸Šè¿°å‡½æ•°ï¼Œå°†å®ƒä¸å®ƒçš„å­©å­ç»“ç‚¹è¿›è¡Œæ¯”è¾ƒå’Œäº¤æ¢ï¼Œé¡ºåºæ˜¯ä»åå‘å‰ã€‚

ä»¥æ“ä½œ2ä½œä¸ºåŸºæœ¬æ“ä½œï¼Œå¯¹æ¯ä¸€å±‚éƒ½å®Œå…¨é“ºæ»¡çš„å †è¿›è¡Œåˆ†æï¼Œ

è®¾å…ƒç´ ä¸ªæ•°ä¸ºnï¼Œåˆ™å †çš„é«˜åº¦k=logï¼ˆn+1ï¼‰â‰ˆlog nï¼Œéå¶å­ç»“ç‚¹çš„ä¸ªæ•°ä¸º2^ï¼ˆk-1ï¼‰-1

å‡è®¾æ¯ä¸ªéå¶å­ç»“ç‚¹éƒ½éœ€è¦è¿›è¡Œè°ƒæ•´ï¼Œåˆ™ç¬¬iå±‚çš„éå¶å­ç»“ç‚¹éœ€è¦çš„æ“ä½œæ¬¡æ•°ä¸ºk-iï¼Œ

ç¬¬iå±‚å…±æœ‰2^ï¼ˆi-1ï¼‰ä¸ªç»“ç‚¹ï¼Œåˆ™ç¬¬iå±‚çš„æ‰€æœ‰ç»“ç‚¹æ‰€åšçš„æ“ä½œä¸ºk*2^ï¼ˆi-1ï¼‰- i*2^ï¼ˆi-1ï¼‰ï¼Œ

å…±k-1å±‚éå¶å­ç»“ç‚¹ï¼Œæ€»çš„æ“ä½œæ¬¡æ•°ä¸º 

ã€€ã€€ã€€ã€€![image-20210202105351813](sort.assets/image-20210202105351813.png)

åŒ–ç®€å¯å¾—ï¼Œä¸Šå¼=2^k-k+1ï¼Œå°†k=logï¼ˆn+1ï¼‰â‰ˆlog nä»£å…¥ï¼Œå¾—n - log n +1ï¼Œ

æ‰€ä»¥ï¼Œåˆå§‹åŒ–å †çš„å¤æ‚åº¦ä¸ºO(n)

**è°ƒæ•´å †çš„æ—¶é—´å¤æ‚åº¦åˆ†æ**

è°ƒæ•´å †çš„å¤æ‚åº¦è®¡ç®—å’Œåˆå§‹åŒ–å †å·®ä¸å¤šï¼Œ

å‡è®¾æ ¹èŠ‚ç‚¹å’Œæ’åœ¨æœ€åçš„åºå·ä¸ºmçš„å¶å­ç»“ç‚¹äº¤æ¢ï¼Œå¹¶è¿›è¡Œè°ƒæ•´ï¼Œé‚£ä¹ˆè°ƒæ•´çš„æ“ä½œæ¬¡æ•° = åŸæ¥mç»“ç‚¹æ‰€åœ¨çš„å±‚æ•° = å †çš„é«˜åº¦ï¼ˆå› ä¸ºmç»“ç‚¹åœ¨å †çš„æœ€åï¼‰= log m

å…±nä¸ªç»“ç‚¹ï¼Œè°ƒæ•´çš„æ€»æ“ä½œæ¬¡æ•°ä¸º

ã€€ã€€ã€€ã€€ã€€<img src="sort.assets/image-20210202105413436.png" alt="image-20210202105413436" style="zoom:67%;" />

 

åŒ–ç®€å¯å¾—ï¼Œä¸Šå¼=log (n-1)! â‰ˆ n*log n

 æ‰€ä»¥ï¼Œè°ƒæ•´å †çš„å¤æ‚åº¦ä¸ºO(n*log n)

 

â˜…å› æ­¤,æ€»ä½“å¤æ‚åº¦ä¸º**O(n*log n)**   (ä»¥è°ƒæ•´å †çš„æ—¶é—´å¤æ‚åº¦ä¸ºä¸»)

```js
/**
 * @param {Number[]} arr
 * @return {Number[]}
 */
const heapSort=(arr)=>{
    /*æ„é€ å½“å‰ç»“ç‚¹iä¸‹çš„å¤§é¡¶å †*/
    const maxHeap=(i,len)=>{
        /*1. 2*i+1æ˜¯içš„å·¦å­æ ‘çš„ç´¢å¼•;
         *2. lençš„å­˜åœ¨æ˜¯å› ä¸ºæ¯æ‰¾åˆ°ä¸€ä¸ªmaxå€¼åéƒ½ä¼šæ”¾åœ¨arræœ€åç„¶ålen-1
         *3. j=2*j+1æ˜¯å› ä¸ºè¦ä¿è¯iä¸‹é¢æ‰€æœ‰çš„ç»“ç‚¹éƒ½æ„æˆå¤§é¡¶å †*/
        for (let j=2*i+1;j<len;j=2*j+1){
            /*å¦‚æœå³å­æ ‘æ›´å¤§åˆ™æ¯”è¾ƒå½“å‰èŠ‚ç‚¹å’Œå³å­æ ‘,è€Œä¸”æˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒæœªäº¤æ¢çš„é‚£ä¸€é¢—å­æ ‘çš„æƒ…å†µ,
            å› ä¸ºåœ¨åé¢çš„æ’åºä¸­æˆ‘ä»¬æ˜¯è‡ªåº•å‘ä¸Š,å¦‚æœå½“å‰å­æ ‘çš„æ ¹èŠ‚ç‚¹æœªè¢«æ”¹å˜,åˆ™å®ƒè¿˜æ˜¯ä¸€ä¸ªå¤§é¡¶å †*/
            if (j+1<len&&arr[j]<arr[j+1]){
                j++;
            }
            if (arr[i]<arr[j]){
                [arr[i],arr[j]]=[arr[j],arr[i]];
                //â˜…è¿™é‡Œiå˜æˆjç»§ç»­å¾€ä¸‹æ¢ç´¢
                i=j;
            }
            else {
                break;
            }
        }
    }

    const sort=()=>{
        /*åˆå§‹åŒ–å¤§é¡¶å †,ä»ç¬¬ä¸€ä¸ªéå¶å­ç»“ç‚¹å¼€å§‹(iè¦èƒ½å¤Ÿç­‰äº0,å› ä¸ºæ ¹ç»“ç‚¹ä¹Ÿéœ€è¦è¿›è¡Œæ¯”è¾ƒ)*/
        for (let i=Math.floor( (arr.length-1)/2 );i>=0;i--){
            maxHeap(i,arr.length);
        }
        /*i>0æ˜¯å› ä¸ºæœ€ååªå‰©ä¸€ä¸ªæ•°æ—¶ä¸éœ€è¦åœ¨è¿›è¡Œæ¯”è¾ƒäº†*/
        for (let i=arr.length-1;i>0;i--){
            [arr[i],arr[0]]=[arr[0],arr[i]];   /*æ ¹èŠ‚ç‚¹ä¸æœ€åä¸€ä¸ªèŠ‚ç‚¹äº¤æ¢*/
            /*å› ä¸ºæœ€åä¸€ä¸ªç»“ç‚¹å·²ç»äº¤æ¢,æ‰€ä»¥arré•¿åº¦ä¼šå‡ä¸€,è¿™é‡Œåˆšå¥½å°±æ˜¯i*/
            maxHeap(0,i);
        }
    }

    sort();
    return arr;
}
```

step1: ä»¥ç´¢å¼• i(æ ¹èŠ‚ç‚¹) , é•¿åº¦ lenä¸ºå‚æ•°å†™å»ºç«‹å¤§é¡¶å †çš„å‡½æ•° maxHeap(i,len)  <span style='color:brown;'>Â (å®è´¨ä¸Šæ˜¯å¯¹ç´¢å¼•åœ¨iåˆ°lençš„æ•°è¿›è¡Œè°ƒæ•´)Â </span>

step2: åˆå§‹åŒ–å¤§é¡¶å † 

step3: é€šè¿‡maxHeapä¸æ–­é€‰å‡ºæå¤§çš„æ•°æ¥æ’å¥½åº



#### **å †ç»“æ„å®ç°**  å¤§å°é¡¶å †é€šç”¨(æ›´æ¢cmpæ–¹æ³•)

```js
const maxHeapCmp=(x,y)=>x>y;  //æœ€å¤§å †
const swap=(arr,i,j)=>([arr[i], arr[j]] = [arr[j], arr[i]]);
class Heap{
    /*é»˜è®¤æœ€å¤§å †*/
    constructor(cmp=maxHeapCmp) {
        this.container=[];
        this.cmp=cmp;
    }

    insert(data){
        const  {container,cmp}=this;
        container.push(data);
        let index=container.length-1;
        //å»ºç«‹å¤§é¡¶å †/å°é¡¶å †
        while (index) {
            let parent = Math.floor((index - 1) / 2);
            if (!cmp(container[index],container[parent])){
                return;
            }
            swap(container,index,parent);
            index=parent;
        }
    }

    extract(){
        const  {container,cmp}=this;
        if (!container.length) return null;
        swap(container,0,container.length-1);
        const res=container.pop();  //å¾—åˆ°ç»“æœ

        //è°ƒæ•´å †
        const length=container.length;
        let index=0,exchange=index*2+1;
        while (exchange<length){
            //ç”±æ¯”è¾ƒå‡½æ•°ç¡®å®šå¤§å°é¡¶å †. å¦‚æœè¿™é‡Œæ˜¯å¤§é¡¶å †,åˆ™éœ€è¦å¤§çš„,
            // æ‰€ä»¥æˆ‘ä»¬åˆ¤æ–­çš„æ˜¯å³èŠ‚ç‚¹æ˜¯å¦å¤§äºå·¦èŠ‚ç‚¹
            if (exchange+1<length && cmp(container[exchange+1],container[exchange])){
                exchange++;
            }
            if (cmp(container[exchange],container[index])){
                swap(container,exchange,index);
                index=exchange;
                exchange=exchange*2+1;
            }else {   //è¿™æ˜¯å»ºç«‹åœ¨åŸæœ¬ä¸‹é¢çš„éƒ½æ˜¯å¤§é¡¶å †çš„æƒ…å†µ,æ‰€ä»¥å¯ä»¥break
                break;
            }
        }
        return res;
    }

    top(){
        return  this.container.length? this.container[0]:null;
    }

}
```





### æ¡¶æ’åº



#### 1. æ¡¶æ’åºçš„æ€æƒ³

(1) å¾—åˆ°æ— åºæ•°ç»„çš„å–å€¼èŒƒå›´



![img](sort.assets/7789414-0b3464dce0c632a3.png)

(2) æ ¹æ®å–å€¼èŒƒå›´"åˆ›å»º"å¯¹åº”æ•°é‡çš„"æ¡¶"

![img](sort.assets/7789414-29e334ec0a069c43.png)

(3) éå†æ•°ç»„ï¼ŒæŠŠæ¯ä¸ªå…ƒç´ æ”¾åˆ°å¯¹åº”çš„"æ¡¶"ä¸­

![img](sort.assets/7789414-cc8af45f67990033.png)

(4) æŒ‰ç…§é¡ºåºéå†æ¡¶ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œä¾æ¬¡æ”¾åˆ°æ•°ç»„ä¸­ï¼Œå³å¯å®Œæˆæ•°ç»„çš„æ’åºã€‚

"æ¡¶"æ˜¯ä¸€ç§å®¹å™¨ï¼Œè¿™ä¸ªå®¹å™¨å¯ä»¥ç”¨å¤šç§æ•°æ®ç»“æ„å®ç°ï¼ŒåŒ…æ‹¬æ•°ç»„ã€é˜Ÿåˆ—æˆ–è€…æ ˆã€‚

#### 2. å¤æ‚åº¦

- **æ—¶é—´å¤æ‚åº¦**ï¼šéå†æ•°ç»„æ±‚æœ€å¤§å€¼æœ€å°å€¼ä¸ºO(n)ï¼Œéå†æ•°ç»„æ”¾å…¥"æ¡¶"ä¸­å¤æ‚åº¦ä¸ºO(n)ï¼Œéå†æ¡¶å–å‡ºæ¯ä¸ªå€¼çš„å¤æ‚åº¦ä¸ºO(n)ï¼Œæœ€ç»ˆçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(3n)ï¼Œä¹Ÿå°±æ˜¯O(n)
- **ç©ºé—´å¤æ‚åº¦**ï¼šé¢å¤–çš„ç©ºé—´å–å†³äºå…ƒç´ çš„å–å€¼èŒƒå›´ï¼Œæ€»çš„æ¥è¯´ä¸ºO(n)
- **ç¨³å®šæ€§**ï¼šæ¡¶æ’åºæ˜¯å¦ç¨³å®šå–å†³äº"æ¡¶"ç”¨ä»€ä¹ˆæ•°æ®ç»“æ„å®ç°ï¼Œå¦‚æœæ˜¯é˜Ÿåˆ—ï¼Œé‚£ä¹ˆå¯ä»¥ä¿è¯ç›¸åŒçš„å…ƒç´ "å–å‡ºå»"åçš„ç›¸å¯¹ä½ç½®ä¸"æ”¾è¿›æ¥"ä¹‹å‰æ˜¯ç›¸åŒçš„ï¼Œå³æ’åºæ˜¯ç¨³å®šçš„ï¼Œè€Œå¦‚æœç”¨æ ˆæ¥å®ç°"æ¡¶"ï¼Œåˆ™æ’åºä¸€å®šæ˜¯ä¸ç¨³å®šçš„ï¼Œå› ä¸ºæ¡¶æ’åºå¯ä»¥åšåˆ°ç¨³å®šï¼Œæ‰€ä»¥æ¡¶æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•



















 

 

 





















