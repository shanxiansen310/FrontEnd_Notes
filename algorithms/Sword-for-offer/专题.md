## é“¾è¡¨



#### LRUç®—æ³•

Least Recently Used

[146. LRU ç¼“å­˜æœºåˆ¶](https://leetcode-cn.com/problems/lru-cache/)

éš¾åº¦ä¸­ç­‰

è¿ç”¨ä½ æ‰€æŒæ¡çš„æ•°æ®ç»“æ„ï¼Œè®¾è®¡å’Œå®ç°ä¸€ä¸ª [LRU (æœ€è¿‘æœ€å°‘ä½¿ç”¨) ç¼“å­˜æœºåˆ¶](https://baike.baidu.com/item/LRU) ã€‚

å®ç° `LRUCache` ç±»ï¼š

- `LRUCache(int capacity)` ä»¥æ­£æ•´æ•°ä½œä¸ºå®¹é‡ `capacity` åˆå§‹åŒ– LRU ç¼“å­˜
- `int get(int key)` å¦‚æœå…³é”®å­— `key` å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œåˆ™è¿”å›å…³é”®å­—çš„å€¼ï¼Œå¦åˆ™è¿”å› `-1` ã€‚
- `void put(int key, int value)` å¦‚æœå…³é”®å­—å·²ç»å­˜åœ¨ï¼Œåˆ™å˜æ›´å…¶æ•°æ®å€¼ï¼›å¦‚æœå…³é”®å­—ä¸å­˜åœ¨ï¼Œåˆ™æ’å…¥è¯¥ç»„ã€Œå…³é”®å­—-å€¼ã€ã€‚å½“ç¼“å­˜å®¹é‡è¾¾åˆ°ä¸Šé™æ—¶ï¼Œå®ƒåº”è¯¥åœ¨å†™å…¥æ–°æ•°æ®ä¹‹å‰åˆ é™¤æœ€ä¹…æœªä½¿ç”¨çš„æ•°æ®å€¼ï¼Œä»è€Œä¸ºæ–°çš„æ•°æ®å€¼ç•™å‡ºç©ºé—´ã€‚

 

**è¿›é˜¶**ï¼šä½ æ˜¯å¦å¯ä»¥åœ¨ `O(1)` æ—¶é—´å¤æ‚åº¦å†…å®Œæˆè¿™ä¸¤ç§æ“ä½œï¼Ÿ

 

**ç¤ºä¾‹ï¼š**

```js
è¾“å…¥
["LRUCache", "put", "put", "get", "put", "get", "put", "get", "get", "get"]
[[2], [1, 1], [2, 2], [1], [3, 3], [2], [4, 4], [1], [3], [4]]
è¾“å‡º
[null, null, null, 1, null, -1, null, -1, 3, 4]

è§£é‡Š
LRUCache lRUCache = new LRUCache(2);
lRUCache.put(1, 1); // ç¼“å­˜æ˜¯ {1=1}
lRUCache.put(2, 2); // ç¼“å­˜æ˜¯ {1=1, 2=2}
lRUCache.get(1);    // è¿”å› 1
lRUCache.put(3, 3); // è¯¥æ“ä½œä¼šä½¿å¾—å…³é”®å­— 2 ä½œåºŸï¼Œç¼“å­˜æ˜¯ {1=1, 3=3}
lRUCache.get(2);    // è¿”å› -1 (æœªæ‰¾åˆ°)
lRUCache.put(4, 4); // è¯¥æ“ä½œä¼šä½¿å¾—å…³é”®å­— 1 ä½œåºŸï¼Œç¼“å­˜æ˜¯ {4=4, 3=3}
lRUCache.get(1);    // è¿”å› -1 (æœªæ‰¾åˆ°)
lRUCache.get(3);    // è¿”å› 3
lRUCache.get(4);    // è¿”å› 4
```

 

**æç¤ºï¼š**

- `1 <= capacity <= 3000`
- `0 <= key <= 3000`
- `0 <= value <= 104`
- æœ€å¤šè°ƒç”¨ `3 * 104` æ¬¡ `get` å’Œ `put`



ç»™ä¸€ä¸ªåŸå§‹æ¨¡æ¿:

```js
/**
 * @param {number} capacity
 */
var LRUCache = function(capacity) {

};

/** 
 * @param {number} key
 * @return {number}
 */
LRUCache.prototype.get = function(key) {

};

/** 
 * @param {number} key 
 * @param {number} value
 * @return {void}
 */
LRUCache.prototype.put = function(key, value) {

};

/**
 * Your LRUCache object will be instantiated and called as such:
 * var obj = new LRUCache(capacity)
 * var param_1 = obj.get(key)
 * obj.put(key,value)
 */
```



**â–¼ç»å…¸çš„LRUç®—æ³•:** 

1. get() æ•°æ®è¢«è®¿é—®æ—¶ï¼Œä½ç½®éœ€è¦åˆ·æ–°ï¼ŒmoveToHead

2. put() å†™å…¥æ•°æ®æ—¶æœ‰ä¸¤ç§æƒ…å†µï¼š

   1. ä¹‹å‰æœ‰è¯¥æ•°æ®ï¼Œæ›´æ–°æ•°æ®ï¼Œåˆ·æ–°ä½ç½®, ç§»åŠ¨åˆ°å¤´éƒ¨
   2. ä¹‹å‰æ²¡æœ‰è¯¥æ•°æ®ï¼š
      1. LRUCacheæœªæ»¡åˆ™ç›´æ¥å†™å…¥å¹¶æ”¾åœ¨å¤´éƒ¨
      2. LRUCacheå·²æ»¡åˆ™å…ˆåˆ é™¤æœ€ä¹…æœªä½¿ç”¨çš„æ¡ç›®ï¼Œç„¶åå†å†™å…¥æ•°æ®å¹¶ç§»åŠ¨åˆ°å¤´éƒ¨

   <img src="ä¸“é¢˜.assets/put.jpg" alt="img" style="zoom:50%;" />





**â–¼å¦‚ä½•éƒ½åœ¨ $O(1)$ çš„æ—¶é—´å¤æ‚åº¦å†…å®ç°ï¼Ÿ**

1. get() æŸ¥æ‰¾æ“ä½œéœ€è¦åœ¨O(1), é‚£ä¹ˆåªæœ‰hashè¡¨ã€‚ä½†æ˜¯è®¿é—®åéœ€è¦æ›´æ–°ä½ç½®å¹¶ç§»åŠ¨åˆ°é¡¶éƒ¨, å¯æ˜¯hashè¡¨æ˜¯æ— åºçš„ï¼æˆ‘ä»¬æ²¡åŠæ³•åªé€šè¿‡hashè¡¨æ¥åˆ¤æ–­least recently usedï¼<span style="font-weight:bold; color:red;">hashè¡¨ç”¨äºå¿«é€Ÿæœç´¢å…ƒç´ </span>
2. å› æ­¤æˆ‘ä»¬è¿˜éœ€è¦é“¾è¡¨é“¾è¡¨æœ‰å…ˆåé¡ºåºï¼Œè€Œä¸”æ’å…¥ï¼Œåˆ é™¤æ“ä½œéƒ½å¯ä»¥åœ¨O(1)çš„æ—¶é—´å¤æ‚åº¦å†…å®ç°(æ•°ç»„çš„è¯éƒ½æ˜¯O(n)) ! åªä¸è¿‡è¿™é‡Œéœ€è¦è®¾ç½®æˆåŒå‘é“¾è¡¨, å› ä¸ºå•å‘é“¾è¡¨æ— æ³•è®¿é—®å‰é©±èŠ‚ç‚¹
3. æˆ‘ä»¬éœ€è¦åˆ·æ–°ä½ç½®æ—¶ç›´æ¥åœ¨å¤´éƒ¨æ’å…¥,  åˆ é™¤å…ƒç´ æ—¶éœ€è¦ä»å°¾éƒ¨åˆ é™¤ã€‚å› æ­¤æˆ‘ä»¬åœ¨å¤´éƒ¨å’Œå°¾éƒ¨éƒ½è®¾ç½®ä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹æ–¹ä¾¿æ“ä½œï¼Œå¹¶ä¸”è®°ä½åœ¨åˆå§‹æ—¶å°†è™šæ‹ŸèŠ‚ç‚¹è”ç³»èµ·æ¥ï¼

<img src="ä¸“é¢˜.assets/4.jpg" alt="HashLinkedList" style="zoom:60%;" />





moveToHead =>  removeFromList + addToHead

##### åŸºç¡€ç‰ˆæœ¬

```js
/*å®šä¹‰é“¾è¡¨èŠ‚ç‚¹*/
class ListNode {
  constructor(key, value) {
    this.key = key;
    this.value = value;
    this.next = null;
    this.prev = null;
  }
}

/*å®šä¹‰LRUCache*/
class LRUCache {
  constructor(capacity) {
    this.capacity = capacity;  // ç¼“å­˜çš„å®¹é‡
    this.hash = {};            // å“ˆå¸Œè¡¨
    this.count = 0;            // ç¼“å­˜æ•°ç›®
    this.dummyHead = new ListNode(); // è™šæ‹Ÿå¤´ç»“ç‚¹
    this.dummyTail = new ListNode(); // è™šæ‹Ÿå°¾èŠ‚ç‚¹
    this.dummyHead.next = this.dummyTail;
    this.dummyTail.prev = this.dummyHead; // ç›¸è”ç³»
  }

  get(key) {
    let node = this.hash[key];
    if (node == null) return -1;
    this.moveToHead(node);   //è¢«è®¿é—®äº†ç§»åˆ°é“¾è¡¨å¤´éƒ¨
    return node.value;
  }

  put(key,value){
    let node=this.hash[key];   //ä»hashè¡¨ä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨key
    if (node==null){           //ä¸å­˜åœ¨åˆ™éœ€è¦æ·»åŠ æ–°æ•°æ®
      if (this.count===this.capacity){
        this.removeLRUItem();
      }
      let newNode=new ListNode(key,value);
      this.hash[key]=newNode;
      this.addToHead(newNode);
      this.count++;
    }else {
      node.value=value;
      this.moveToHead(node);
    }
  }

  moveToHead(node){
    this.removeFromList(node);
    this.addToHead(node);
  }

  removeFromList(node){
    const prev=node.prev;
    const next=node.next;
    prev.next=next;
    next.prev=prev;
  }

  addToHead(node){
    node.prev=this.dummyHead;
    node.next=this.dummyHead.next;
    this.dummyHead.next.prev=node;
    this.dummyHead.next=node;
  }

  removeLRUItem(){
    const tail=this.popTail(); //å¾—åˆ°æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„èŠ‚ç‚¹å³å°¾èŠ‚ç‚¹
    delete this.hash[tail.key]; //åˆ é™¤hashè¡¨ä¸­å¯¹åº”çš„é”®å€¼å¯¹
    this.count--;
  }

  popTail(){
    const tail=this.dummyTail.prev;
    this.removeFromList(tail);
    return tail;
  }
}
```

 <img src="ä¸“é¢˜.assets/image-20210607141656002.png" alt="image-20210607141656002" style="zoom:67%;" />

â—ğŸ’£

1. åˆ¤æ–­èŠ‚ç‚¹åœ¨hashè¡¨ä¸­æ˜¯å¦å­˜åœ¨é‡‡ç”¨ node==nullï¼Œ ä¸è¦å†™æˆ\=\=\=, å› ä¸ºè¿™é‡Œä¸å­˜åœ¨æ˜¾ç¤ºçš„å®é™…ä¸Šæ—¶undefinedã€‚
2. åˆ é™¤çš„æ—¶å€™è¦ `åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹` è¿˜è¦ `åˆ é™¤hashè¡¨ä¸­å¯¹åº”çš„é”®å€¼å¯¹`



æˆ‘ä¹Ÿå°è¯•ä½¿ç”¨äº†jsä¸­çš„mapæ¥æ”¹å†™ï¼Œ ä½†æ˜¯æ—¶ç©ºå¤æ‚åº¦è¿œè¿œé«˜äºObject  (ä¸è¿‡æˆ‘å‘ç°å¯èƒ½æ˜¯leetcodeåˆ¤é¢˜ç³»ç»ŸæŠ½é£äº†!!!) 

##### mapç‰ˆ

```js
class ListNode{  //åŒå‘é“¾è¡¨
  constructor(key,value) {
    this.key=key;
    this.value=value;
    this.next=null;
    this.prev=null;
  }
}

class LRUCache{
  constructor(capacity) {
    this.capacity=capacity;
    this.count=0;
    this.hash=new Map();    //{key,node}çš„å½¢å¼, è¿™é‡Œçš„å€¼æ˜¯node
    this.dummyHead=new ListNode()
    this.dummyTail=new ListNode()
    this.dummyHead.next=this.dummyTail;  //åŒå‘é“¾è¡¨åˆå§‹åŒ–
    this.dummyTail.prev=this.dummyHead;
  }

  get(key){
    if (!this.hash.has(key)) return -1;
    const node=this.hash.get(key);
    this.moveToHead(node);
    return node.value;
  }

  put(key,value){
    if (this.hash.has(key)){
      const node=this.hash.get(key);
      node.value=value;
      this.moveToHead(node);
    }else {
      if (this.count===this.capacity){
        this.removeLRUItem();
      }
      const newNode=new ListNode(key,value);
      this.hash.set(key,newNode);
      this.addToHead(newNode);
      this.count++;
    }
  }


  moveToHead(node){
    this.removeFromList(node);
    this.addToHead(node);
  }

  removeFromList(node){
    const prev=node.prev;
    const next=node.next;
    prev.next=next;
    next.prev=prev;
  }

  addToHead(node){
    node.prev=this.dummyHead;
    node.next=this.dummyHead.next;
    this.dummyHead.next.prev=node;
    this.dummyHead.next=node;
  }

  removeLRUItem(){
    const tail=this.dummyTail.prev;
    this.removeFromList(tail);   //ä»é“¾è¡¨åˆ é™¤
    this.hash.delete(tail.key);  //ä»hashè¡¨åˆ é™¤
    this.count--;
  }

}
```



##### TSç²¾ç®€ç‰ˆ

1.å¯¹äºæ‰€æœ‰çš„countå’Œhashæ“ä½œéƒ½ä¸‹æ”¾åˆ°äº†å…·ä½“çš„å‡½æ•°ä¸­ï¼

2.å–æ¶ˆäº†poptailå‡½æ•°

```ts
// åŒå‘é“¾è¡¨ç»“ç‚¹
class LinkNode {
  key: number
  value: number
  next: LinkNode | null
  prev: LinkNode | null

  constructor(key?: number, value?: number) {
    this.key = key
    this.value = value
    this.next = null
    this.prev = null
  }
}

interface hashMap {
  [key: number]: LinkNode
}

class LRUCache {
  capacity: number
  hash: hashMap
  count: number
  dummyHead: LinkNode
  dummyTail: LinkNode

  constructor(capacity) {
    this.capacity = capacity
    this.hash = {}  // æ ¹æ®keyå­˜å‚¨çš„ListNode
    this.count = 0
    this.dummyHead = new LinkNode()
    this.dummyTail = new LinkNode()
    this.dummyHead.next = this.dummyTail
    this.dummyTail.prev = this.dummyHead
  }

  get(key: number) {
    if (!this.hash[key]) {
      return -1;
    } else {
      const node = this.hash[key];
      this.moveToHead(node);
      return node.value;
    }
  }

  put(key: number, value: number) {
    const node=this.hash[key];
    if (node){
      node.value=value;
      this.moveToHead(node);
    }else {
      if (this.count===this.capacity){
        this.removeLRUItem();
      }
      const newNode=new LinkNode(key, value);
      this.hash[key]=newNode;
      this.addToHead(newNode);
    }
  }

  moveToHead(node: LinkNode) {
    this.removeFromList(node);
    this.addToHead(node);
  }

  removeFromList(node: LinkNode) {
    const prev = node.prev;
    const next = node.next;
    prev.next = next;
    next.prev = prev;
    this.count--;
  }

  addToHead(node: LinkNode) {
    node.prev = this.dummyHead;
    node.next = this.dummyHead.next;
    this.dummyHead.next.prev = node;
    this.dummyHead.next = node;
    this.count++;
  }

  removeLRUItem(){
    const tail=this.dummyTail.prev;
    delete this.hash[tail.key];
    this.removeFromList(tail);  //è¿™é‡Œå·²ç»è¿›è¡Œcountå‡ä¸€äº†
  }

}
```



## èŒƒå›´è¦†ç›–

#### [â˜…â˜…45. è·³è·ƒæ¸¸æˆ II](https://leetcode-cn.com/problems/jump-game-ii/)

éš¾åº¦ä¸­ç­‰

ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ï¼Œä½ æœ€åˆä½äºæ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚

æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä½ åœ¨è¯¥ä½ç½®å¯ä»¥è·³è·ƒçš„æœ€å¤§é•¿åº¦ã€‚

ä½ çš„ç›®æ ‡æ˜¯ä½¿ç”¨æœ€å°‘çš„è·³è·ƒæ¬¡æ•°åˆ°è¾¾æ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®ã€‚

**ç¤ºä¾‹:**

è¾“å…¥: [2,3,1,1,4]
è¾“å‡º: 2
è§£é‡Š: è·³åˆ°æœ€åä¸€ä¸ªä½ç½®çš„æœ€å°è·³è·ƒæ•°æ˜¯ 2ã€‚
     ä»ä¸‹æ ‡ä¸º 0 è·³åˆ°ä¸‹æ ‡ä¸º 1 çš„ä½ç½®ï¼Œè·³ 1 æ­¥ï¼Œç„¶åè·³ 3 æ­¥åˆ°è¾¾æ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®ã€‚

**è¯´æ˜:**

å‡è®¾ä½ æ€»æ˜¯å¯ä»¥åˆ°è¾¾æ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®ã€‚



**ğŸŒŸè´ªå¿ƒç®—æ³•, æ¯æ¬¡ä»å¯ä»¥åˆ°è¾¾çš„èŒƒå›´è®¡ç®—ä¸‹æ¬¡èƒ½åˆ°è¾¾çš„èŒƒå›´,è¿›è¡Œéå†!!!**

**æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œ** æˆ‘è¿™ä¸ªæ–¹æ³•å’Œå®˜ç½‘é‚£ä¸ªä¸ä¸€æ ·, è¿˜æ˜¯ $O(n)$ â—

**ç©ºé—´å¤æ‚åº¦ï¼š**$O(1)$

```js
/**
 * @param {number[]} nums
 * @return {number}
 */
const jump = function(nums) {
    if(nums.length<=1) return 0;
    let len=nums.length;
    let start=0,curMax=0,count=0;

    while(true){
        //æ¯æ¬¡å¾ªç¯æ‰¾å‡ºå½“å‰èƒ½è·³è·ƒåˆ°çš„æœ€å¤§ä½ç½®
        count++;
        let tmp=curMax;  //ä¿ç•™è¿™ä¸ªå€¼,æ–¹ä¾¿startæœ€åèµ‹å€¼
        //â˜…æ³¨æ„è¿™é‡Œåƒä¸‡ä¸è¦å†™i<=curMax, curMaxåœ¨å˜åŒ–!!!
        for(let i=start;i<=tmp;i++){
            curMax=Math.max(curMax,i+nums[i]);
        }
        if(curMax>=len-1) break;
        start=(++tmp);  //ä¸‹ä¸€æ¬¡å¼€å§‹çš„ä½ç½®
    }
    return count;
};
```

ğŸŒŸä¸€å¼€å§‹æ˜¯ä»0å¼€å§‹çš„, è¿˜æ²¡å¼€å§‹è·³,  å› æ­¤startå’ŒcurMaxéƒ½æ˜¯0, æ ¹æ®åˆå§‹ä½ç½®çš„å€¼æ¥ç¡®å®šèƒ½è·³è·ƒçš„æœ€å¤§è·ç¦»!  ä» <span style="color:blue;">count++</span> å¼€å§‹å…¶å®å¯ä»¥å½“ä½œå·²ç»è·³äº†, åé¢çš„åªæ˜¯åœ¨ç¡®å®šæœ€è¿œèƒ½è·³åˆ°å“ª! 

â—<span style="font-weight:bold; color:red;">æ¯æ¬¡ä¹Ÿåªæ˜¯ç¡®å®šæœ€è¿œè·³åˆ°çš„ä½ç½®, å¹¶æ²¡æœ‰ç¡®å®šæœ¬æ¬¡è·³åˆ°å“ªä¸ªä½ç½®å“¦</span>! å¦‚æœç›´æ¥è·³åˆ°æœ€è¿œçš„ä½ç½®, é‚£ä¹ˆå°±ä¼šå…·æœ‰å±€é™, æ¯”å¦‚è¿™é‡Œ 2 3 1 1 4, ç›´æ¥è·³åˆ°ä½ç½®2, ä¼šæ¯”è·³åˆ°ä½ç½®1æœ€åå¤šè·³ä¸€æ¬¡! **æˆ‘ä»¬é‡‡ç”¨çš„æ˜¯å…¨éƒ½è®¡ç®—, ä¸ç”¨ç¡®å®šè·³åˆ°å“ªä¸ªä½ç½®,åªéœ€è¦è®°å½•è·³å¤šå°‘æ¬¡å¯ä»¥è·³å®Œ!**



plus: è¿™é‡Œæœ‰ä¸ªåµŒå¥—å¾ªç¯, é‡‡ç”¨ä¸€ä¸‹æ ‡ç­¾è¯­å¥æ¥å®ç°breakè·³å‡º!

```js
const jump = function(nums){
	if(nums.length<=1) return 0;

	const len=nums.length;
	let start=0,count=0,curMax=0;

	loop: while (true){
		count++;
		let nextLoc=curMax+1;
		for (let i = start; i < nextLoc; i++) {
			curMax=Math.max(curMax,i+nums[i]);
			if (curMax>=len-1) break loop;
		}
		start=nextLoc;
	}
	return count;
}
```





**ğŸš©åªç”¨ä¸€ä¸ªforå¾ªç¯çš„ç²¾ç®€ç‰ˆ** 

ä¼˜åŒ–

ä»ä¸Šé¢ä»£ç è§‚å¯Ÿå‘ç°ï¼Œå…¶å®è¢« while åŒ…å«çš„ for å¾ªç¯ä¸­ï¼Œi æ˜¯ä»å¤´è·‘åˆ°å°¾çš„ã€‚

åªéœ€è¦åœ¨ä¸€æ¬¡ è·³è·ƒ å®Œæˆæ—¶ï¼Œæ›´æ–°ä¸‹ä¸€æ¬¡ èƒ½è·³åˆ°æœ€è¿œçš„è·ç¦»ã€‚

å¹¶ä»¥æ­¤åˆ»ä½œä¸ºæ—¶æœºæ¥æ›´æ–° è·³è·ƒ æ¬¡æ•°ã€‚å°±å¯ä»¥åœ¨ä¸€æ¬¡ for å¾ªç¯ä¸­å¤„ç†ã€‚

â—è¿™ç§æ–¹æ³•ä¹Ÿæœ‰ç¼ºé™·,ä¸ä¸€å®šéƒ½æ˜¯è¿™æ ·å¥½  è¯¦è§ [link](#tip-greedy)

**æ—¶é—´å¤æ‚åº¦: O(n):**

**ç©ºé—´å¤æ‚åº¦: O(1)**

```js
/**
 * @param {number[]} nums
 * @return {number}
 */
var jump = function(nums) {
    if(nums.length<=1) return 0;
    let len=nums.length;
    //maxPosè¡¨ç¤ºå½“å‰ièƒ½å¤Ÿåˆ°è¾¾çš„æœ€å¤§è·ç¦»
    //endè¡¨ç¤ºä¸Šä¸€è½®è·³è·ƒèƒ½å¤Ÿåˆ°è¾¾çš„æœ€å¤§è·ç¦»
    let maxPos=0,end=0,count=0;

    for(let i=0;i<len;i++){
        maxPos=Math.max(maxPos,i+nums[i]);
        //å¦‚æœåˆ°è¾¾äº†ä¸Šè½®çš„æœ€å¤§ä½ç½®å¤„,åˆ™è¦å†è¿›è¡Œä¸€æ¬¡è·³è·ƒ
        //è€Œæˆ‘ä»¬ä¹Ÿå·²ç»ç”¨maxPosè®°å½•äº†ä¸Šä¸€è½®èƒ½åˆ°è¾¾çš„æœ€å¤§ä½ç½®
        //å¹¶ä¸”è¦ä¿è¯endä¸èƒ½ä¸ºæœ€åçš„ä½ç½®,å› ä¸ºè¿™é‡Œcount++è¡¨ç¤ºè¦è¿›è¡Œä¸‹æ¬¡è·³è·ƒ
        if(i===end&&end!==len-1){
            end=maxPos;
            count++;
        }
    }
    return count;
};
```

**ğŸŒŸå…³é”®æ˜¯maxPosè®°å½•å½“å‰èƒ½åˆ°è¾¾çš„æœ€å¤§å€¼, è€Œendè®°å½•ä¸Šä¸€æ¬¡è·³è·ƒèƒ½åˆ°è¾¾çš„æœ€å¤§å€¼ã€‚å½“åˆ°è¾¾endæ—¶å°±è¡¨ç¤ºä¸Šæ¬¡è·³è·ƒç»“æŸï¼Œ è¿›è¡Œä¸‹æ¬¡è·³è·ƒï¼ï¼ï¼**

å…¶å®å¯ä»¥åœ¨forå¾ªç¯ä¸­åŠ ä¸Šä¸‹é¢è¿™ä¸ªåˆ¤æ–­, maxPos>=len-1å°±å·²ç»æœ€å¤§ä¸ç”¨å†éå†äº†ã€‚è€Œä¸Šé¢çš„å†™æ³•è¿˜æ˜¯ä¼šä¸€ç›´å¾ªç¯åˆ°æœ€åã€‚ è€Œä¸”è¿™æ ·è¿˜å¯ä»¥å–æ¶ˆæ‰forå¾ªç¯ä¸­çš„ endåˆ¤æ–­!

```js
const jump = function(nums){
  if(nums.length<=1) return 0;
	const len=nums.length;
	let start=0,end=0,count=0,maxPos=0;

	for (let i = 0; i < len; i++) {
		maxPos=Math.max(maxPos,i+nums[i]);
		//æ„æ€æ˜¯ä¸Šæ¬¡è·³åˆ°ä½ç½®iè¿™é‡Œ, ç„¶åå†è¿›è¡Œä¸€æ¬¡è·³è·ƒå°±è·³å®Œäº†
		if (maxPos>=len-1) { 
			count++;
			break;
		}
		if (i===end){
			count++;  //å¼€å§‹ä¸‹ä¸€æ¬¡è·³è·ƒ
			end=maxPos;
		}
	}

	return count;
}
```

â— <span style=" color:red;">ä¸è¦å¿˜äº†å¯¹ç‰¹æ®Šæƒ…å†µçš„è€ƒè™‘!</span>  



ğŸŒŸç¬¬ä¸€ç§æ–¹æ³•æ˜¯æ¯æ¬¡whileå¼€å§‹ç›´æ¥è·³ ( <span style="color:blue;">count++</span> ), ç„¶åç¡®å®šæ¡çº¦èŒƒå›´  **æ—¶é—´å¤æ‚åº¦: $O(n)$:**  ç¬¬äºŒç§æ˜¯åˆ¤æ–­æ˜¯å¦è·³åˆ°å°½å¤´, å¦‚æœæ˜¯åˆ™å¼€å§‹ä¸‹ä¸€æ¬¡è·³è·ƒ!



â–¼çœ‹åˆ°è¯„è®ºæœ‰è¯´å¯ä»¥ç›´æ¥è”æƒ³åˆ°BFSå±‚åºéå†, ä¾¿é‡‡ç”¨äº†å±‚åºéå†: ä¸è¿‡åœ¨ç©ºé—´å’Œæ—¶é—´ä¸Šè¡¨ç°ä¸æ˜¯å¤ªå¥½, ä½†è¿™å’Œä¸Šé¢æ˜¯ä¸€æ ·çš„æ€è·¯

```js
/**
 * @param {number[]} nums
 * @return {number}
 */
const jump = function(nums) {
    if(nums.length<=1) return 0;
    let len=nums.length;
    let jump=[[0,nums[0]]]; //æ•°ç»„ä¸­çš„ä½ç½®å’Œè·³è·ƒè·ç¦»

    let count=0,preMax=0;  //preMaxä»£è¡¨ä¸Šä¸€å±‚æœ€è¿œçš„ä½ç½®
    while(jump.length){
        //å–jumpä¸­çš„ä½ç½®è¿›è¡Œä¸€æ¬¡è·³è·ƒ
        count++;
        let tmp=[];
        let curMax=preMax;
        for(let i=0;i<jump.length;i++){
            let next=jump[i][0]+jump[i][1];
            curMax=Math.max(curMax,next);
        }
        if(curMax>=len-1) break;
        for(let i=preMax+1;i<=curMax;i++){
            tmp.push([i,nums[i]]);
        }
        jump=tmp;
    }
    return count;
};
```







#### [â˜…â˜…1024. è§†é¢‘æ‹¼æ¥](https://leetcode-cn.com/problems/video-stitching/)

éš¾åº¦ä¸­ç­‰

ä½ å°†ä¼šè·å¾—ä¸€ç³»åˆ—è§†é¢‘ç‰‡æ®µï¼Œè¿™äº›ç‰‡æ®µæ¥è‡ªäºä¸€é¡¹æŒç»­æ—¶é•¿ä¸º `T` ç§’çš„ä½“è‚²èµ›äº‹ã€‚è¿™äº›ç‰‡æ®µå¯èƒ½æœ‰æ‰€é‡å ï¼Œä¹Ÿå¯èƒ½é•¿åº¦ä¸ä¸€ã€‚

è§†é¢‘ç‰‡æ®µ `clips[i]` éƒ½ç”¨åŒºé—´è¿›è¡Œè¡¨ç¤ºï¼šå¼€å§‹äº `clips[i][0]` å¹¶äº `clips[i][1]` ç»“æŸã€‚æˆ‘ä»¬ç”šè‡³å¯ä»¥å¯¹è¿™äº›ç‰‡æ®µè‡ªç”±åœ°å†å‰ªè¾‘ï¼Œä¾‹å¦‚ç‰‡æ®µ `[0, 7]` å¯ä»¥å‰ªåˆ‡æˆ `[0, 1] + [1, 3] + [3, 7]` ä¸‰éƒ¨åˆ†ã€‚

æˆ‘ä»¬éœ€è¦å°†è¿™äº›ç‰‡æ®µè¿›è¡Œå†å‰ªè¾‘ï¼Œå¹¶å°†å‰ªè¾‘åçš„å†…å®¹æ‹¼æ¥æˆè¦†ç›–æ•´ä¸ªè¿åŠ¨è¿‡ç¨‹çš„ç‰‡æ®µï¼ˆ`[0, T]`ï¼‰ã€‚è¿”å›æ‰€éœ€ç‰‡æ®µçš„æœ€å°æ•°ç›®ï¼Œå¦‚æœæ— æ³•å®Œæˆè¯¥ä»»åŠ¡ï¼Œåˆ™è¿”å› `-1` ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šclips = [[0,2],[4,6],[8,10],[1,9],[1,5],[5,9]], T = 10
è¾“å‡ºï¼š3
è§£é‡Šï¼š
æˆ‘ä»¬é€‰ä¸­ [0,2], [8,10], [1,9] è¿™ä¸‰ä¸ªç‰‡æ®µã€‚
ç„¶åï¼ŒæŒ‰ä¸‹é¢çš„æ–¹æ¡ˆé‡åˆ¶æ¯”èµ›ç‰‡æ®µï¼š
å°† [1,9] å†å‰ªè¾‘ä¸º [1,2] + [2,8] + [8,9] ã€‚
ç°åœ¨æˆ‘ä»¬æ‰‹ä¸Šæœ‰ [0,2] + [2,8] + [8,10]ï¼Œè€Œè¿™äº›æ¶µç›–äº†æ•´åœºæ¯”èµ› [0, 10]ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šclips = [[0,1],[1,2]], T = 5
è¾“å‡ºï¼š-1
è§£é‡Šï¼š
æˆ‘ä»¬æ— æ³•åªç”¨ [0,1] å’Œ [1,2] è¦†ç›– [0,5] çš„æ•´ä¸ªè¿‡ç¨‹ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šclips = [[0,1],[6,8],[0,2],[5,6],[0,4],[0,3],[6,7],[1,3],[4,7],[1,4],[2,5],[2,6],[3,4],[4,5],[5,7],[6,9]], T = 9
è¾“å‡ºï¼š3
è§£é‡Šï¼š 
æˆ‘ä»¬é€‰å–ç‰‡æ®µ [0,4], [4,7] å’Œ [6,9] ã€‚
```

**ç¤ºä¾‹ 4ï¼š**

```
è¾“å…¥ï¼šclips = [[0,4],[2,8]], T = 5
è¾“å‡ºï¼š2
è§£é‡Šï¼š
æ³¨æ„ï¼Œä½ å¯èƒ½å½•åˆ¶è¶…è¿‡æ¯”èµ›ç»“æŸæ—¶é—´çš„è§†é¢‘ã€‚
```

 

**æç¤ºï¼š**

- `1 <= clips.length <= 100`
- `0 <= clips[i][0] <= clips[i][1] <= 100`
- `0 <= T <= 100`





ğŸŒŸæ€è·¯å’Œè·³è·ƒæ˜¯ä¸€æ ·çš„!!!   éå†çš„æ˜¯éœ€è¦è¦†ç›–çš„èŒƒå›´, ä¸æ˜¯ç‰‡æ®µ!!!

1. **æ ¹æ®éœ€è¦è¦†ç›–çš„åŒºé—´è¿›è¡Œéå†, è®°å½•0~iè¿›è¡Œä¸‹æ¬¡è·³è·ƒèƒ½åˆ°è¾¾çš„æœ€è¿œè·ç¦»maxPos**
2. **åˆ¤æ–­æ˜¯å¦æœ‰ç©ºç¼º, maxPos=iåˆ™è¡¨ç¤ºæ— æ³•ç»§ç»­, ä¹Ÿå°±æ˜¯æ²¡åŠæ³•å‰ªæˆå®Œæ•´çš„å½±ç‰‡**
3. **end=i è¡¨ç¤ºå·²è¾¾ä¸Šä¸€è½®èƒ½å‰ªè¾‘åˆ°çš„æœ€é•¿çš„ä½ç½®, éœ€è¦è¿›è¡Œä¸‹ä¸€ä¸ªç‰‡æ®µçš„é€‰æ‹©**



**æ—¶é—´å¤æ‚åº¦: O(n)**

**ç©ºé—´å¤æ‚åº¦: O(n)**

```js
/**
 * @param {number[][]} clips
 * @param {number} T
 * @return {number}
 */
const videoStitching = function(clips, T) {

    //ç±»ä¼¼äºæ¡¶æ’åºæˆ–è€…ä¹‹å‰ç½‘æ˜“çš„å¹¸è¿æ•°å­—,æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªä¸ºåŒºé—´é•¿åº¦çš„æ•°ç»„
    //è®°å½•å¤„äºä½ç½®locä¸Šèƒ½åˆ°è¾¾çš„æœ€è¿œçš„åœ°æ–¹
    let maxEnd=Array(T).fill(0);  //Math.maxä¸­å¦‚æœæœ‰Number()åä¸ºNaNä¼šç›´æ¥è¿”å›NaN
    //å’Œä¹‹å‰çš„è·³è·ƒæœ‰ä¸¤ä¸ªä¸åŒ 
    //1.è·³è·ƒæ¯ä¸ªä½ç½®åªæœ‰ä¸€ä¸ªæœ€è¿œè·ç¦»,è€Œè¿™é‡Œå¯èƒ½æœ‰å¤šä¸ª,å› æ­¤ç”¨ä¸€ä¸ªforæ¥å–æœ€å¤§
    //2.è·³è·ƒå¿…èƒ½è¾¾åˆ°æœ€å,ä½†è¿™é‡Œä¸ä¸€å®š, æ‰€ä»¥è¦è€ƒè™‘
    for(let i in clips){
        maxEnd[clips[i][0]]=Math.max(maxEnd[clips[i][0]],clips[i][1]);
    }

    //endè¡¨ç¤ºå½“å‰è·³è·ƒèƒ½åˆ°è¾¾çš„æœ€å¤§ä½ç½®,å› æ­¤æˆ‘ä»¬è¦åœ¨è¿™ä¸ªèŒƒå›´å†…å¯»æ‰¾maxPosçš„ç‚¹è¿›è¡Œè·³è·ƒ/å‰ªè¾‘
    //maxEnd(i)æ˜¯æŒ‡iä½ç½®èƒ½åˆ°è¾¾çš„æœ€è¿œå¤„, maxPosæ˜¯iå‰é¢æ‰€æœ‰çš„èƒ½åˆ°è¾¾çš„æœ€è¿œå¤„
    let end=0,maxPos=0,count=0; 
    //â˜…è¿™é‡Œiä¸èƒ½ç­‰äºTå“¦, å¦‚æœç­‰äºTé‚£ä¹ˆæœ€åä¼šå¤šåŠ ä¸€æ¬¡,å› ä¸ºå¯ä»¥è¾¾åˆ°Tçš„è¯ä¸åº”è¯¥åœ¨åŠ äº†
    //â˜…ä¹Ÿä¸ç”¨æ‹…å¿ƒä¸‡ä¸€åˆ°ä¸äº†T,å› ä¸ºä¼šåˆ°è¾¾T-1,T-1æ—¶ä¼šè¿›è¡Œåˆ¤æ–­èƒ½å¦ç»§ç»­
    for(let i=0;i<T;i++){
        maxPos=Math.max(maxPos,maxEnd[i]);
        //èƒ½åˆ°è¾¾çš„æœ€è¿œå¤„ç­‰äºiè¡¨ç¤ºæ— æ³•ç»§ç»­å‘ä¸‹è¿›è¡Œäº†, æ‰€ä»¥æ— æ³•å®Œæˆä»»åŠ¡
        if(i===maxPos){
            return -1;
        }
        //å·²ç»åˆ°è¾¾äº†ä¸Šæ¬¡è·³è·ƒçš„æœ€å¤§å¤„,éœ€è¦é€‰æ‹©ä¸‹æ¬¡è·³è·ƒä¸ºmaxPosçš„ç‚¹æ¥è¿›è¡Œä¸‹æ¬¡è·³è·ƒ
        if(end===i){
            count++;
            end=maxPos;
        }
    }
    return count;

};
```

å½“ç„¶è¿™é‡Œä¹Ÿå¯ä»¥æ”¹è¿›ä¸€ä¸‹, åŠ ä¸Š  <span style="color:blue;">if (maxPos>=T)</span> åˆ¤æ–­å¯ä»¥æå‰ç»“æŸ

```js
const videoStitching = function(clips, T) {
	if (T===0) return 0;
	const maxEnd=Array(T).fill(0);
	for (let i = 0; i < clips.length; i++) {
		maxEnd[clips[i][0]]=Math.max(maxEnd[clips[i][0]],clips[i][1]);
	}

	let count=0,maxPos=0,end=0;
	for (let i = 0; i < T; i++) {
		maxPos=Math.max(maxPos,maxEnd[i]);
		if (maxPos>=T) return ++count;
		if (i===maxPos) return -1;
		if (i===end){
			count++;
			end=maxPos;
		}
	}
	return count;
}
```





<span id='1024'>â–¼æŒ‰ç»™å®šçš„èŒƒå›´æ•°ç»„éå†</span>  (æœ‰sortæé«˜äº†æ—¶é—´å¤æ‚åº¦)

```js
/**
 * @param {number[][]} clips
 * @param {number} T
 * @return {number}
 */
const videoStitching = function(clips, T) {
	clips.sort((a,b)=>a[0]-b[0]);
	let [maxPos,end,count,i]=[0,0,0,0];
	//é¢˜æœ‰ç‚¹ç‰¹æ®Š, Tå¯èƒ½ä¸º0, é‚£ä¹ˆä¸€ä¸ªç‰‡æ®µéƒ½ä¸éœ€è¦
	//è€Œä¸‹é¢çš„whileé»˜è®¤å¿…é¡»è¦æœ‰ä¸€ä¸ªç‰‡æ®µ
	if(T===0) return 0;
	while(i<clips.length){
		//ä¸ç”¨æ‹…å¿ƒmaxPos>T, å› ä¸ºmaxPos>Tå½±å“çš„æ˜¯ä¸‹ä¸€è½®æ˜¯å¦jump,è€Œæœ¬è½®jumpæ˜¯æ—©å°±ç¡®å®šäº†çš„
		count++;  //è¿›è¡Œæœ¬è½®çš„è·³è·ƒ
		
    //åˆ¤æ–­æœ¬è½®è·³è·ƒæœ€å¤§ä½ç½®
		while(i<clips.length&&clips[i][0]<=end){
			maxPos=Math.max(maxPos,clips[i][1]);
			i++;
		}
		//æ­¤æ—¶åº”è¯¥clips[i][0]>end or i>=clips.length

		//maxPos>=Tè¡¨ç¤ºæ»¡è¶³æ¡ä»¶ä¸éœ€è¦è·³è·ƒäº†
		if (maxPos>=T) break;
		if (i<clips.length&&clips[i][0]>maxPos){
			return -1;
		}
		end=maxPos;
	}
	return maxPos < T ? -1:count;
};
```







è‡ªå·±çš„ç¬¨åŠæ³•....

```js
/**
 * @param {number[][]} clips
 * @param {number} T
 * @return {number}
 */
//é¢˜ç›®ä¸­å¹¶æ²¡æœ‰è¯´clips[i][0]
var videoStitching = function (clips, T) {
    //å…¶å®å°±æ˜¯è·³è·ƒé—®é¢˜,åªä¸è¿‡ä¸­é—´æœ‰äº›ç‚¹å¯èƒ½æ²¡æœ‰
    //clips[i][0]ä¸ºè·³è·ƒä½ç½®,clips[i][1]ä¸ºè·³è·ƒè·ç¦»
    clips.sort((a, b) => a[0] - b[0]);
    if (T === 0) return 0;
    if (clips[0][0] !== 0) return -1;
    let end = 0, maxPos = 0, count = 0;
    //è¿™é‡Œçš„forå¾ªç¯å®é™…ä¸Šæ˜¯ä¸€ä¸ªå·²ç»è·³è·ƒäº†çš„æƒ…å†µ,ä½†ä¸ç¡®å®šè·³è·ƒåˆ°å“ªé‡Œ
    //æˆ‘ä»¬éœ€è¦æ ¹æ®maxPosæ¥ç¡®å®šæœ€è´ªå©ªçš„è·³è·ƒé€‰æ‹©
    for (let i = 0; i < clips.length; i++) {
        while (i < clips.length - 1 && clips[i][0] === clips[i + 1][0]) {
            clips[i + 1][1] = Math.max(clips[i][1], clips[i + 1][1]);
            i++;
        }
        //åŸæœ¬æ˜¯åº”è¯¥åœ¨endå¤„æ›´æ–°,ä½†æ˜¯è¿™é‡Œçš„ç‰‡æ®µå¯èƒ½æ²¡æœ‰endä½ç½®
        if (clips[i][0] > end) {
            //å¦‚æœåœ¨ä¸Šä¸€è½®çš„æœ€å¤§ä½ç½®endå‰å‘ç°å¯ä»¥è·³åˆ°å¤§äºclips[i]çš„ä½ç½®
            //é‚£ä¹ˆå¯ä»¥åœ¨ä¸­é—´è¿›è¡Œä¾æ¬¡ç‰‡æ®µå‰ªè¾‘æ¥å¼¥è¡¥
            //â–¼æ¯”å¦‚è¯´ [0,2] [1,9] [5,9] ç¬¬ä¸€ä¸ªç‰‡æ®µåªèƒ½åˆ°è¾¾2, ä½†å…¶å¯ä»¥é€šè¿‡å…ˆè·³è·ƒåˆ°[1,9],
            //å†è·³è·ƒåˆ°[5,9]æˆ–è€…æ›´åé¢çš„ä½ç½®,å› æ­¤è¿™é‡Œå¢åŠ ä¸€æ¬¡ä»[0,2]åˆ°[1,9]çš„è·³è·ƒ
            //â—æ³¨æ„è¿™é‡Œå¹¶æ²¡æœ‰å¢åŠ [1,9]åˆ°[5,9]çš„è·³è·ƒ!!!
            if (maxPos >= clips[i][0]) {
                count++;
                //å¤„ç†åˆå§‹åŒ–é—®é¢˜,ç¬¬ä¸€æ¬¡çš„è·³è·ƒçš„æ—¶å€™endä¸èƒ½ç›´æ¥ä¸ºmaxPos,æ­¤æ—¶maxPosè¿˜æ²¡æ›´æ–°
                end = maxPos;
                //è¿™æ—¶æ˜¯ä»¥ä¹‹å‰çš„maxPosçš„ç‚¹ä½œä¸ºèµ·ç‚¹å¼€å§‹å¯»æ‰¾ä¸‹ä¸€ä¸ªæœ€å¤§çš„maxPosç‚¹äº†!
                maxPos = Math.max(maxPos, clips[i][1]);
                //maxPosåœ¨ä¹‹å‰ä¸å¯èƒ½å¤§äºç­‰äºT,ä½†æ˜¯è¿™ä¸ªæ—¶å€™clips[i][1]å´æœ‰å¯èƒ½>=T
                //å¦‚æœè¿™æ—¶å€™ä¸è€ƒè™‘è¿™ç§æƒ…å†µçš„è¯å°±ä¼šä½¿maxPos=>clips[i]=>Tå˜æˆmaxPos=>T
                if (maxPos >= T) count++;
            } else {  //å¦‚æœmaxPoså°äºclips[i][0],è¯´æ˜æ— æ³•å¡«è¡¥è¿™ä¸ªç©ºç¼º
                return -1;
            }
        }
        else if (clips[i][0] === end) {
            //åˆšå¥½ç­‰äºendçš„æƒ…å†µå°±å’Œä¹‹å‰çš„è·³è·ƒé—®é¢˜ä¸€æ¨¡ä¸€æ ·äº†!!!
            count++;
            //æ­¤æ—¶å¿…é¡»è¦åšä¸€æ¬¡è·³è·ƒ,è¦åœ¨ä¹‹å‰çš„maxPoså’Œå½“å‰çš„ä½ç½®ié€‰æ‹©æœ€å¤§çš„
            maxPos = Math.max(maxPos, clips[i][1]);
            end = maxPos;
        } else {
            maxPos = Math.max(maxPos, clips[i][1]);
            //Tç§’çš„è¿åŠ¨è¿‡ç¨‹ç‰‡æ®µ,ä½†æ˜¯clips[i][0]å’Œclips[i][1]ä¹Ÿå¯èƒ½å¤§äºT(è¾“å…¥é”™è¯¯çš„ç‰¹æ®Šæƒ…å†µ)
            if (maxPos >= T) count++;
        }
        if (maxPos >= T) break;

    }
    if (maxPos < T) return -1;
    return count;
};
```

ğŸš€**åæ€**:ä¸ºä»€ä¹ˆè‡ªå·±çš„å†™æ³•åˆè‡­åˆé•¿éœ€è¦è€ƒè™‘å„ç§æ¡ä»¶, è€Œåˆ«äººçš„å†™æ³•å¹²å‡€åˆ©è½?

â€‹	â–¼æˆ‘è§‰å¾—ä¸»è¦æ˜¯æˆ‘æ²¡æœ‰æŠ“ä½é‡ç‚¹!!!  <span style="font-weight:bold; color:red;">è¿™ç±»èŒƒå›´è¦†ç›–çš„é¢˜éœ€è¦çš„æ˜¯éå† **èŒƒå›´**</span>, ä½†æˆ‘å´ç›´æ¥æƒ³çš„æ˜¯å»éå†ç‰‡æ®µ(éœ€è¦è€ƒè™‘å¾ˆå¤šä¸å®¹æ˜“æƒ³åˆ°çš„è¾¹ç•Œæƒ…å†µ)!!!  å®Œå…¨å¿˜è®°äº†ç¬¬ä¸€æ¬¡åšè·³è·ƒæ—¶è‡ªå·±æ˜¯æ€ä¹ˆéå†çš„...  





**ğŸ˜…ğŸ˜…ğŸ˜…dpæ—¶é—´å¤æ‚åº¦é«˜, è¿˜ä¸å¥½æƒ³åˆ°!**

å½“ç„¶è´ªå¿ƒéƒ½èƒ½è½¬æ¢ä¸ºdp, dpä¹Ÿæ˜¯å¹²å‡€åˆ©è½, æ€è·¯å¦‚ä¸‹:

dp[0]=0,  å…¶ä½™åˆå§‹åŒ–ä¸ºInfinity,  dp[i]è¡¨ç¤ºä»[0,i]æœ€å°‘éœ€è¦ç”±å¤šå°‘ä¸ªç‰‡æ®µæ„æˆ

â–¼æ¯æ¬¡éå†æ‰€æœ‰ç‰‡æ®µ , å¦‚æœi > $clips[j][0]$, åˆ™æ¯”è¾ƒ$dp[i]$å’Œ $dp[clips[j][0]]+1$ ,å› ä¸ºåˆ°[0, i ]å¯ä»¥ç”±[0, $clips[j][0]$]å’Œ[$clips[j][0]$, i] ç»„æˆ , ç„¶åå–æœ€å°çš„

â˜…ä¸ºä»€ä¹ˆi = $clips[j][0]$ä¸è€ƒè™‘? å¦‚æœç­‰äºçš„è¯, ç›´æ¥ç”¨dp[i]å°±å¯ä»¥äº†, ä¸éœ€è¦å†è·³ä¸€æ¬¡!!!  è€Œä¸”æ­¤æ—¶çš„è¯dp[i]è¿˜æ˜¯Infinity,æˆ‘ä»¬é¦–å…ˆéœ€è¦ç¡®ä¿å¯ä»¥ä» [0,k] å†æ¥ç¡®ä¿èƒ½ä»[k,i]

 <img src="ä¸“é¢˜.assets/image-20210405173207607.png" alt="image-20210405173207607" style="zoom:35%;" />



dpçš„å†™æ³•:

**æ—¶é—´å¤æ‚åº¦: O(n^2^)**

**ç©ºé—´å¤æ‚åº¦: O(n)**

```js
/**
 * @param {number[][]} clips
 * @param {number} T
 * @return {number}
 */
var videoStitching = function(clips, T) {
    //é¢˜ç›®è¦æ±‚æ˜¯[0,T)
    //dp[i]è¡¨ç¤º[0,i)éœ€è¦çš„æœ€å°‘ç‰‡æ®µæ•°,æˆ‘ä»¬ä¼šç”¨æ‰€æœ‰ç‰‡æ®µå»å¾ªç¯éå†
    let dp=Array(T+1).fill(Infinity);
    dp[0]=0;           //åˆå§‹å€¼ä¸º0 ä¹Ÿè¡¨ç¤º[0,0)ä¸éœ€è¦ç‰‡æ®µ
    for (let i=1;i<=T;i++){
        for (let v of clips){
            // v[0]<i<=v[1]è¯´æ˜å¯ä»¥ç”¨è¯¥ç‰‡æ®µ
            // å‰ªè¾‘æˆ[v[0],i)
            if (v[0]<i&&v[1]>=i){
                dp[i]=Math.min(dp[i],dp[v[0]]+1)
            }
        }
    }
    return  dp[T]===Infinity? -1 : dp[T];
};
```







#### [â˜…â˜…â˜…1326. çŒæº‰èŠ±å›­çš„æœ€å°‘æ°´é¾™å¤´æ•°ç›®](https://leetcode-cn.com/problems/minimum-number-of-taps-to-open-to-water-a-garden/)

éš¾åº¦å›°éš¾ğŸ’¥ğŸ’¥ğŸ’¥

åœ¨ x è½´ä¸Šæœ‰ä¸€ä¸ªä¸€ç»´çš„èŠ±å›­ã€‚èŠ±å›­é•¿åº¦ä¸º `n`ï¼Œä»ç‚¹ `0` å¼€å§‹ï¼Œåˆ°ç‚¹ `n` ç»“æŸã€‚

èŠ±å›­é‡Œæ€»å…±æœ‰ `n + 1` ä¸ªæ°´é¾™å¤´ï¼Œåˆ†åˆ«ä½äº `[0, 1, ..., n]` ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` å’Œä¸€ä¸ªé•¿åº¦ä¸º `n + 1` çš„æ•´æ•°æ•°ç»„ `ranges` ï¼Œå…¶ä¸­ `ranges[i]` ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰è¡¨ç¤ºï¼šå¦‚æœæ‰“å¼€ç‚¹ `i` å¤„çš„æ°´é¾™å¤´ï¼Œå¯ä»¥çŒæº‰çš„åŒºåŸŸä¸º `[i - ranges[i], i + ranges[i]]` ã€‚

è¯·ä½ è¿”å›å¯ä»¥çŒæº‰æ•´ä¸ªèŠ±å›­çš„ **æœ€å°‘æ°´é¾™å¤´æ•°ç›®** ã€‚å¦‚æœèŠ±å›­å§‹ç»ˆå­˜åœ¨æ— æ³•çŒæº‰åˆ°çš„åœ°æ–¹ï¼Œè¯·ä½ è¿”å› **-1** ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

![img](ä¸“é¢˜.assets/1685_example_1.png)

```
è¾“å…¥ï¼šn = 5, ranges = [3,4,1,1,0,0]
è¾“å‡ºï¼š1
è§£é‡Šï¼š
ç‚¹ 0 å¤„çš„æ°´é¾™å¤´å¯ä»¥çŒæº‰åŒºé—´ [-3,3]
ç‚¹ 1 å¤„çš„æ°´é¾™å¤´å¯ä»¥çŒæº‰åŒºé—´ [-3,5]
ç‚¹ 2 å¤„çš„æ°´é¾™å¤´å¯ä»¥çŒæº‰åŒºé—´ [1,3]
ç‚¹ 3 å¤„çš„æ°´é¾™å¤´å¯ä»¥çŒæº‰åŒºé—´ [2,4]
ç‚¹ 4 å¤„çš„æ°´é¾™å¤´å¯ä»¥çŒæº‰åŒºé—´ [4,4]
ç‚¹ 5 å¤„çš„æ°´é¾™å¤´å¯ä»¥çŒæº‰åŒºé—´ [5,5]
åªéœ€è¦æ‰“å¼€ç‚¹ 1 å¤„çš„æ°´é¾™å¤´å³å¯çŒæº‰æ•´ä¸ªèŠ±å›­ [0,5] ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šn = 3, ranges = [0,0,0,0]
è¾“å‡ºï¼š-1
è§£é‡Šï¼šå³ä½¿æ‰“å¼€æ‰€æœ‰æ°´é¾™å¤´ï¼Œä½ ä¹Ÿæ— æ³•çŒæº‰æ•´ä¸ªèŠ±å›­ã€‚
```

**æç¤ºï¼š**

- `1 <= n <= 10^4`
- `ranges.length == n + 1`
- `0 <= ranges[i] <= 100`





ğŸŒŸè¿˜æ˜¯è€å¥—è·¯, å…ˆè½¬æ¢æ•°æ®å’Œè·³è·ƒæ¨¡å¼ä¸€æ ·

 <img src="ä¸“é¢˜.assets/image-20210405192255866.png" alt="image-20210405192255866" style="zoom:67%;" />

**æ—¶é—´å¤æ‚åº¦: $O(n)$**

```js
/**
 * @param {number} n
 * @param {number[]} ranges
 * @return {number}
 */
const minTaps = function(n, ranges) {
    //n>=1, ranges.length=n+1
    //æˆ‘ä»¬åœ¨æ„çš„æ˜¯èŒƒå›´, ä¸æ˜¯æ°´é¾™å¤´ä¸ªæ•°, æ‰€ä»¥æ˜¯n
    //maxEnd[i]è¡¨ç¤ºåœ¨ä½ç½®i, èƒ½åˆ°è¾¾çš„æœ€è¿œè·ç¦»
    let maxEnd=Array(n).fill(0);
    for(let i=0;i<ranges.length;i++){
        let low=Math.max(0,i-ranges[i]),
            high=i+ranges[i];
        maxEnd[low]=Math.max(maxEnd[low],high);
    }

    //å¯¹è¦†ç›–èŒƒå›´å¾ªç¯
    let end=0,maxPos=0,count=0;
    for(let i=0;i<n;i++){
        maxPos=Math.max(maxPos,maxEnd[i]);
        //i<n,å¦‚æœåœ¨å¾ªç¯ä¸­maxPos=iè¡¨ç¤ºæ— æ³•ä½¿è¦†ç›–èŒƒå›´è¾¾åˆ°n
        if(maxPos===i) return -1;
        //end=i,è¡¨ç¤ºä¸Šæ¬¡çš„æ°´é¾™å¤´è¦†ç›–çš„æœ€å¤§èŒƒå›´å·²åˆ°,éœ€è¦å¯»æ‰¾ä¸‹ä¸€ä¸ªæ°´é¾™å¤´
        //ä¹Ÿå°±æ˜¯å·²è¾¾åˆ°ä¸Šä¸€è½®è·³è·ƒæœ€å¤§è·ç¦»,é€‰æ‹©maxPoså¯¹åº”çš„ä½ç½®
        //ä¸ºä¸Šä¸€è½®çš„è·³è·ƒè½è„šç‚¹è¿›è¡Œä¸‹ä¸€æ¬¡è·³è·ƒ
        if(end===i){
            end=maxPos;
            count++;
        }
    }
    return count;
};
```

â—

1. è¿™é‡Œç®—çš„æ˜¯èŒƒå›´, æˆ‘ä»¬è¦çœ‹ä¸­é—´çš„! å› æ­¤æˆ‘ä»¬è¿™é‡Œç¬¬ä¸€ä¸ªforå¾ªç¯è®¡ç®—çš„æ˜¯ $[0,n)$ , å› ä¸ºèƒ½æ’’åˆ°nå°±ç»“æŸäº†, ä½ å†å»è®¡ç®—startä¸ºnæ²¡æœ‰æ„ä¹‰! è€Œä¸”å¦‚æœstartä¸ºnçš„è¯, é‚£ä¹ˆå…¶ç›¸å½“äºä¸èƒ½æ´’æ°´! (å› ä¸ºæˆ‘ä»¬è®¡ç®—maxEndæ—¶startçš„è®¡ç®—æœºåˆ¶) å› æ­¤åªéœ€è¦è®¡ç®— $[0,n) $ $
2. ç¬¬äºŒä¸ªforå¾ªç¯ $i<n$ æ˜¯å› ä¸ºmaxEndé•¿åº¦æ²¡é‚£ä¹ˆå¤§è€Œä¸”ä¹Ÿè®¡ç®—ä¸åˆ°





â–¼è¿™æ˜¯è‡ªå·±æŒ‰ç…§ä¸Šé¢é‚£é“é¢˜ç›´æ¥å¥—çš„dp, æ€§èƒ½ä¸æ˜¯å¤ªå¥½ğŸ˜­ğŸ˜­ğŸ˜­

 <img src="ä¸“é¢˜.assets/image-20210405184619757.png" alt="image-20210405184619757" style="zoom:67%;" />

```js
/**
 * @param {number} n
 * @param {number[]} ranges
 * @return {number}
 */
var minTaps = function(n, ranges) {
    //n>=1, ranges.length=n+1
    //dp[i]è¡¨ç¤º[0,i]éœ€è¦çš„æ°´é¾™å¤´æ•°ç›®
    let dp=Array(n+1).fill(Infinity);
    dp[0]=0;
	//å…ˆå¤„ç†æˆèŒƒå›´
    for(let i=0;i<ranges.length;i++){
        let low=Math.max(0,i-ranges[i]),
            high=i+ranges[i];
        ranges[i]=[low,high];
    }

    //å¯¹è¦†ç›–èŒƒå›´å¾ªç¯
    for(let i=1;i<=n;i++){
        for(let v of ranges){
            if(v[0]<i&&v[1]>=i){
                dp[i]=Math.min(dp[i],dp[v[0]]+1);
            }
        }
    }

    return dp[n]===Infinity? -1:dp[n];
};
```



#### â˜…â˜…â˜…è…¾è®¯ç¬”è¯•:è§†é‡äº‰å¤º

é“¾æ¥ï¼šhttps://www.nowcoder.com/questionTerminal/61e1e66e39f348cdb6495de91ac36a41
æ¥æºï¼šç‰›å®¢ç½‘



å°Qåœ¨è¿›è¡Œä¸€åœºç«æŠ€æ¸¸æˆ,è¿™åœºæ¸¸æˆçš„èƒœè´Ÿå…³é”®å°±åœ¨äºèƒ½å¦èƒ½äº‰å¤ºä¸€æ¡é•¿åº¦ä¸ºLçš„æ²³é“,å³å¯ä»¥çœ‹ä½œæ˜¯[0,L]çš„ä¸€æ¡æ•°è½´ã€‚ è¿™æ¬¾ç«æŠ€æ¸¸æˆå½“ä¸­æœ‰nä¸ªå¯ä»¥æä¾›è§†é‡çš„é“å…·âˆ’çœŸè§†å®ˆå«,ç¬¬iä¸ªçœŸè§†å®ˆå«èƒ½å¤Ÿè¦†ç›–åŒºé—´[xi,yi]ã€‚ç°åœ¨å°Qæƒ³çŸ¥é“è‡³å°‘ç”¨å‡ ä¸ªçœŸè§†å®ˆå«å°±å¯ä»¥è¦†ç›–æ•´æ®µæ²³é“ã€‚ 



**è¾“å…¥æè¿°:**

è¾“å…¥åŒ…æ‹¬n+1è¡Œã€‚


ç¬¬ä¸€è¡ŒåŒ…æ‹¬ä¸¤ä¸ªæ­£æ•´æ•°nå’ŒL(1<=n<=10^5^,1<=L<=10^9^)


æ¥ä¸‹æ¥çš„nè¡Œ,æ¯è¡Œä¸¤ä¸ªæ­£æ•´æ•°xi,yi(0<=xi<=yi<=10^9^),è¡¨ç¤ºç¬¬iä¸ªçœŸè§†å®ˆå«è¦†ç›–çš„åŒºé—´ã€‚

**è¾“å‡ºæè¿°:**

```
ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å°‘éœ€è¦çš„çœŸè§†å®ˆå«æ•°é‡, å¦‚æœæ— è§£, è¾“å‡º-1ã€‚
```

ç¤ºä¾‹1

è¾“å…¥

```
4 6
3 6
2 4
0 2
4 7
```

è¾“å‡º

```
3
```



ğŸŒŸ<span id='tip-greedy'>è¿™é“é¢˜ä½ </span>>å¯èƒ½ä¼šä»¥ä¸ºåˆå’Œä¹‹å‰çš„ä¸€æ ·, ä½†æ˜¯æœ‰å‘!!!  æ³¨æ„åˆ°äº†å—? å¦‚æœåˆæ˜¯æŒ‰ä¹‹å‰çš„èŒƒå›´è¦†ç›–æ¥è®¡ç®—, é‚£ä¹ˆè®¡ç®—é‡ä¼šè¾¾åˆ°$10^9$é‡çº§(è¶…æ—¶â—),  ä½†å¦‚æœé‡‡ç”¨å¯¹ç‰‡æ®µè¿›è¡Œéå†çš„è¯ åªæœ‰ $10^5$ , å› æ­¤å¯¹ç‰‡æ®µéå†è¿˜æ˜¯å¯¹èŒƒå›´éå†è¦çœ‹æƒ…å†µ!!!

```js
const readline=require('readline');
const rl=readline.createInterface({
    input:process.stdin,
    output:process.stdout
})
const arr=[]
let n,l;
rl.on('line',function(line){
    arr.push(line.split(' ').map(Number));
    if(arr.length===1){
        n=Number(arr[0][0]);
        l=Number(arr[0][1]);
    }else if(arr.length===n+1){
        arr.shift();
        arr.sort((a,b)=>a[0]-b[0]);

        let end=0,maxPos=0,count=0,i=0;
        while (i<arr.length){
            //æ±‚å‡ºåœ¨ä¸Šä¸€è½®è·³è·ƒèŒƒå›´å†…æœ€å¤§çš„maxPos
            //ç”±äºå·²ç»æ’å¥½åº,end=0åˆå§‹åŒ–æ—¶ä¹Ÿæ»¡è¶³æƒ…å†µ
            while (i<arr.length&&arr[i][0]<=end){
                maxPos=Math.max(maxPos,arr[i][1]);
                ++i;
            }
            //è·³è·ƒä¸€æ¬¡
            count++;
            end=maxPos;
            //ç›´æ¥èµ·ç‚¹å¤§äºäº†å½“å‰èƒ½è·³è·ƒåˆ°çš„æœ€å¤§è·ç¦»,å‡ºç°äº†ç©ºç¼º
            if (i<arr.length&&arr[i][0]>end){
                count=-1; break;
            }
            if (maxPos>=l) break;
        }
        //é€€å‡ºæ—¶maxPosæœªèƒ½è¾¾åˆ°l
        if (maxPos<l){
            count=-1;
        }
        console.log(count);
        
        //next
        arr.length=0;
    }
})
```

æˆ‘åœ¨äº†è§£è¿™ä¸ªæ–¹æ³•åä¹Ÿå¯¹1024è¿›è¡Œäº†èŒƒå›´æ•°ç»„éå†çš„æ”¹å†™ [link 1024](#1024)



ğŸ’¥<span style="font-weight:bold; color:red;">update:</span>

ä¸Šé¢çš„é‚£ç§å†™æ³•å®é™…ä¸Šæœ‰é”™è¯¯, ä½†æ˜¯åœ¨åˆ¤é¢˜ç³»ç»Ÿçœ‹æ¥æ²¡é”™! é¢˜ç›®ä¸­å¹¶æ²¡æœ‰è¯´è§†é‡å®ˆå«çš„èŒƒå›´å°äºL, ä½†æ˜¯è§‚æ³•ç»™çš„ç”¨ä¾‹å¯èƒ½éƒ½å°äºLã€‚ å¦‚æœå·²ç»å‡ºç°å®ˆå«å¤§äºLçš„æƒ…å†µï¼Œä¸Šé¢çš„è§£æ³•ä¼šå‡ºé”™ï¼ æ¯”å¦‚è¾“å…¥ ` 4 6    0 2   2 3   3 6   8 9`  è¿™ç§æƒ…å†µæ˜æ˜¾å®Œå…¨è¦†ç›–ä½†ä¼šåˆ¤é”™ï¼Œ å› ä¸º $arr[3][0]>maxPos$ å› æ­¤ä¿®æ”¹çš„æ–¹å¼å¯ä»¥æ˜¯æŠŠ  <span style="color:blue;">maxPos>l</span>çš„åˆ¤æ–­æå‰!:

```js
rl.on('line',function (line){
 arr.push(line.trim().split(' ').map(Number));
 if (arr.length===1){
  n=arr[0][0];
  L=arr[0][1];
 }else if (arr.length===n+1){
  arr.shift();
  arr.sort((a,b)=>a[0]-b[0]);

  let end=0,maxPos=0,count=0,i=0;
  while (i<n){
   count++;
   //1.ä¸è¶…è¿‡æ•°ç»„çš„é•¿åº¦ 2.èµ·å§‹ä½ç½®ä¸è¶…è¿‡end(å› ä¸ºæœ€è¿œè·³åˆ°end)
   while (i<n&&arr[i][0]<=end){
    maxPos=Math.max(maxPos,arr[i][1]);
    i++;
   }
   //è¿™é‡Œé€šè¿‡ä¸Šé¢ç®—å‡ºæ¥çš„maxPosæ˜¯åˆæ³•çš„! å®Œå…¨èƒ½ä»0å¼€å§‹åˆ°è¾¾çš„!
   if (maxPos>=L) break;

   //iæ²¡è¶…å‡ºçš„æƒ…å†µä¸‹,ä¸‹ä¸€ä¸ªå½“å‰å€¼æ¯”ä¸Šä¸€è½®èƒ½åˆ°è¾¾çš„æœ€è¿œç‚¹éƒ½è¿œåˆ™è¯´æ˜æœ‰ç©ºç¼º
   if (i<n&&arr[i][0]>maxPos) {
    count=-1;
    break;
   }

   end=maxPos;
  }
  if (maxPos<L) count=-1;

  console.log(count);
  arr.length=0;
 }

})
```

ğŸ’£è¿™é‡Œä¸èƒ½ç”¨45é¢˜ä¸­çš„while--for, ==åªèƒ½while--while==ã€‚å› ä¸º45é¢˜æ˜¯æ¯ä¸ªä½ç½®éƒ½æœ‰ä¸”åªæœ‰ä¸€ç»„è·³è·ƒæ•°æ®ï¼Œ è¿™é‡Œæ¯ä¸ªä½ç½®çš„è·³è·ƒæ•°æ®å¯èƒ½æ²¡æœ‰æˆ–è€…æœ‰å¤šä¸ªã€‚  <span style=" color:red;">æˆ‘ä»¬ä¸€å®šè¦ä¿è¯åœ¨endèŒƒå›´å†…å»å¯»æ‰¾å½“å‰èƒ½è·³åˆ°çš„æœ€è¿œå¤„ï¼</span>  å› ä¸ºè¯¥æ–¹æ³•å°±æ˜¯æ¯æ¬¡ä»endèŒƒå›´å†…å¯»æ‰¾ä¸‹ä¸€æ¬¡èƒ½è·³æœ€è¿œçš„ä½ç½®ç„¶åå€Ÿæ­¤è®¡ç®—count, ä½†æˆ‘ä»¬å¹¶ä¸éœ€è¦è®°å½•ä»å“ªé‡Œè·³èƒ½æŒ‘åˆ°æœ€è¿œ!

ğŸ’£$maxPos>=L$çš„åˆ¤æ–­ä¸€å®šè¦åœ¨ $i<n \; \& \; arr[i][0]>maxPos$  å‰, å› ä¸ºæœ‰å¯èƒ½è§†é‡èŒƒå›´å¤§äºLã€‚æ¯”å¦‚è¾“å…¥ ` 4 6    0 2   2 3   3 6   8 9`







**ğŸŒŸSummary**

è¦†ç›–æœ‰ä¸‰ç§æ–¹æ³•:

**ä¸€. è¦†ç›–èŒƒå›´éå†** $O(n)$

1. å»ºç«‹ä¸€ä¸ªé•¿åº¦ä¸ºè¦†ç›–èŒƒå›´é•¿åº¦çš„æ•°ç»„maxEnd, å¯¹ç‰‡æ®µæ•°ç»„è¿›è¡Œéå†, è®°å½•ä½äºä½ç½®ièƒ½åˆ°è¾¾çš„æœ€è¿œè·ç¦»$maxEnd[i]$ , åˆå§‹åŒ–ä¸º0
2. å¯¹è¦†ç›–èŒƒå›´è¿›è¡Œéå†, æ›´æ–°maxPosä¸º$[0,i]$ä¸­èƒ½è·³è·ƒåˆ°çš„æœ€è¿œèŠ‚ç‚¹
3. end=i è¡¨ç¤ºå·²ç»åˆ°è¾¾äº†ä¸Šæ¬¡è·³è·ƒçš„æœ€å¤§å¤„,éœ€è¦é€‰æ‹©ä¸‹æ¬¡è·³è·ƒä¸ºmaxPosçš„ç‚¹æ¥è¿›è¡Œä¸‹æ¬¡è·³è·ƒ

**äºŒ.ç‰‡æ®µæ•°ç»„éå†**  $O(n)$

1. å…ˆå°†ç‰‡æ®µæ•°ç»„è¿›è¡Œæ’åº
2. ä½¿ç”¨ä¸€ä¸ªwhileæŠŠå½“å‰è½®çš„éƒ½éå†å®Œå¹¶æ›´æ–°maxPos
3. end=maxPosè¿›è¡Œç›¸å…³æ›´æ–°å¹¶å¯¹é€€å‡ºæ¡ä»¶è¿›è¡Œåˆ¤æ–­

**ä¸‰.åŠ¨æ€è§„åˆ’**  $O(n^2)$

dp[i]è¡¨ç¤º[0,i)éœ€è¦çš„æœ€å°‘ç‰‡æ®µæ•°,æˆ‘ä»¬ä¼šç”¨æ‰€æœ‰ç‰‡æ®µå»å¾ªç¯éå†



ğŸš©â‘ å’Œâ‘¡æ ¹æ®é¢˜ç›®è¦æ±‚æ¥ä½¿ç”¨å“¦! è™½ç„¶éƒ½æ˜¯O(n), ä½†ç¬¬ä¸€ç§æ˜¯èŒƒå›´çš„é‚£ä¸ªn, ç¬¬äºŒç§æ˜¯èŒƒå›´æ•°ç»„çš„é‚£ä¸ªn! å¯¹äºè·³è·ƒæ¸¸æˆè¿™ä¸¤ä¸ªnæ˜¯ç›¸åŒçš„, ä½†å¯¹äºå…¶ä»–çš„æ¥è¯´æœ‰åŒºåˆ«!!!  æ³¨æ„åˆ¤æ–­æ˜¯å¦æœ‰å·¨å¤§çš„æ•°é‡çº§å·®è·!





## åŠ¨æ€è§„åˆ’





#### â˜…â˜…1.å¹¸è¿æ•°å­—

å°æ˜“çš„å¹¸è¿æ•°å­—æ˜¯7ï¼Œç°æœ‰ä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œè¯·ä½ æ‰¾å‡ºå¹¶è¿”å›èƒ½è¢«ä¸ƒæ•´é™¤çš„å­é›†åˆçš„æœ€å¤§å’Œï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™è¿”å›-1ã€‚

[é¢˜ç›®é“¾æ¥]([ç»„åˆå¹¸è¿æ•°å­—_ç½‘æ˜“2021æ ¡æ‹›ç¬”è¯•-å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼ˆæ­£å¼ç¬¬ä¸€æ‰¹ï¼‰_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/test/question/done?tid=42777111&qid=1262925#summary))



**è¾“å…¥æè¿°:**

```
ä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„åˆ—è¡¨numsï¼Œç”¨ç©ºæ ¼åŒºåˆ†ï¼Œ1<=length(nums)<=100000ï¼Œsum(nums) <= 1000000000
```

**è¾“å‡ºæè¿°:**

```
ä¸€ä¸ªæ•´æ•°ï¼Œæœ€å¤§å’Œ
```



**è¾“å…¥ä¾‹å­1:**

```
7 3 1 4
```

**è¾“å‡ºä¾‹å­1:**

```
14
```

**ä¾‹å­è¯´æ˜1:**

```
7+3+4
```



è¿™é“é¢˜å¾ˆéš¾, ä¸€å¼€å§‹ä¼šæƒ³åˆ°éå†å¾—åˆ°æ‰€æœ‰çš„å­é›†åˆçš„å’Œ, ä½†æ˜¯å´ä¸çŸ¥é“å¦‚ä½•éå†å¾—åˆ°ã€‚å› ä¸ºè¿™é‡Œçš„å­é›†åˆé•¿åº¦å¯ä»¥ä¸º1 ~ nums.lengthï¼Œä¸€èˆ¬çš„éå†æ— æ³•æ»¡è¶³ï¼

ä¸¾ä¾‹ï¼š  1  2  3  4

ä¸€èˆ¬çš„éå†æ˜¯ 1ï¼Œ 1 2ï¼Œ 1 2 3ï¼Œ 1 2 3 4ï¼Œ 2ï¼Œ 2 3ï¼Œ 2 3 4ï¼Œ 3ï¼Œ3 4ï¼Œ4å®ç°è¿™ä¸ªéå†å·²ç»æ˜¯$O(n^2)$çš„å¤æ‚åº¦äº†! å¯æ˜¯è¿™è¿˜æ²¡ç»“æŸ, è¿˜éœ€è¦  1 3, 1 3 4, 1 4, 2 4, è¿™ç§å¾ªç¯éå†æå…¶éš¾å†™å‡ºæ¥!!

ğŸŒŸé‚£æˆ‘ä»¬è¿™é‡Œæƒ³åˆ°äº†ä¸€ä¸ªå·§å¦™åœ°æ–¹æ³•, é€†å‘æ€ç»´, ç”±äºå…¨éƒ¨çš„æ•°ä¹‹å’Œsumè‚¯å®šæ˜¯ç”±æ‰€æœ‰çš„æ•°ç»„æˆ, é‚£æˆ‘ä»¬å¯ä»¥è¯•ç€æ…¢æ…¢åœ°æ‰’å…ƒç´ ä¸‹æ¥ç›´åˆ°æŠŠæ‰€æœ‰å…ƒç´ æ‰’å®Œã€‚

æ¯”å¦‚è¯´æˆ‘ä»¬è¿™é‡Œæœ‰ä¸€ä¸ªæ•°ç»„ [a,b,c,d]

 <img src="ä¸“é¢˜.assets/image-20210327211724740.png" alt="image-20210327211724740" style="zoom: 40%;" />

â˜…è¿™ç§é€†å‘çš„éå†æ›´å®¹æ˜“ä½¿ç”¨ä»£ç å†™å‡ºæ¥



```js
const readline=require('readline');
const rl=readline.createInterface({
	input:process.stdin,
	output:process.stdout
});
/*
 å°æ˜“çš„å¹¸è¿æ•°å­—æ˜¯7ï¼Œç°æœ‰ä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œ
 è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›èƒ½è¢«ä¸ƒæ•´é™¤çš„å­é›†åˆçš„æœ€å¤§å’Œï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™è¿”å›-1
 è¾“å…¥:
 ä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„åˆ—è¡¨numsï¼Œç”¨ç©ºæ ¼åŒºåˆ†ï¼Œ1<=length(nums)<=100000ï¼Œsum(nums) <= 1000000000
 */
rl.on('line',function (line) {
	/*1.å¤„ç†æ•°æ®*/
	const nums=line.trim().split(' ').map(Number);

	/*2.å»ºç«‹hashè¡¨*/
	//ç”±äºæ˜¯å…¨æ˜¯æ­£æ•´æ•°,æ‰€ä»¥ sum >= arr.length
	const sum=nums.reduce((a,b)=>a+b);
	//dp[i]è®°å½•iæ˜¯å¦èƒ½å¤Ÿå¾—åˆ° 1ä¸ºå¯å¾—åˆ°,0åˆ™ç›¸å
	const hash=Array(sum+1).fill(0);
	hash[0]=1; hash[sum]=1;
	/*è¿™ä¸ªæ–¹æ³•å¾ˆå·§å¦™, æœ€åˆæ˜¯a+b+c+d,æ¯æ¬¡ä»æ‰€æœ‰çš„æ»¡è¶³æ¡ä»¶çš„å­é›†åˆå‡å»ä¸€ä¸ªæ•°
	* è¿™æ ·å°±å¾ˆæ–¹ä¾¿çš„å¾—åˆ°äº†æ‰€æœ‰çš„æ’åˆ—*/
	for (let i=0;i<nums.length;i++){
		for (let j=0;j<=sum;j++){
			if (hash[j]===1&&j>=nums[i]){
				hash[j-nums[i]]=1;
			}
		}
	}

	let maxSum=-1;
	for (let i=hash.length-1;i>=7;i--){
		if (hash[i]===1&& i%7===0){
			maxSum=i;
			break;
		}
	}
	console.log(maxSum);
})
```



ğŸŒŸå…¶å®è¿™ç®—ä¸ä¸Šdpï¼Œé‚£ä¸ªæ•°ç»„åªæ˜¯hashè¡¨è®°å½•æ˜¯å¦å¯ä»¥å’Œä¸ºiã€‚



ğŸš©ç±»ä¼¼é¢˜ç›®, å­¦ä¼šèæ±‡è´¯é€š!!!

##### <span style="font-size:20px;font-weight:bold">1.1å°æ˜“çš„è€ƒè¯•æˆç»© </span>



å°æ˜“å‚åŠ äº†ä¸€æ¬¡è€ƒè¯•ï¼Œè¿™åœºåŒ…å« n ä¸ªé¢˜ç›®ï¼Œç¬¬ i ä¸ªé¢˜ç›®çš„åˆ†æ•°æ˜¯ si ã€‚ 

  å¦‚æœå°æ˜“ç¬¬ i é¢˜ç›®å›ç­”æ­£ç¡®ï¼Œä»–å°†å¾—åˆ° si åˆ†ï¼Œå¦åˆ™è¯¥é¢˜ç›®ä»–å°†å¾—åˆ° 0 åˆ†ã€‚ 

  æœ€ç»ˆçš„è€ƒè¯•å¾—åˆ†æ˜¯æ‰€æœ‰é¢˜ç›®å¾—åˆ†çš„æ€»å’Œã€‚ 

  ç”±äºé˜…å·è€å¸ˆå¾ˆè®¨åŒæ•°å­— 5ï¼Œåœ¨é˜…å·æ—¶å¦‚æœä¸€ä¸ªå­¦ç”Ÿçš„è€ƒè¯•æ€»åˆ†ä¸­å«æœ‰æ•°å­— 5ï¼Œé‚£ä¹ˆé˜…å·è€å¸ˆå°†æ°”æ„¤åœ°ç»™ä»– 0 åˆ†ã€‚ 

  é‚£ä¹ˆå°æ˜“è€ƒè¯•çš„æœ€é«˜å¾—åˆ†æ˜¯å¤šå°‘ï¼Ÿ 



**è¾“å…¥æè¿°:**

```
è¾“å…¥çš„ç¬¬ä¸€è¡Œæ˜¯æ­£æ•´æ•° n(1<=n<=100)  ï¼Œä»£è¡¨è¿™åœºè€ƒè¯•çš„é¢˜ç›®æ•°ã€‚
æ¥ä¸‹ä¸€è¡Œå«æœ‰nä¸ªæ­£æ•´æ•° s1,s2,s3....sn (1<= si <=200)
```



**è¾“å‡ºæè¿°:**

```
è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œä»£è¡¨å°æ˜“è€ƒè¯•çš„æœ€é«˜å¾—åˆ†ã€‚
```

ç¤ºä¾‹1

è¾“å…¥

```
5
5 15 5 15 5
```

è¾“å‡º

```
40
```

è¯´æ˜

```
å¦‚æœæ‰€æœ‰é¢˜ç›®éƒ½ç­”å¯¹ï¼Œæ€»åˆ†ä¸º45ï¼Œä½†é‡Œé¢åŒ…å«äº†æ•°å­—5,æ‰€ä»¥æœ€é«˜å¾—åˆ†åº”è¯¥ä¸º40
```

ç¤ºä¾‹2

è¾“å…¥

```
5
5 15 5 15 8
```

è¾“å‡º

```
48
```



ğŸŒŸè¿™é“é¢˜å…¶å®ä¹Ÿè¦æ±‚å‡ºé›†åˆä¸­æ‰€æœ‰çš„ç»„åˆçš„å’Œ, å¹¶ä¸”å†é€‰å‡ºæœ€å¤§çš„, æ‰€ä»¥æ˜¯å’Œä¸Šä¸€é“é¢˜ä¸€æ ·çš„è§£æ³•!!!



```js
const readline=require('readline');
const rl=readline.createInterface({
	input:process.stdin,
	output:process.stdout
})

let arr=[];
rl.on("line",function(line){
	arr.push(line);
	if(arr.length===2){
		let len=Number(arr[0]);
		let nums=arr[1].split(' ').map(Number);

		//core code
		let sum=nums.reduce((a,b)=>a+b); //sum>=1
		let dp=new Array(sum+1).fill(0); //dp.length>=2
		dp[0]=1; dp[sum]=1;
		for(let i=0;i<nums.length;i++){
			for(let j=0;j<=sum;j++){
				if(dp[j]!==0&&j>=nums[i]){
					dp[j-nums[i]]=1;
				}
			}
		}
		let max=0;
		for(let k=dp.length-1;k>0;k--){
			if(dp[k]&& !String(k).includes('5')){
				max=k;
				break;
			}
		}
		console.log(max);

		//before next input
		arr=[];
	}
})
```



â˜…å…¶å®åœ¨è®¡ç®—dpæ—¶ä¸éœ€è¦æ¯æ¬¡éƒ½è¿›è¡Œä¸€æ¬¡é•¿åº¦ä¸ºsumçš„å¾ªç¯çš„, å…¶å®ä¸€å¼€å§‹åªæœ‰dp[sum]æ»¡è¶³è¦æ±‚, åœ¨åé¢æˆ‘ä»¬å…¶å®åªè¦è®°å½•ä¸‹é‚£äº›æ»¡è¶³è¦æ±‚çš„ä½ç½®å°±æ–¹ä¾¿æ¯æ¬¡'æ‰’', å¯æ˜¯æˆ‘å°è¯•äº†ä¸€ä¸‹ä¼šè¶…å‡ºç©ºé—´é™åˆ¶!!!  æ‰€ä»¥è¿˜æ˜¯ç‰¢è®°ä¸Šé¢é‚£ç§ç»å…¸è§£é¢˜æ–¹æ³•!!!

â–¼æœ‰å˜åŒ–çš„éƒ¨åˆ†å¤§æ¦‚é•¿è¿™æ · , äº†è§£å³å¥½!

```js
        let flag=[sum];
        for(let i=0;i<nums.length;i++){
            for(let j=flag.length-1;j>=0;j--){
                let loc=flag[j]-nums[i];
                dp[loc]=1;
                flag.push(loc);
            }
        }
```



##### **ğŸŒŸæ€»ç»“:**

**å¯¹äºæ±‚é›†åˆä¸­æ‰€æœ‰ç»„åˆçš„å’Œçš„é¢˜ç›®, å…ˆç®—å‡ºæ•°ç»„ä¸­æ‰€æœ‰æ•°å­—çš„å’Œ, ç„¶åå†ä¾æ¬¡åˆ æ‰æ¯ä¸ªå…ƒç´ **







#### [2.å‡æœŸ](https://www.nowcoder.com/questionTerminal/7cd9a140387e455a972e8fea0e74be2c)

è…¾è®¯ç¬”è¯•



ç”±äºä¸šç»©ä¼˜ç§€ï¼Œå…¬å¸ç»™å°Qæ”¾äº† n å¤©çš„å‡ï¼Œèº«ä¸ºå·¥ä½œç‹‚çš„å°Qæ‰“ç®—åœ¨åœ¨å‡æœŸä¸­å·¥ä½œã€é”»ç‚¼æˆ–è€…ä¼‘æ¯ã€‚ä»–æœ‰ä¸ªå¥‡æ€ªçš„ä¹ æƒ¯ï¼šä¸ä¼šè¿ç»­ä¸¤å¤©å·¥ä½œæˆ–é”»ç‚¼ã€‚åªæœ‰å½“å…¬å¸è¥ä¸šæ—¶ï¼Œå°Qæ‰èƒ½å»å·¥ä½œï¼Œåªæœ‰å½“å¥èº«æˆ¿è¥ä¸šæ—¶ï¼Œå°Qæ‰èƒ½å»å¥èº«ï¼Œå°Qä¸€å¤©åªèƒ½å¹²ä¸€ä»¶äº‹ã€‚ç»™å‡ºå‡æœŸä¸­å…¬å¸ï¼Œå¥èº«æˆ¿çš„è¥ä¸šæƒ…å†µï¼Œæ±‚å°Qæœ€å°‘éœ€è¦ä¼‘æ¯å‡ å¤©ã€‚



**è¾“å…¥æè¿°:**

```
ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•° n(1â‰¤nâ‰¤100000) è¡¨ç¤ºæ”¾å‡å¤©æ•°
ç¬¬äºŒè¡Œ n ä¸ªæ•° æ¯ä¸ªæ•°ä¸º0æˆ–1,ç¬¬ i ä¸ªæ•°è¡¨ç¤ºå…¬å¸åœ¨ç¬¬ i å¤©æ˜¯å¦è¥ä¸š
ç¬¬ä¸‰è¡Œ n ä¸ªæ•° æ¯ä¸ªæ•°ä¸º0æˆ–1,ç¬¬ i ä¸ªæ•°è¡¨ç¤ºå¥èº«æˆ¿åœ¨ç¬¬ i å¤©æ˜¯å¦è¥ä¸š
ï¼ˆ1ä¸ºè¥ä¸š 0ä¸ºä¸è¥ä¸šï¼‰
```

**è¾“å‡ºæè¿°:**

```
ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå°Qä¼‘æ¯çš„æœ€å°‘å¤©æ•°
```



ç¤ºä¾‹1

è¾“å…¥

```
4
1 1 0 0
0 1 1 0
```

è¾“å‡º

```
2
```

è¯´æ˜

```
å°Qå¯ä»¥åœ¨ç¬¬ä¸€å¤©å·¥ä½œï¼Œç¬¬äºŒå¤©æˆ–ç¬¬ä¸‰å¤©å¥èº«ï¼Œå°Qæœ€å°‘ä¼‘æ¯2å¤©
```







ğŸŒŸè¿™é“é¢˜åˆ©ç”¨è¿™ç§åŠ¨æ€è§„åˆ’æ›´ç®€æ´!!! è€Œä¸”ä¸ç”¨è€ƒè™‘é‚£ä¹ˆå¤š!!!

**â–¼ä»¥ä¼‘æ¯ä¸ºä¾‹:  $dp[0][i]$ è¡¨ç¤ºç¬¬iå¤©ä¼‘æ¯å¹¶ä¸”æˆªæ­¢åˆ°ç¬¬iå¤©éœ€è¦ä¼‘æ¯çš„æœ€å°‘å¤©æ•°.**

é€šè¿‡è®¡ç®—æ¯ä¸€å¤©è¿›è¡Œ ==å·¥ä½œ or ä¼‘æ¯ or é”»ç‚¼== çš„æœ€å°‘ä¼‘æ¯å¤©æ•°æœ€åæ¯”è¾ƒå¾—å‡ºæœ€å°çš„ä¼‘æ¯å¤©æ•°

ğŸ’çŠ¶æ€è½¬ç§»åˆ†æ  

  1ã€æ¯ä¸€å¤©å°Qéƒ½å¯èƒ½å¤„äº3ä¸ªçŠ¶æ€ï¼Œé‚£å°±æ˜¯å·¥ä½œã€ä¼‘æ¯ã€é”»ç‚¼  

  2ã€è‹¥ç¬¬iå¤©å°Qå¤„äºå·¥ä½œçŠ¶æ€ï¼Œé‚£ä¹ˆç¬¬i-1å¤©åªèƒ½æ˜¯ä¼‘æ¯ã€é”»ç‚¼  

  3ã€è‹¥ç¬¬iå¤©å°Qå¤„äºé”»ç‚¼çŠ¶æ€ï¼Œé‚£ä¹ˆç¬¬i-1å¤©åªèƒ½æ˜¯ä¼‘æ¯ã€å·¥ä½œ  

  4ã€è‹¥ç¬¬iå¤©å°Qå¤„äºä¼‘æ¯çŠ¶æ€ï¼Œé‚£ä¹ˆç¬¬i-1å¤©å¯èƒ½æ˜¯å·¥ä½œã€ä¼‘æ¯ã€é”»ç‚¼ã€‚

```js
const readline = require('readline');
const rl = readline.createInterface({
	input: process.stdin,
	output: process.stdout
})
const arr = [];
rl.on('line', line => {
	arr.push(line);
	if (arr.length === 3) {
		const days = Number(arr[0]);
		const workDays = arr[1].split(' ').map(Number);
		const fitDays = arr[2].split(' ').map(Number); //fitness
		//0:ä¼‘æ¯  1:å·¥ä½œ  2:å¥èº«
		//dp[0][i]è¡¨ç¤ºç¬¬iå¤©ä¼‘æ¯çš„æƒ…å†µä¸‹æˆªæ­¢åˆ°ç¬¬iå¤©æœ€å°‘ä¼‘æ¯çš„å¤©æ•°
		//dpå¤šåŠ ä¸€ä½æ–¹ä¾¿è®¡ç®—,ä½†è¦æ³¨æ„dpçš„åºå·iå¯¹åº”äºworkDayså’ŒfitDaysä¸­çš„i-1
		const dp = Array.from({length: 3}, _ => Array(days + 1).fill(Infinity));
		dp[0][0] = 0;
		dp[1][0] = 0;
		dp[2][0] = 0;
		for (let i = 1; i <= days; i++) {
			// 1.rest
			dp[0][i] = Math.min(dp[0][i - 1], dp[1][i - 1], dp[2][i - 1]) + 1;

			// 2.å·¥ä½œ
			if (workDays[i - 1]) {
				dp[1][i] = Math.min(dp[0][i - 1], dp[2][i - 1]);
			}

			// 3.å¥èº«
			if (fitDays[i - 1]) {
				dp[2][i] = Math.min(dp[0][i - 1], dp[1][i - 1]);
			}
		}
		console.log(Math.min(dp[0][days], dp[1][days], dp[2][days]));
		arr.length = 0;
	}
})
```





è‡ªå·±çš„æ€è·¯:

è¿™é“é¢˜æœ‰å‘, ä¸èƒ½ç›´æ¥æŒ‰ç…§è´ªå¿ƒå»ç›´æ¥æŠŠå·¥ä½œå’Œå¥èº«ç®—è¿›å», æ¯”å¦‚

corp: 1  1  0

gym:  1  1  1

å¦‚æœç¬¬ä¸€å¤©ç›´æ¥é€‰workçš„è¯, å¿…é¡»ä¼‘æ¯ä¸€å¤©, ä½†å¦‚æœç¬¬ä¸€å¤©é€‰gymçš„è¯ä¼‘æ¯0å¤©ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦è·³è¿‡ä¸­é—´éƒ½ä¸º1çš„ç‚¹!!!

```js
const readline=require('readline');
const rl=readline.createInterface({
	input:process.stdin,
	output:process.stdout
})
const arr=[];
rl.on('line',function(line){
	arr.push(line);
	if(arr.length===3){
		let len=Number(arr[0]);
		let corp=arr[1].split(' ').map(Number);
		let gym=arr[2].split(' ').map(Number);
		let work=false,train=false;
		//dp[i]è¡¨ç¤ºiå¤©æ—¶é—´å†…æœ€å°‘ä¼‘æ¯çš„å¤©æ•°
		let dp=Array(len+1).fill(0);  //å¤šåŠ ä¸€ä½æ–¹ä¾¿è®¡ç®—
		for(let i=0;i<len;i++){
			//1.å¿…é¡»ä¼‘æ¯çš„æƒ…å†µ [0,0]
			if((!corp[i]&&!gym[i])||(work&&!gym[i])||(train&&!corp[i])){
				dp[i+1]=dp[i]+1; work=false; train=false;
				continue;
			}

			//2.å…¬å¸å’Œå¥èº«æˆ¿éƒ½è¥ä¸šä¸€å¤©åŠä»¥ä¸Šçš„æƒ…å†µ [1,1]+
			if ((!work&&!train)&&(corp[i]&&gym[i])&&i<len-1){
				let end=i;
				while (end<len-1&&corp[end]&&gym[end]){
					end++;
				}
				work=false; train=false;
				//corpå’Œgymä»0å¼€å§‹, è€Œdpä»1å¼€å§‹
				//endæ­¤æ—¶æŒ‡å‘corpå’Œgymä¸­ä¸ä¸º[1,1]çš„ä½ç½®,è€Œè¿™ä¸ªä½ç½®å¯¹åº”dp[end+1]
				//æ‰€ä»¥æˆ‘ä»¬ä¹‹ç¡®å®šdp[end]
				dp[end]=dp[i];  //å°±è·³è¿‡ä¸­é—´éƒ½ä¸º1çš„ç‚¹,è®©å¾ªç¯è‡ªå·±åˆ¤æ–­ä¸‹ä¸€æ¬¡
				i=end-1;  //forå¾ªç¯æœ€åä¼šåŠ 1
				continue;
			}
			//3.å…¬å¸å’Œå¥èº«æˆ¿åªæœ‰ä¸€ä¸ªåœ¨è¥ä¸šçš„æƒ…å†µ [1,0] or [0,1]
			if(!work&&corp[i]){
				work=true;  train=false;
				dp[i+1]=dp[i];
			}else if(!train&&gym[i]){
				train=true; work=false;
				dp[i+1]=dp[i];
			}
		}
		console.log(dp[len]);
		arr.length=0;
	}
})
```





#### â–¼å›æ–‡ä¸²

#### [â˜…â˜…647. å›æ–‡å­ä¸²](https://leetcode-cn.com/problems/palindromic-substrings/)

éš¾åº¦ä¸­ç­‰527

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½ çš„ä»»åŠ¡æ˜¯è®¡ç®—è¿™ä¸ªå­—ç¬¦ä¸²ä¸­æœ‰å¤šå°‘ä¸ªå›æ–‡å­ä¸²ã€‚

å…·æœ‰ä¸åŒå¼€å§‹ä½ç½®æˆ–ç»“æŸä½ç½®çš„å­ä¸²ï¼Œå³ä½¿æ˜¯ç”±ç›¸åŒçš„å­—ç¬¦ç»„æˆï¼Œä¹Ÿä¼šè¢«è§†ä½œä¸åŒçš„å­ä¸²ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼š"abc"
è¾“å‡ºï¼š3
è§£é‡Šï¼šä¸‰ä¸ªå›æ–‡å­ä¸²: "a", "b", "c"
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼š"aaa"
è¾“å‡ºï¼š6
è§£é‡Šï¼š6ä¸ªå›æ–‡å­ä¸²: "a", "a", "a", "aa", "aa", "aaa"
```

 

**æç¤ºï¼š**

- è¾“å…¥çš„å­—ç¬¦ä¸²é•¿åº¦ä¸ä¼šè¶…è¿‡ 1000 ã€‚



##### way1: dp

è¿™é“é¢˜æˆ‘ä¸€å¼€å§‹æ²¡æƒ³åˆ°æ˜¯dp, æœ¬æ¥æƒ³åŒæŒ‡é’ˆ, ä½†ä¸è¡Œ; æƒ³ç”¨æ ˆ, ä¹Ÿæ— æ³•å¾—åˆ°æ‰€æœ‰çš„ã€‚çœ‹äº†é¢˜è§£æ‰å‘ç°æ˜¯dpğŸ˜­

ğŸŒŸ$dp[i] [j]$ è¡¨ç¤º èŒƒå›´ i ~ jå†…çš„å­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºå›æ–‡ä¸²

çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š
$$
dp[i][j] =
 \begin{cases} 
 true, & \text{if }s[i]=s[j] \&\& ((j-i<2)\|dp[i+1][j-1] )  \\
 false, & \text{else }
 \end{cases}
$$
è¿™ä¸ªçŠ¶æ€è½¬ç§»æ–¹ç¨‹æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ

å½“åªæœ‰ä¸€ä¸ªå­—ç¬¦æ—¶ï¼Œæ¯”å¦‚ a è‡ªç„¶æ˜¯ä¸€ä¸ªå›æ–‡ä¸²ã€‚
å½“æœ‰ä¸¤ä¸ªå­—ç¬¦æ—¶ï¼Œå¦‚æœæ˜¯ç›¸ç­‰çš„ï¼Œæ¯”å¦‚ aaï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå›æ–‡ä¸²ã€‚
å½“æœ‰ä¸‰ä¸ªåŠä»¥ä¸Šå­—ç¬¦æ—¶ï¼Œæ¯”å¦‚ ababa è¿™ä¸ªå­—ç¬¦è®°ä½œä¸² 1ï¼ŒæŠŠä¸¤è¾¹çš„ a å»æ‰ï¼Œä¹Ÿå°±æ˜¯ bab è®°ä½œä¸² 2ï¼Œå¯ä»¥çœ‹å‡ºåªè¦ä¸²2æ˜¯ä¸€ä¸ªå›æ–‡ä¸²ï¼Œé‚£ä¹ˆå·¦å³å„å¤šäº†ä¸€ä¸ª a çš„ä¸² 1 å¿…å®šä¹Ÿæ˜¯å›æ–‡ä¸²ã€‚æ‰€ä»¥å½“ s[i]==s[j] æ—¶ï¼Œè‡ªç„¶è¦çœ‹ dp[i+1] [j-1] æ˜¯ä¸æ˜¯ä¸€ä¸ªå›æ–‡ä¸²ã€‚

è¿™é‡Œ



**æ—¶é—´å¤æ‚åº¦: O(n^2^):**

**ç©ºé—´å¤æ‚åº¦: O(n^2^)**

```js
/**
 * @param {string} s
 * @return {number}
 */
const countSubstrings = function (s) {
	const len = s.length;
	const dp = Array.from({length: len}, () => Array(len).fill(false));
	let count=0;
	for (let j = 0; j < len; j++) {
		for (let i = 0; i <= j; i++) {
			if (s[i] === s[j] && ((j - i < 2) || dp[i + 1][j - 1])) {
				dp[i][j]=true;
				count++;
			}
		}
	}
	return count;
}
```

ğŸŒŸå…¶å®è¿™ç§è§£æ³•è¿˜æœ‰ä¸€ä¸ªå‘ğŸ’£!!! å°±æ˜¯å¦‚ä½•éå†? 

ä¸€å¼€å§‹æˆ‘ç›´æ¥å†™çš„ , è¿™æ˜¯æœ€å¸¸è§„çš„å¾ªç¯

```js
for(let i=0;i<=s.length;i++){
	for(let j=i;j<=s.length;j++){
		if((s[i]===s[j])&&((j-i<2)||dp[i+1][j-1] )){
			dp[i][j]=1;
			count++;
		}
	}
}
```

å¯æ˜¯è¿™ç§å¾ªç¯æ˜¯ç›´æ¥ä»èµ·å§‹ä½ç½® i åˆ°æœ€å, è€Œæˆ‘ä»¬åˆ¤æ–­æ˜¯å¦ä¸ºå›æ–‡å­ä¸²æ—¶, ä¼šåœ¨$s[i]==s[j]$ä½†$j-i>=2$æ—¶åˆ¤æ–­ å­ä¸²ä¸­çš„å­ä¸²æ˜¯å¦æ»¡è¶³æ¡ä»¶, è€Œè¿™ç§å¸¸è§„çš„å¾ªç¯åœ¨è¿™ç§æ—¶å€™ä¼šå¤±æ•ˆ

æ¯”å¦‚  a b b c b b, æˆ‘ä»¬ç¬¬äºŒè½®å¾ªç¯æ—¶ ä»¥bä¸ºèµ·ç‚¹ æŒ‰ç†æ¥è¯´åº”è¯¥åŠ å…¥ â‘ b  â‘¡bb â‘¢bbcbb è¿™ä¸‰ä¸ª, å¯æ˜¯bbcbbå¹¶ä¸ä¼šè¢«åŠ å…¥, è¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä¼šåœ¨è¿™æ—¶åˆ¤æ–­bbcbbçš„å­ä¸²bcbæ˜¯å¦æ»¡è¶³æ¡ä»¶, **è™½ç„¶bcbè‚¯å®šæ»¡è¶³æ¡ä»¶ ä½†æˆ‘ä»¬å¾ªç¯è¿˜æ²¡è¿›è¡Œåˆ°æ­¤å¤„, æ‰€ä»¥bbcbbä¸ä¼šè¢«åŠ å…¥,** è€Œä¹‹åèµ·ç‚¹å³ç§», ä¹Ÿä¸ä¼šå†æ¬¡è®¡ç®—bbcbb, è¿™æ ·å°±ä¼šæ¼æ‰å¾ˆå¤šæ»¡è¶³æ¡ä»¶çš„æƒ…å†µ!!! 

ğŸš©æˆ‘ä»¬è¿™é‡Œé‡‡ç”¨é€†å‘æ€ç»´

**å›ºå®ši, ç§»åŠ¨j** è¿™æ˜¯æˆ‘ä»¬ä¸€å¼€å§‹å¸¸è§„å¾ªç¯çš„è¿‡ç¨‹,  åªæ˜¯ä¸€æ˜§åœ°æ‰©å¤§èŒƒå›´å¹¶æ²¡æœ‰ä¿è¯èŒƒå›´å†…çš„éƒ½å·²ç»è¢«è®¡ç®—, å› æ­¤ä¸å¯é¿å…åœ°ä¼šæ¼æ‰å¾ˆå¤šæ•°
$$
\begin{matrix}
 a & b & b & c & b & b \\
 b & b & c & b & b \\
 b & c & b & b \\
 c & b & b \\
 b & b\\
b\\
\end{matrix} \tag{1}
$$
**æ‰€ä»¥æˆ‘ä»¬è¦ç§¯å°‘æˆå¤š, è¿™ä¹Ÿæ˜¯dpçš„åŸºæœ¬æ€æƒ³**

**å›ºå®šj, ç§»åŠ¨i** , è¿™æ ·ç§»åŠ¨çš„æ—¶å€™éƒ½ä¿è¯äº†é‡Œé¢çš„å­å­—ç¬¦ä¸²éƒ½å·²ç»åˆ¤æ–­è¿‡
$$
\begin{matrix}
 a\\
 a & b  \\
 a & b & b \\
 a & b & b & c \\
 a & b & b & c & b \\
 a & b & b & c & b & b \\
\end{matrix} \tag{1}
$$



â—æ³¨æ„å“¦, è¿™é‡Œæ˜¯ä»¥ $i<=j$ å› æ­¤æ˜¯ $j$ åœ¨å¤–é¢ä¸”å°äº $len$ , $i$ åœ¨é‡Œé¢å°äºç­‰äº $j$

ğŸš©**å…³é”®:** <span style="font-weight:bold; color:red;">çŠ¶æ€è½¬ç§»æ–¹ç¨‹</span> å’Œ <span style="font-weight:bold; color:red;">forå¾ªç¯æ–¹å¼</span>




##### way2:ä¸­å¿ƒæ‰©å±•

ç®€å•æ¥è®²å°±æ˜¯ä»¥ä¸€ä¸ªæ•°æˆ–ä¸¤ä¸ªæ•°ä¸ºä¸­å¿ƒ, å‘å…¶ä¸¤ä¾§æ…¢æ…¢æ‰©å¼ 



è¿™ç§æ–¹æ³•è¿˜æ˜¯$O(n^2)$ ä¸è¿‡ç©ºé—´å¤æ‚åº¦æ›´ä½, ä¸ºO(1)

æ¯”å¦‚å¯¹ä¸€ä¸ªå­—ç¬¦ä¸² ababaï¼Œé€‰æ‹©æœ€ä¸­é—´çš„ a ä½œä¸ºä¸­å¿ƒç‚¹ï¼Œå¾€ä¸¤è¾¹æ‰©æ•£ï¼Œç¬¬ä¸€æ¬¡æ‰©æ•£å‘ç° left æŒ‡å‘çš„æ˜¯ bï¼Œright æŒ‡å‘çš„ä¹Ÿæ˜¯ bï¼Œæ‰€ä»¥æ˜¯å›æ–‡ä¸²ï¼Œç»§ç»­æ‰©æ•£ï¼ŒåŒç† ababa ä¹Ÿæ˜¯å›æ–‡ä¸²ã€‚

è¿™ä¸ªæ˜¯ç¡®å®šäº†ä¸€ä¸ªä¸­å¿ƒç‚¹åçš„å¯»æ‰¾çš„è·¯å¾„ï¼Œç„¶åæˆ‘ä»¬åªè¦å¯»æ‰¾åˆ°æ‰€æœ‰çš„ä¸­å¿ƒç‚¹ï¼Œé—®é¢˜å°±è§£å†³äº†ã€‚

ä¸­å¿ƒç‚¹ä¸€å…±æœ‰å¤šå°‘ä¸ªå‘¢ï¼Ÿçœ‹èµ·æ¥åƒæ˜¯å’Œå­—ç¬¦ä¸²é•¿åº¦ç›¸ç­‰ï¼Œä½†ä½ ä¼šå‘ç°ï¼Œå¦‚æœæ˜¯è¿™æ ·ï¼Œä¸Šé¢çš„ä¾‹å­æ°¸è¿œä¹Ÿæœä¸åˆ° ababï¼Œæƒ³è±¡ä¸€ä¸‹å•ä¸ªå­—ç¬¦çš„å“ªä¸ªä¸­å¿ƒç‚¹æ‰©å±•å¯ä»¥å¾—åˆ°è¿™ä¸ªå­ä¸²ï¼Ÿä¼¼ä¹ä¸å¯èƒ½ã€‚æ‰€ä»¥ä¸­å¿ƒç‚¹ä¸èƒ½åªæœ‰å•ä¸ªå­—ç¬¦æ„æˆï¼Œè¿˜è¦åŒ…æ‹¬ä¸¤ä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚ä¸Šé¢è¿™ä¸ªå­ä¸² ababï¼Œå°±å¯ä»¥æœ‰ä¸­å¿ƒç‚¹ ba æ‰©å±•ä¸€æ¬¡å¾—åˆ°ï¼Œæ‰€ä»¥æœ€ç»ˆçš„ä¸­å¿ƒç‚¹ç”± 2 * len - 1 ä¸ªï¼Œåˆ†åˆ«æ˜¯ ==$len$== ä¸ªå•å­—ç¬¦å’Œ ==$len - 1$== ä¸ªåŒå­—ç¬¦ã€‚

å¦‚æœä¸Šé¢çœ‹ä¸å¤ªæ‡‚çš„è¯ï¼Œè¿˜å¯ä»¥çœ‹çœ‹ä¸‹é¢å‡ ä¸ªé—®é¢˜ï¼š

â–¼ä¸ºä»€ä¹ˆæœ‰ 2 * len - 1 ä¸ªä¸­å¿ƒç‚¹ï¼Ÿ
aba æœ‰5ä¸ªä¸­å¿ƒç‚¹ï¼Œåˆ†åˆ«æ˜¯ aã€bã€cã€abã€ba
abba æœ‰7ä¸ªä¸­å¿ƒç‚¹ï¼Œåˆ†åˆ«æ˜¯ aã€bã€bã€aã€abã€bbã€ba
â–¼ä»€ä¹ˆæ˜¯ä¸­å¿ƒç‚¹ï¼Ÿ
ä¸­å¿ƒç‚¹å³ left æŒ‡é’ˆå’Œ right æŒ‡é’ˆåˆå§‹åŒ–æŒ‡å‘çš„åœ°æ–¹ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªä¹Ÿå¯èƒ½æ˜¯ä¸¤ä¸ª
â–¼ä¸ºä»€ä¹ˆä¸å¯èƒ½æ˜¯ä¸‰ä¸ªæˆ–è€…æ›´å¤šï¼Ÿ
å› ä¸º 3 ä¸ªå¯ä»¥ç”± 1 ä¸ªæ‰©å±•ä¸€æ¬¡å¾—åˆ°ï¼Œ4 ä¸ªå¯ä»¥ç”±ä¸¤ä¸ªæ‰©å±•ä¸€æ¬¡å¾—åˆ°

```js
/**
 * @param {string} s
 * @return {number}
 */
const countSubstrings = function (s) {
	const len = s.length;
	let count=0;
	for (let i = 0; i < 2 * len - 1; i++) {
		let left=i>>1;
		let right=left+i%2;
		while (left>=0&&right<len&&s[left]===s[right]){
			count++;
			left--;
			right++;
		}
	}
	return count;
}
```

æŒºå¿«çš„!

 <img src="D:\Study\FrontEnd\github_js_notes\FrontEnd_Notes\algorithms\Sword-for-offer\ä¸“é¢˜.assets\image-20210629205022178.png" alt="image-20210629205022178" style="zoom:125%;" />





#### â–¼ç¼–è¾‘è·ç¦»

#### [â˜…â˜…â˜…72. ç¼–è¾‘è·ç¦»](https://leetcode-cn.com/problems/edit-distance/)

éš¾åº¦å›°éš¾

ç»™ä½ ä¸¤ä¸ªå•è¯ `word1` å’Œ `word2`ï¼Œè¯·ä½ è®¡ç®—å‡ºå°† `word1` è½¬æ¢æˆ `word2` æ‰€ä½¿ç”¨çš„æœ€å°‘æ“ä½œæ•° ã€‚

ä½ å¯ä»¥å¯¹ä¸€ä¸ªå•è¯è¿›è¡Œå¦‚ä¸‹ä¸‰ç§æ“ä½œï¼š

- æ’å…¥ä¸€ä¸ªå­—ç¬¦
- åˆ é™¤ä¸€ä¸ªå­—ç¬¦
- æ›¿æ¢ä¸€ä¸ªå­—ç¬¦

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šword1 = "horse", word2 = "ros"
è¾“å‡ºï¼š3
è§£é‡Šï¼š
horse -> rorse (å°† 'h' æ›¿æ¢ä¸º 'r')
rorse -> rose  (åˆ é™¤ 'r')
rose -> ros    (åˆ é™¤ 'e')
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šword1 = "intention", word2 = "execution"
è¾“å‡ºï¼š5
è§£é‡Šï¼š
intention -> inention  (åˆ é™¤ 't')
inention -> enention   (å°† 'i' æ›¿æ¢ä¸º 'e')
enention -> exention   (å°† 'n' æ›¿æ¢ä¸º 'x')
exention -> exection   (å°† 'n' æ›¿æ¢ä¸º 'c')
exection -> execution  (æ’å…¥ 'u')
```

 

**æç¤ºï¼š**

- `0 <= word1.length, word2.length <= 500`
- `word1` å’Œ `word2` ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ



æ€è·¯
**1.åŠ¨æ€è§„åˆ’**

**2.å®šä¹‰ dp[i] [j]**

21. dp[i] [j] ä»£è¡¨ word1 ä¸­å‰ i ä¸ªå­—ç¬¦ï¼Œå˜æ¢åˆ° word2 ä¸­å‰ j ä¸ªå­—ç¬¦ï¼Œæœ€çŸ­éœ€è¦æ“ä½œçš„æ¬¡æ•°
22. éœ€è¦è€ƒè™‘ word1 æˆ– word2 ä¸€ä¸ªå­—æ¯éƒ½æ²¡æœ‰ï¼Œå³å…¨å¢åŠ /åˆ é™¤çš„æƒ…å†µï¼Œæ‰€ä»¥é¢„ç•™ dp[0] [j] å’Œ dp[i] [0]

**3.çŠ¶æ€è½¬ç§»**

31. å¢ï¼Œ$dp[i] [j]$ = $dp[i] [j - 1]$ + 1
32. åˆ ï¼Œ$dp[i] [j]$ = $dp[i - 1] [j]$ + 1
33. æ”¹ï¼Œ$dp[i] [j]$ = $dp[i - 1] [j - 1]$ + 1
34. æŒ‰é¡ºåºè®¡ç®—ï¼Œå½“è®¡ç®— dp[i] [j] æ—¶ï¼Œdp[i - 1] [j] ï¼Œ dp[i] [j - 1] ï¼Œ dp[i - 1] [j - 1] å‡å·²ç»ç¡®å®šäº†
35. é…åˆå¢åˆ æ”¹è¿™ä¸‰ç§æ“ä½œï¼Œéœ€è¦å¯¹åº”çš„ dp æŠŠæ“ä½œæ¬¡æ•°åŠ ä¸€ï¼Œå–ä¸‰ç§çš„æœ€å°
36. å¦‚æœåˆšå¥½è¿™ä¸¤ä¸ªå­—æ¯ç›¸åŒ word1[i - 1] = word2[j - 1] ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥å‚è€ƒ dp[i - 1] [j - 1] ï¼Œæ“ä½œä¸ç”¨åŠ ä¸€



**â–¼å¢:è¡¨ç¤ºword1å‰iä¸ªå­—ç¬¦å¯ä»¥é€šè¿‡$dp[i][j-1]$æ¬¡æ“ä½œæ„æˆword2çš„å‰j-1ä¸ªå­—ç¬¦ã€‚è‹¥è¦æ„æˆword2å‰jä¸ªå­—ç¬¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨$dp[i][j-1]$çš„åŸºç¡€ä¸Šè¿›è¡Œä¸€æ¬¡æ·»åŠ å­—ç¬¦word[j]çš„æ“ä½œå³å¯!!!**

**â–¼åˆ :è¡¨ç¤ºword1å‰$i-1$ä¸ªå­—ç¬¦å¯ä»¥é€šè¿‡$dp[i-1][j]$æ¬¡æ“ä½œæ„æˆword2çš„å‰$j$ä¸ªå­—ç¬¦ã€‚æ­¤æ—¶å·²ç»èƒ½å¤Ÿè¾¾åˆ°$dp[i][j]$çš„ç›®æ ‡äº†, ä½†æ˜¯$dp[i][j]$æ¯”$dp[i-1][j]$å¤šéœ€è¦ä¸€ä¸ªword1[i], å› æ­¤è¿›è¡Œä¸€æ¬¡åˆ å»word1[i]çš„æ“çºµ**

**â–¼æ”¹:å¯¹åº”word1[i]å’Œword2[j], æˆ‘ä»¬ç›´æ¥æŠŠword[i]æ”¹ä¸ºword[j], ä¸ä¸€å®šæ˜¯æ”¹å“¦, ä¸‡ä¸€ä¸€æ¨¡ä¸€æ ·å°±ä¸éœ€è¦æ”¹äº†, å› æ­¤è¦è€ƒè™‘æ˜¯å¦ä¸€æ ·!**

 <img src="ä¸“é¢˜.assets/image-20210330121154860.png" alt="image-20210330121154860" style="zoom:67%;" />



**æ—¶é—´å¤æ‚åº¦: O(n^2^)**

**ç©ºé—´å¤æ‚åº¦: O(n^2^)**

(ä¸Šé¢çš„å†™æˆ$O(MN)$ä¹Ÿæ˜¯å¯ä»¥çš„)

```js
/**
 * @param {string} word1
 * @param {string} word2
 * @return {number}
 */
const minDistance = function(word1, word2){
	const len1=word1.length,len2=word2.length;
  //word1æ˜¯rowç«–ç€çš„, word2æ˜¯columnæ¨ªç€çš„
	const dp=Array.from({length:len1+1},()=>Array(len2+1).fill(0));
  //dp[i][j]è¡¨ç¤ºword1å‰iä¸ªå­—ç¬¦å’Œword2å‰jä¸ªå­—ç¬¦ä¹‹é—´çš„æœ€å°è·ç¦»
  //dp[0][j]è¡¨ç¤ºçš„æ˜¯word1ä¸ºç©ºæ—¶çš„ç¼–è¾‘è·ç¦»
	for (let i = 1; i <= len1; i++) {
		dp[i][0]=i;
	}
	for (let i = 1; i <= len2; i++) {
		dp[0][i]=i;
	}
  //æœ‰ä¸‰ç§æƒ…å†µ,ä¾æ¬¡è¿›è¡Œåˆ¤æ–­
	for (let i = 1; i <= len1; i++) {
		for (let j = 1; j <= len2; j++) {
			dp[i][j]=Math.min(dp[i][j-1]+1,dp[i-1][j]+1,dp[i-1][j-1]+
				!(word1[i-1]===word2[j-1]))
		}
	}
	return dp[len1][len2];
}
```



ğŸŒŸå…³é”®è¿˜æ˜¯çŠ¶æ€è½¬ç§»æ–¹ç¨‹çš„ç†è§£ !



##### â˜…â˜…ç‰¹æ®Šçš„ç¼–è¾‘è·ç¦»

åœ¨è‡ªç„¶è¯­è¨€å¤„ç†çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸éœ€è¦åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²å’Œå¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²ä¹‹é—´çš„ä¸€ä¸ªç›¸ä¼¼ç¨‹åº¦ï¼Œå…¶ä¸­å¸¸è§çš„ä¸€ä¸ªæŒ‡æ ‡å°±æ˜¯ç¼–è¾‘è·ç¦»ï¼Œå³ä¸€ä¸ªå­—ç¬¦ä¸²æœ€å°‘ç»è¿‡å¤šå°‘æ¬¡â€œå¢åˆ æ”¹â€æŸä¸ªå­—ç¬¦ï¼Œå¯ä»¥å˜ä¸ºå¦ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

å¦‚â€œabcâ€ä¸â€œacâ€çš„ç¼–è¾‘è·ç¦»ä¸º1ï¼Œæ˜¯å› ä¸ºåœ¨aå’Œcä¸­é—´â€œå¢åŠ â€ä¸€ä¸ªbå³å¯ã€‚å¦‚â€œabcdâ€ä¸â€œaxcâ€çš„ç¼–è¾‘è·ç¦»ä¸º2ï¼Œæ˜¯å› ä¸ºæŠŠâ€œabcdâ€çš„bä¿®æ”¹ä¸ºxï¼Œç„¶åå†åˆ é™¤då³å¯ï¼Œå…±2æ¬¡æ“ä½œã€‚

ä½†æ˜¯åœ¨æŸç§åœºæ™¯ä¸­ï¼Œç¼–è¾‘è·ç¦»å®šä¹‰ä¸ºè¯ç²’åº¦çš„ã€‚æ¯”å¦‚å¥å­A â€œI am a coderâ€ä¸å¥å­B â€œhello ,  I am a singerâ€ä¹‹é—´ï¼Œå¯¹äºå¥å­Aå¯ä»¥é€šè¿‡æ·»åŠ "hello"å’Œç¬¦å·",",  å¹¶æ›¿æ¢"coder"ä¸º"singer"ï¼Œå…±3ä¸ªæ“ä½œå¾—åˆ°å¥å­Bã€‚æ‰€ä»¥å¯å¾—å…¶åŸºæœ¬çš„ç¼–è¾‘è·ç¦»ä¸º3ã€‚

åœ¨æœ¬é¢˜ä¸­ï¼Œç‰¹åˆ«åœ°ï¼Œå¯¹äºéƒ¨åˆ†è¯ï¼Œæ¯”å¦‚æ ‡ç‚¹ç¬¦å·â€œ, â€ã€"hello"å¯¹äºå¥å­è¯­ä¹‰çš„å½±å“å¹¶ä¸é‡è¦ï¼Œè¿™éƒ¨åˆ†ç§°ä¹‹ä¸ºåœç”¨è¯ï¼Œè¿™éƒ¨åˆ†å¯ä»¥åœ¨åŒ¹é…çš„è¿‡ç¨‹ä¸­è¢«è·³è¿‡ã€‚æ¯”å¦‚å¯¹äºå¥å­A â€œI am a coderâ€ä¸å¥å­B â€œhello ,  I am a singerâ€ï¼Œå¦‚æœåŠ å…¥äº†åœç”¨è¯çš„å½±å“ï¼Œé‚£ç¼–è¾‘è·ç¦»ä»3é™åˆ°1ã€‚

æ‰€ä»¥ç›®æ ‡æ˜¯å¯ä»¥æœ‰é€‰æ‹©æ€§åœ°è·³è¿‡åœç”¨è¯çš„æƒ…å†µä¸‹ï¼Œé—®æœ€å°çš„ç¼–è¾‘è·ç¦»æ˜¯å¤šå°‘ã€‚



**è¾“å…¥æè¿°:**

```
å…±3è¡Œ
ç¬¬ä¸€è¡Œä¸ºåœç”¨è¯åˆ—è¡¨ï¼Œç”¨ç©ºæ ¼åŒºåˆ†
ç¬¬äºŒè¡Œä¸ºå¥å­Aï¼Œæ‰€æœ‰è¯å¯ä»¥ç”¨ç©ºæ ¼åŒºåˆ†ï¼Œè¯æ•°ä¸è¶…è¿‡10000
ç¬¬ä¸‰è¡Œä¸ºå¥å­Bï¼Œæ‰€æœ‰è¯å¯ä»¥ç”¨ç©ºæ ¼åŒºåˆ†ï¼Œè¯æ•°ä¸è¶…è¿‡10000
```



**è¾“å‡ºæè¿°:**

```
ä¸€ä¸ªæ•´æ•°ï¼Œå¯è·³è¿‡åœç”¨è¯æƒ…å†µä¸‹çš„æœ€çŸ­ç¼–è¾‘è·ç¦»
```



**è¾“å…¥ä¾‹å­1:**

```
hello ,
I am a coder
hello ,  I am a singer
```



**è¾“å‡ºä¾‹å­1:**

```
1
```





å°±æ˜¯ç¼–è¾‘è·ç¦»çš„æ¨¡æ¿...

```js
const readline=require('readline');
const rl=readline.createInterface({
    input:process.stdin,
    output:process.stdout
})
const arr=[];
rl.on('line',function(line){
    arr.push(line);
    if(arr.length===3){
        let ban=arr[0].trim().split(' ');
        let s1=arr[1].trim().split(' ').filter(v=>!ban.includes(v));
        let s2=arr[2].trim().split(' ').filter(v=>!ban.includes(v));
        let len1=s1.length,len2=s2.length;
        let dp=Array.from({length:len1+1},()=>Array(len2+1));
        dp[0][0]=0;
        for(let i=1;i<=len1;i++) {dp[i][0]=i}
        for(let j=1;j<=len2;j++) {dp[0][j]=j}
        
        for(let i=1;i<=len1;i++){
            for(let j=1;j<=len2;j++){
                dp[i][j]=Math.min(dp[i][j-1]+1,dp[i-1][j]+1,dp[i-1][j-1]+!(s1[i-1]===s2[j-1]))
            }
        }
        console.log(dp[len1][len2]);
        
        //before next
        arr.length=0;
    }
})


```







#### â–¼æ ‘å½¢dp

#### â˜…â˜…â˜…æœ€ä¼˜äºŒå‰æ ‘

é“¾æ¥ï¼šhttps://www.nowcoder.com/questionTerminal/0d939e874a004f449a370aca1346dd5c?answerType=1&f=discussion
æ¥æºï¼šç‰›å®¢ç½‘



å°å›¢æœ‰ä¸€ä¸ªç”±Nä¸ªèŠ‚ç‚¹ç»„æˆçš„äºŒå‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸€ä¸ªæƒå€¼ã€‚å®šä¹‰äºŒå‰æ ‘æ¯æ¡è¾¹çš„å¼€é”€ä¸ºå…¶ä¸¤ç«¯èŠ‚ç‚¹æƒå€¼çš„ä¹˜ç§¯ï¼ŒäºŒå‰æ ‘çš„æ€»å¼€é”€å³æ¯æ¡è¾¹çš„å¼€é”€ä¹‹å’Œã€‚å°å›¢æŒ‰ç…§äºŒå‰æ ‘çš„ä¸­åºéå†ä¾æ¬¡è®°å½•ä¸‹æ¯ä¸ªèŠ‚ç‚¹çš„æƒå€¼ï¼Œå³ä»–è®°å½•ä¸‹äº†Nä¸ªæ•°ï¼Œç¬¬iä¸ªæ•°è¡¨ç¤ºä½äºä¸­åºéå†ç¬¬iä¸ªä½ç½®çš„èŠ‚ç‚¹çš„æƒå€¼ã€‚ä¹‹åç”±äºæŸç§åŸå› ï¼Œå°å›¢é—å¿˜äº†äºŒå‰æ ‘çš„å…·ä½“ç»“æ„ã€‚åœ¨æ‰€æœ‰å¯èƒ½çš„äºŒå‰æ ‘ä¸­ï¼Œæ€»å¼€é”€æœ€å°çš„äºŒå‰æ ‘è¢«ç§°ä¸ºæœ€ä¼˜äºŒå‰æ ‘ã€‚ç°åœ¨ï¼Œå°å›¢è¯·å°ç¾æ±‚å‡ºæœ€ä¼˜äºŒå‰æ ‘çš„æ€»å¼€é”€ã€‚  



**è¾“å…¥æè¿°:**

```
ç¬¬ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ•´æ•°Nï¼ˆ1<=N<=300ï¼‰ï¼Œè¡¨ç¤ºäºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°ã€‚ç¬¬äºŒè¡Œè¾“å…¥Nä¸ªç”±ç©ºæ ¼éš”å¼€çš„æ•´æ•°ï¼Œè¡¨ç¤ºæŒ‰ä¸­åºéå†è®°å½•ä¸‹çš„å„ä¸ªèŠ‚ç‚¹çš„æƒå€¼ï¼Œæ‰€æœ‰æƒå€¼å‡ä¸ºä¸è¶…è¿‡1000çš„æ­£æ•´æ•°ã€‚
```



**è¾“å‡ºæè¿°:**

```
è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€ä¼˜äºŒå‰æ ‘çš„æ€»å¼€é”€ã€‚
```

ç¤ºä¾‹1

è¾“å…¥

```
5
7 6 5 1 3
```

è¾“å‡º

```
45
```

è¯´æ˜

```
æœ€ä¼˜äºŒå‰æ ‘å¦‚å›¾æ‰€ç¤ºï¼Œæ€»å¼€é”€ä¸º7*1+6*5+5*1+1*3=45ã€‚
```



**ğŸ¥¶çµé­‚æ‹·é—®:**

1. ä¸ºä»€ä¹ˆè¦ç”¨dp?  å› ä¸ºæˆ‘ä»¬åªçŸ¥é“ä¸€ä¸ªä¸­åºéå†çš„åºåˆ—, è€Œè¿™æœ‰å¾ˆå¤šç§ç»„åˆ, å› æ­¤æˆ‘ä»¬é‡‡ç”¨dpæ¥è®¡ç®—æ¯ä¸€ç§ç»„åˆä»è€Œå¾—åˆ°æœ€ä¼˜çš„å€¼
2. ä¸ºä»€ä¹ˆä½¿ç”¨dfs?  å› ä¸ºè¿™é‡Œæ˜¯ä¸€ä¸ªäºŒå‰æ ‘çš„ä¸­åºéå†åºåˆ—, å› æ­¤è¦å¾—åˆ°æ‰€æœ‰çš„æ ‘çš„ç±»å‹éœ€è¦é‡‡ç”¨dfs



ç¾å›¢ä¸å½“äººç³»åˆ—...  äºŒå‰æ ‘+dp, è¿˜æ˜¯ä¸‰ç»´dp, æ ‘è¿˜è¦è€ƒè™‘è™šæ‹ŸèŠ‚ç‚¹, è€Œä¸”æ ‘æœ‰ä¸‰å±‚ç»“æ„

 <img src="æ ¡æ‹›ç¬”è¯•.assets/image-20210406154139283.png" alt="image-20210406154139283" style="zoom: 50%;" />

ğŸŒŸæ³¨æ„å“¦! è¿™é‡Œçš„parentå±äºè€çš„æ ¹èŠ‚ç‚¹(dfså‚æ•°ä¸­çš„é‚£ä¸ª), rootå±äºæ–°çš„æ ¹èŠ‚ç‚¹(forå¾ªç¯é‡Œçš„é‚£ä¸ª)ã€‚æˆ–è€…å¯ä»¥è¿™ä¹ˆç†è§£ <span style="font-weight:bold; color:red;">parentæ˜¯çœŸæ­£çš„æ ¹èŠ‚ç‚¹, rootæ˜¯parentä¸€ä¸ªå­æ ‘çš„æ ¹èŠ‚ç‚¹ </span>

æˆ‘ä»¬æœ€åè¿”å›çš„ $dp[5][5][4]$ æ˜¯ä»¥ $1(index:4)$ ä¸ºæ ¹èŠ‚ç‚¹çš„è®¡ç®—çš„å³å­æ ‘çš„æ€»å¼€é”€ $right$ 

ğŸš©$dp[low][high][root]$è¡¨ç¤ºä»¥rootä¸ºæ ¹èŠ‚ç‚¹, å…¶å·¦/å³å­æ ‘èŠ‚ç‚¹èŒƒå›´åœ¨data[low,high]å†…çš„æœ€å°å¼€é”€(å·¦æˆ–è€…å³,åªæœ‰ä¸€è¾¹)





```js
const readLine=require('readline');
const rl=readLine.createInterface({
	input:process.stdin,
	output:process.stdout
})
const arr=[];
rl.on('line',line=>{
	arr.push(line);
	if (arr.length===2){
		const len=Number(arr[0]);
		const weights=arr[1].trim().split(' ').map(Number);
		weights.unshift(0);
    
    //1.dp[low][high][root]è¡¨ç¤ºä»¥rootä¸ºæ ¹èŠ‚ç‚¹,
    //å…¶å·¦/å³å­æ ‘èŠ‚ç‚¹èŒƒå›´åœ¨data[low,high]å†…çš„æœ€å°å¼€é”€(å·¦æˆ–è€…å³,åªæœ‰ä¸€è¾¹)
    //2.len+1æ˜¯å› ä¸ºéœ€è¦æœ‰ä¸€ä¸ªè™šæ‹Ÿçš„æ ¹èŠ‚ç‚¹
		const dp=Array.from({length:len+1},
			()=>Array.from({length:len+1},
				()=>Array(len+1).fill(-1)));

		const dfs=(low,high,root)=>{
			if (low>high) return 0;
      //å¦‚æœè®¿é—®è¿‡åˆ™ç›´æ¥è¿”å›
			if (dp[low][high][root]!==-1) return dp[low][high][root];
			let cost=Infinity;
      //åœ¨low~highæ¯ä¸ªä½ç½®éƒ½æœ‰å¯èƒ½ä½œä¸ºå­æ ‘æ ¹èŠ‚ç‚¹
			for (let i = low; i <= high; i++) {
				let leftCost=dfs(low,i-1,i);
				let rightCost=dfs(i+1,high,i);
				cost=Math.min(cost,leftCost+rightCost+weights[i]*weights[root]);
			}
			return dp[low][high][root]=cost;
		}
		console.log(dfs(1,len,0));

		//next
		arr.length=0;
	}
})
```



* ä¸­åºéå†çš„è¯å¦‚æœä»¥ $i$ ä¸ºæ ¹èŠ‚ç‚¹, åˆ™ä¸­åºéå†åºåˆ—ä¸­å·¦è¾¹æ˜¯å·¦å­æ ‘, å³è¾¹æ˜¯å³å­æ ‘

* $dp[1][len][0]$ è¡¨ç¤ºçš„å°±æ˜¯ä»¥è™šæ‹ŸèŠ‚ç‚¹ 0 ä¸ºæ ¹èŠ‚ç‚¹, å…¶å·¦ or å³å­æ ‘èŒƒå›´åœ¨ $[1,len]$ é‡Œéœ€è¦çš„æœ€å°å¼€é”€

* è¿™é‡Œçš„ $w[i]$ è¡¨ç¤ºä½œä¸ºå­æ ‘æ ¹ç»“ç‚¹çš„æƒå€¼, è€Œ $w[root]$ åˆ™æ˜¯æ ¹èŠ‚ç‚¹çš„æƒå€¼, è®¡ç®—çš„costæ˜¯ä»¥rootä¸º==æ ¹èŠ‚ç‚¹==, iä¸º==å­æ ‘æ ¹èŠ‚ç‚¹==å¾—åˆ°çš„æœ€å°å¼€é”€

* â—æ³¨æ„é€’å½’å¾ˆå®¹æ˜“é‡å¤è®¡ç®—, è¿™é‡Œå¦‚æœå·²ç»è®¡ç®—è¿‡åˆ™ä¸ç”¨å†è®¡ç®—!!!

  



#### ğŸ’Summary: 

2021/6/30

* å¹¸è¿æ•°å­—å¹¶ä¸æ˜¯åŠ¨æ€è§„åˆ’, åªæ˜¯å…ˆè®¡ç®—å‡ºæ‰€æœ‰çš„å’Œç„¶åæ…¢æ…¢æ‰’å…‰! ä½†æ˜¯è¿™ç§æ€æƒ³è¿˜æ˜¯å¬å¥‡ç‰¹çš„! ä¸»è¦é’ˆå¯¹äºéœ€è¦è·å–æ‰€æœ‰çš„æ’åˆ—ç»„åˆç±»å‹ä¸”ä¸é™åˆ¶ä¸ªæ•°çš„é¢˜
* å‡æœŸæ˜¯å¾ˆæ˜æ˜¾çš„åŠ¨æ€è§„åˆ’ï¼ä¸è¿‡è¿™é‡Œéœ€è¦å·¥ä½œï¼Œå¥èº«ï¼Œä¼‘æ¯ä¸‰çº¿å¹¶è¡Œæœ€åå†æ¥æ¯”è¾ƒ
* å›æ–‡ä¸²å’Œç¼–è¾‘è·ç¦»ä¹Ÿæ˜¯ç»å…¸çš„dpï¼Œ æœ€éš¾æƒ³çš„è¿˜æ˜¯çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼æ‰€ä»¥å¤šç»ƒç»ƒå°±å¥½ï¼
* æœ€ä¼˜äºŒå‰æ ‘å¾ˆç‰¹æ®Šçš„ä¸€é“é¢˜ï¼Œè™šæ‹ŸèŠ‚ç‚¹ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼ˆä¸‰ç»´dpæ•°ç»„ï¼‰ï¼Œdfséƒ½æ˜¯éš¾ç‚¹ï¼







## ä½è¿ç®—



#### [â˜…â˜…1371. æ¯ä¸ªå…ƒéŸ³åŒ…å«å¶æ•°æ¬¡çš„æœ€é•¿å­å­—ç¬¦ä¸²](https://leetcode-cn.com/problems/find-the-longest-substring-containing-vowels-in-even-counts/)

éš¾åº¦ä¸­ç­‰

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œè¯·ä½ è¿”å›æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„æœ€é•¿å­å­—ç¬¦ä¸²çš„é•¿åº¦ï¼šæ¯ä¸ªå…ƒéŸ³å­—æ¯ï¼Œå³ 'a'ï¼Œ'e'ï¼Œ'i'ï¼Œ'o'ï¼Œ'u' ï¼Œåœ¨å­å­—ç¬¦ä¸²ä¸­éƒ½æ°å¥½å‡ºç°äº†å¶æ•°æ¬¡ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "eleetminicoworoep"
è¾“å‡ºï¼š13
è§£é‡Šï¼šæœ€é•¿å­å­—ç¬¦ä¸²æ˜¯ "leetminicowor" ï¼Œå®ƒåŒ…å« eï¼Œiï¼Œo å„ 2 ä¸ªï¼Œä»¥åŠ 0 ä¸ª aï¼Œu ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "leetcodeisgreat"
è¾“å‡ºï¼š5
è§£é‡Šï¼šæœ€é•¿å­å­—ç¬¦ä¸²æ˜¯ "leetc" ï¼Œå…¶ä¸­åŒ…å« 2 ä¸ª e ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šs = "bcbcbc"
è¾“å‡ºï¼š6
è§£é‡Šï¼šè¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå­—ç¬¦ä¸² "bcbcbc" æœ¬èº«å°±æ˜¯æœ€é•¿çš„ï¼Œå› ä¸ºæ‰€æœ‰çš„å…ƒéŸ³ aï¼Œeï¼Œiï¼Œoï¼Œu éƒ½å‡ºç°äº† 0 æ¬¡ã€‚
```

 

**æç¤ºï¼š**

- `1 <= s.length <= 5 x 10^5`
- `s` åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯ã€‚





â–¼5ä¸ªå­—æ¯ï¼Œ å¯»æ‰¾å‡ºç°äº†å¶æ•°æ¬¡çš„æœ€å¤§å­ä¸²ã€‚è¿™é‡Œå¾ˆéš¾é€šè¿‡ä¸€èˆ¬çš„æ–¹æ³•è§£ç­”ï¼Œ å› ä¸ºå¦‚æœæ‰¾å‡ºæ‰€æœ‰å­ä¸²ï¼Œæ—¶é—´å¤æ‚åº¦å¤ªé«˜ï¼Œæ‰¾å‡ºæ¥$O(n^2)$ç„¶åè¿˜è¦å¯¹æ¯ä¸ªå­ä¸²è¿›è¡Œåˆ¤æ–­å…ƒéŸ³å­—æ¯çš„ä¸ªæ•°

ğŸŒŸå› æ­¤æ—¢ç„¶æ˜¯äº”ä¸ªå­—æ¯, çŠ¶æ€åªæœ‰ä¸¤ç§:å¥‡æ•°ä¸ªorå¶æ•°ä¸ª, é‚£ä¹ˆæˆ‘ä»¬å¾ˆå®¹æ˜“å°±è”æƒ³åˆ°ä½è¿ç®—ã€‚5ä¸ªå­—æ¯å¯ä»¥å¯¹åº”32ç§çŠ¶æ€, é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è®°å½•æ¯ä¸€ç§çŠ¶æ€ã€‚ç„¶åæˆ‘ä»¬å‘ç°

â–¼å¯¹äºä»£ç ä¸­ä¸€äº›å˜é‡çš„è§£é‡Š

è¿™é‡Œç”±äºåªè€ƒè™‘æ¯ä¸ªå…ƒéŸ³å¥‡å¶æ¬¡æ•°ï¼Œå› æ­¤è€ƒè™‘ç”¨äºŒè¿›åˆ¶æ¥è®°å½•ï¼›

å®šä¹‰ç‰¹å¾ï¼Œaeiou åˆ†åˆ«å¯¹åº”äºŒè¿›åˆ¶ 10000ï¼Œ01000ï¼Œ00100ï¼Œ00010ï¼Œ00001
å…¶ä¸­ 0 è¡¨ç¤ºå¯¹åº”å…ƒéŸ³å‡ºç°äº†å¶æ•°æ¬¡æ•°ï¼Œ1 è¡¨ç¤ºå¥‡æ•°
ä»å·¦å¾€å³éå†å­—ç¬¦ä¸²ï¼Œä¸æ–­æ›´æ–° dpï¼›

dp[pattern] çš„ä½œç”¨æ˜¯ç”¨æ¥è®°å½•å½“å‰ç´¢å¼•å€¼ä¸‹å¯¹åº”çš„å…ƒéŸ³å¥‡å¶æ¬¡æ•°ç»„åˆç‰¹å¾ï¼›
ä¾‹å¦‚ï¼šå¦‚æœ pattern ä¸º 10ï¼Œä¹Ÿå°±æ˜¯å¯¹åº”äºŒè¿›åˆ¶ 01010ï¼Œdp[pattern] = 8 çš„æ„æ€ä¸ºï¼Œå½“ç´¢å¼•å€¼ä¸º 8 çš„æ—¶å€™ï¼Œe å’Œ o éƒ½å‡ºç°äº†å¥‡æ•°æ¬¡ï¼Œå…¶å®ƒå…ƒéŸ³ä¸ºå¶æ•°æ¬¡ã€‚



â–¼å¦‚ä½•æ‰¾åˆ°ç¬¦åˆæ¡ä»¶æœ€å¤§é•¿åº¦ï¼Ÿ

æ ¹æ®å¼‚æˆ–è¿ç®—è§„å¾‹ï¼Œå¼‚æˆ–æœ¬èº«ä¸º 0ï¼Œæ‰€ä»¥å½“é‡å¤å‡ºç°å¶æ•°æ¬¡ï¼Œå¯¹åº”ä½å˜ä¸º 0ï¼Œå¦åˆ™ä¸º 1
ç”±è¿™ä¸ªè§„å¾‹å¯ä»¥æ–­å®šï¼Œå½“å†æ¬¡å‡ºç°è¿™ä¸ª pattern çš„æ—¶å€™ï¼Œä»æœ€åˆçš„patternåˆ°å†æ¬¡å‡ºç°çš„ç›¸åŒçš„patternä¹‹é—´çš„å…ƒéŸ³å­—ç¬¦ä¸€å®šå‡ºç°äº†å¶æ•°æ¬¡

ä¸ºäº†æ–¹ä¾¿è§£é‡Šï¼Œpattern å¦‚ä¸‹ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºï¼š
ä¾‹å¦‚ï¼Œpattern çš„å€¼å˜åŒ–ä¸º 31-->30-->28-->29-->31
å¯¹åº”çš„äºŒè¿›åˆ¶ä½ [11111]-->[11110]-->[11100]-->[11101]-->[11111]
ä¸€ä¸ªåˆç†çš„å­—ç¬¦ä¸²å˜åŒ–ï¼šaeiou --> aeiouu -->aeiouuo-->aeiouuou-->aeiouuouo
ç”±æ­¤å¯è§ï¼Œä» aeiou åˆ° aeiouuouo è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¤šä½™å‡ºæ¥çš„ uouo ä¸ºç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²
æ‰€ä»¥ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸ç®¡ä¸­é—´å‘ç”Ÿäº†ä»€ä¹ˆæ ·çš„å˜åŒ–ï¼Œè¿™ä¸¤ä¸ªçŠ¶æ€ä¹‹é—´å¯¹åº”çš„å…ƒéŸ³ä¸ºå¶æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸€å®šç¬¦åˆé¢˜æ„çš„å­—ç¬¦ä¸²
å› æ­¤ï¼Œä¸æ–­æ›´æ–° resï¼Œæ¥è·å¾—æœ€å¤§å­—ç¬¦ä¸²é•¿åº¦



ğŸš©$dp[pattern]$ è¡¨ç¤º $pattern$ åœ¨ s ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½® !  $dp[0]$ è®¾ç½®ä¸º -1 (ä¸¾ä¸ªä¾‹å­å°±å¯ä»¥ç†è§£! )

**æ—¶é—´å¤æ‚åº¦: O(n):**

```js
/**
 * @param {string} s
 * @return {number}
 */
const findTheLongestSubstring = function(s) {
	let dp=new Array(32).fill(-Infinity);
	dp[0]=-1;  //è¾…åŠ©è®¡ç®—
	//dpè®°å½•32ç§çŠ¶æ€å¯¹åº”çš„ç´¢å¼•
	//dp[pattern]=i è¡¨ç¤ºè¯¥ç§patternç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®(dpä»1å¼€å§‹)
	let pattern=0,max=0;
	for(let i=0;i<s.length;i++){
		//ä»0å¼€å§‹å¼‚æˆ–, å‡ºç°å¶æ¬¡ä¸º0, å¥‡æ•°æ¬¡ä¸º1
		switch(s[i]){
			case 'a': pattern^=(1<<4)
				break;
			case 'e': pattern^=(1<<3)
				break;
			case 'i': pattern^=(1<<2)
				break;
			case 'o': pattern^=(1<<1)
				break;
			case 'u': pattern^=(1<<0)
				break;
		}
		if(dp[pattern]!==-Infinity){  //å¦‚æœå‡ºç°è¿‡è¯¥pattern
			//è¿™é‡Œå‡ºç°0ä¹Ÿæ²¡é—®é¢˜, å› ä¸ºæˆ‘ä»¬æå‰è®¾ç½®äº†dp[0]=-1
			//å‡è®¾i=0,s[0]æ˜¯ä¸€ä¸ªè¾…éŸ³å­—æ¯,é‚£ä¹ˆ0-(-1)=1, max=1
			max=Math.max(max,i-dp[pattern]);
		}else{
			dp[pattern]=i;
		}
	}
	return max;
};
```

ğŸ’è¿™é‡Œçš„  (1<<4) ä¹Ÿå¯ä»¥ç›´æ¥å†™æˆäºŒè¿›åˆ¶ $0b10000$  or  $0B10000$

äºŒåˆ·æ€è€ƒï¼š

1.å¯¹äºäº”ä¸ªå…ƒéŸ³çš„ç»„æˆæ–¹å¼é‡‡ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œå…±æœ‰32ç§ç»„åˆã€‚ä¸ºä»€ä¹ˆdp[0]è¦æå‰èµ‹å€¼ä¸º -1? å› ä¸ºåªè¦å‡ºç°äº†patternä¸º0, é‚£ä¹ˆè¯´æ˜æ•´ä¸ªå­å­—ç¬¦ä¸²éƒ½æ»¡è¶³æ¡ä»¶! æ­¤æ—¶çš„ len=i+1 ä¹Ÿå°±æ˜¯ i- (-1) !

2.å¼‚æˆ–çš„æ–¹å¼æ¥å¾—åˆ°å¶æ¬¡çš„æ€æƒ³å¾ˆå¸¸ç”¨!





## æ ‘



#### [â˜…104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦](https://leetcode-cn.com/problems/maximum-depth-of-binary-tree/)

éš¾åº¦ç®€å•

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾å‡ºå…¶æœ€å¤§æ·±åº¦ã€‚

äºŒå‰æ ‘çš„æ·±åº¦ä¸ºæ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°ã€‚

**è¯´æ˜:** å¶å­èŠ‚ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚

**ç¤ºä¾‹ï¼š**
ç»™å®šäºŒå‰æ ‘ `[3,9,20,null,null,15,7]`ï¼Œ

```
    3
   / \
  9  20
    /  \
   15   7
```

è¿”å›å®ƒçš„æœ€å¤§æ·±åº¦ 3 ã€‚





**â–¼æ·±åº¦ä¼˜å…ˆéå†**

å¤æ‚åº¦åˆ†æ

æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ nä¸ºäºŒå‰æ ‘èŠ‚ç‚¹çš„ä¸ªæ•°ã€‚æ¯ä¸ªèŠ‚ç‚¹åœ¨é€’å½’ä¸­åªè¢«éå†ä¸€æ¬¡ã€‚

ç©ºé—´å¤æ‚åº¦ï¼š$O(height)$ï¼Œå…¶ä¸­ height è¡¨ç¤ºäºŒå‰æ ‘çš„é«˜åº¦ã€‚é€’å½’å‡½æ•°éœ€è¦æ ˆç©ºé—´ï¼Œè€Œæ ˆç©ºé—´å–å†³äºé€’å½’çš„æ·±åº¦ï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦ç­‰ä»·äºäºŒå‰æ ‘çš„é«˜åº¦ã€‚

```js
var maxDepth = function(root) {
    if(!root) return 0
    return Math.max(maxDepth(root.left),maxDepth(root.right))+1;
};
```



**â–¼å¹¿åº¦ä¼˜å…ˆéå†**

å¤æ‚åº¦åˆ†æ

æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ n ä¸ºäºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°ã€‚ä¸æ–¹æ³•ä¸€åŒæ ·çš„åˆ†æï¼Œæ¯ä¸ªèŠ‚ç‚¹åªä¼šè¢«è®¿é—®ä¸€æ¬¡ã€‚

ç©ºé—´å¤æ‚åº¦ï¼šæ­¤æ–¹æ³•ç©ºé—´çš„æ¶ˆè€—å–å†³äºé˜Ÿåˆ—å­˜å‚¨çš„å…ƒç´ æ•°é‡ï¼Œå…¶åœ¨æœ€åæƒ…å†µä¸‹ä¼šè¾¾åˆ° O(n)O(n)ã€‚



```js
var maxDepth = function(root) {
    if(!root) return 0;

    let queue=[root];
    let depth=0;
    while(queue.length){
        for(let i=queue.length;i>0;i--){
            let node=queue.shift();
            if(node.left) queue.push(node.left)
            if(node.right) queue.push(node.right)
        }
        depth++;
    }
    return depth;
};
```





## æ ˆçš„åº”ç”¨

è¿™é‡Œä¸€èˆ¬æ˜¯æŒ‡éœ€è¦æ ˆæ¥è®°å½•ä¸€äº›é‡è¦ä¿¡æ¯çš„é¢˜ç›®



### æ ˆçš„å‹å…¥å‹å‡º

#### [â˜…â˜…856. æ‹¬å·çš„åˆ†æ•°](https://leetcode-cn.com/problems/score-of-parentheses/)

éš¾åº¦ä¸­ç­‰

ç»™å®šä¸€ä¸ªå¹³è¡¡æ‹¬å·å­—ç¬¦ä¸² `S`ï¼ŒæŒ‰ä¸‹è¿°è§„åˆ™è®¡ç®—è¯¥å­—ç¬¦ä¸²çš„åˆ†æ•°ï¼š

- `()` å¾— 1 åˆ†ã€‚
- `AB` å¾— `A + B` åˆ†ï¼Œå…¶ä¸­ A å’Œ B æ˜¯å¹³è¡¡æ‹¬å·å­—ç¬¦ä¸²ã€‚
- `(A)` å¾— `2 * A` åˆ†ï¼Œå…¶ä¸­ A æ˜¯å¹³è¡¡æ‹¬å·å­—ç¬¦ä¸²ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼š "()"
è¾“å‡ºï¼š 1
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼š "(())"
è¾“å‡ºï¼š 2
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼š "()()"
è¾“å‡ºï¼š 2
```

**ç¤ºä¾‹ 4ï¼š**

```
è¾“å…¥ï¼š "(()(()))"
è¾“å‡ºï¼š 6
```

 

**æç¤ºï¼š**

1. `S` æ˜¯å¹³è¡¡æ‹¬å·å­—ç¬¦ä¸²ï¼Œä¸”åªå«æœ‰ `(` å’Œ `)` ã€‚
2. `2 <= S.length <= 50`





**way1:æ ˆæ–¹æ³•**

 <img src="ä¸“é¢˜.assets/image-20210403231808863.png" alt="image-20210403231808863" style="zoom:40%;" />



ğŸŒŸæ€è·¯: <span style="font-weight:bold; color:red;">ä¸Šä¸€å±‚çš„å¾—åˆ† =  ä¸Šä¸€å±‚çš„å¾—åˆ† + å½“å‰å±‚çš„å¾—åˆ† * 2 </span>   

â–¼ ( 1 )   è¿™é‡Œçš„ç¬¬ä¸€ä¸ªæ‹¬å·å°± ( ä»£è¡¨äº†ç¬¬ä¸€å±‚,é‡Œé¢çš„æ•°å­—1æ˜¯ç¬¬ä¸€å±‚çš„å¾—åˆ†, ä½†è¿™ä¸æ˜¯æœ€é«˜å±‚, æœ€é«˜å±‚æ˜¯æ²¡æœ‰æ‹¬å·çš„ç¬¬0å±‚, å› æ­¤ æœ€é«˜å±‚çš„å¾—åˆ† = 0 + 1*2 =2

â–¼ ( 1 ( 1 )   è¿™é‡Œçš„ç¬¬ä¸€ä¸ªæ‹¬å· ( ä¸ºç¬¬ä¸€å±‚, æš‚æ—¶å¾—åˆ†ä¸º 1 , ç¬¬äºŒä¸ªæ‹¬å· ( æ˜¯ç¬¬äºŒå±‚æš‚æ—¶å¾—åˆ†ä¸º1, depth=[0, 1, 1], æ­¤æ—¶æˆ‘ä»¬ç”±äºé‡åˆ°äº† ) åˆ™éœ€è¦æŠŠå½“å‰å±‚ä¸ä¸Šä¸€å±‚åˆå¹¶, æ ¹æ®è§„åˆ™å†…å±‚å‘ä¸Šèµ°ä¸€å±‚, å¾—åˆ†ä¼šä¹˜2, å› æ­¤ 
**ä¸Šä¸€å±‚å¾—åˆ†=ä¸Šä¸€å±‚å¾—åˆ†+å½“å‰å±‚å¾—åˆ†ä¹˜2**  å³ 1+1 * 2=3, ä¹‹åä¸è®ºåµŒå¥—å¤šå°‘å±‚éƒ½æ˜¯å¦‚æ­¤, ç±»ä¼¼ $2*(2*(2*(...)))$

â–¼( ( ) ( ) ( ) ( ) )ç›¸å½“äº ( 1+1+1+1 ), æ‹¬å·å†…çš„å°±æ˜¯å½“å‰æ‹¬å·æ‰€åœ¨å±‚çš„å¾—åˆ†

â˜…è¿™é‡Œå¯¹äº()è¦è¿›è¡Œç‰¹æ®Šè€ƒè™‘, å› ä¸ºè¿™æ ·ä¼šä½¿æ·±åº¦+1å¹¶åˆå§‹åŒ–ä¸º0, ä½†æ˜¯ç”±äº()å†…ä¸ºç©ºæ²¡æœ‰å¾—åˆ†, å› æ­¤éœ€è¦å•ç‹¬è®¾ç½®ä¸º1

```js
/**
 * @param {string} S
 * @return {number}
 */
const scoreOfParentheses = function(S){
	const stack=[0];
	for (let i = 0; i < S.length; i++) {
		if (S[i]==='(') stack.push(0);
		else {
			const cur=stack.pop(),  //å½“å‰æ·±åº¦çš„å¾—åˆ†
				pre=stack.pop();
			//ç”±äºé‡åˆ°)å‡ºæ ˆ,éœ€è¦åŠ åœ¨preé‡Œé¢
			stack.push(pre+Math.max(cur*2,1));
		}
	}
	return stack[0];
}
```

* Math.max(cur*2,1) å¦‚æœæ˜¯ä¸­é—´ä¸ºç©ºçš„æ‹¬å·çš„è¯ä¸å­˜åœ¨curï¼Œé‚£ä¹ˆå†åˆå¹¶åº”ä¸º1ï¼Œè€Œä¸æ˜¯ä¸º0
* åˆå§‹å¤šäº†ä¸€ä¸ª0æ˜¯ä¸ºäº†è¾…åŠ©è®¡ç®—ï¼Œä¹Ÿå¯ä»¥æŠŠè¿™å½“ä½œæ˜¯æ²¡æœ‰æ‹¬å·æ—¶çš„æœ€é«˜å±‚



ğŸŒŸå¯ä»¥å°† $pre+cur*2$ ç†è§£ä¸º $(pre(cur))$ æ­¤æ—¶é‡åˆ°äº† ) éœ€è¦å‡ºæ ˆæ·±åº¦, è€Œcurè¢«ä¸€ä¸ª()åŒ…è£¹å› æ­¤éœ€è¦ä¹˜2, ç„¶åä¸preåŒçº§, å› æ­¤åŠ ä¸Špre! 





way2:æ‰¾è§„å¾‹

æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œåªæœ‰ () ä¼šå¯¹å­—ç¬¦ä¸² S è´¡çŒ®å®è´¨çš„åˆ†æ•°ï¼Œå…¶å®ƒçš„æ‹¬å·åªä¼šå°†åˆ†æ•°ä¹˜äºŒæˆ–è€…å°†åˆ†æ•°ç´¯åŠ ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°æ¯ä¸€ä¸ª () å¯¹åº”çš„æ·±åº¦ xï¼Œé‚£ä¹ˆç­”æ¡ˆå°±æ˜¯ 2^x^ çš„ç´¯åŠ å’Œã€‚

â–¼æ„æ€å°±æ˜¯åªæœ‰() è¿™ç§ç»“æ„æ‰è®¡åˆ†, å…¶ä»–çš„æ‹¬å·åªæ˜¯å°†è¿™ç§ç»“æ„çš„å€¼è¿›è¡Œä¹˜2

 <img src="ä¸“é¢˜.assets/image-20210403235945784.png" alt="image-20210403235945784" style="zoom:40%;" />



```js
/**
 * @param {string} S
 * @return {number}
 */
const scoreOfParentheses = function(S){
	let depth=0,score=0;
	for (let i = 0; i < S.length; i++) {
		if (S[i]==='(') depth++;
		else {
			depth--;
			if (S[i-1]==='('){  //è¿™é‡Œå°±æ˜¯æŠŠå‰é¢æ‰€æœ‰ç§¯ç´¯çš„æ·±åº¦ç»™æ¶ˆè€—æ‰
				score+=Math.pow(2,depth);
			}
		}
	}
	return score;
}
```

ğŸŒŸä¸»è¦å°±æ˜¯ é‡åˆ° $)$ ååˆ¤æ–­ å‰é¢æ˜¯ä¸æ˜¯ $($ 



ğŸ’ç‰¢è®°è¿™é‡Œä¸¤ç§æ–¹æ³•çš„æ€æƒ³!ğŸ˜ğŸ˜ğŸ˜





è¿™æ˜¯è‡ªå·±æƒ³å‡ºæ¥çš„æ–¹æ³•, æƒ³äº†å¾ˆä¹…, æœ‰ç‚¹ç»•:ä½†æ˜¯leetcodeä¸Šè¡¨ç°è¿˜è¡Œ

 <img src="ä¸“é¢˜.assets/image-20210403221601507.png" alt="image-20210403221601507" style="zoom:67%;" />



â–¼é¦–å…ˆä½¿ç”¨ä¸€ä¸ªæ ˆæ¥è®°å½•ä¿¡æ¯, ä¸»è¦æ˜¯ç”¨æ¥è®°å½•æ·±åº¦å’Œå€¼ã€‚

åˆ†ä¸ºäº†å‡ ç§æƒ…å†µè¿›è¡Œè€ƒè™‘:

1. ç¬¬ä¸€ä¸ªå‡ºç°ï¼‰çš„è‚¯å®šæ˜¯è¿™ç§ç»“æ„( )ï¼Œå› æ­¤ç¬¬ä¸€æ¬¡é‡åˆ°ï¼‰çš„æ—¶å€™è¿›è¡Œåˆå§‹åŒ–
2. å¦‚æœæ¯”æ ˆé¡¶çš„å…ƒç´ æ·±åº¦è¿˜æ·±çš„è¯, åº”è¯¥æ˜¯è¿™ç§ç»“æ„ ( A ( <span style="font-weight:bold; color:red;">()</span> ) ) æˆ–è€… A ( <span style="font-weight:bold; color:red;">()</span> () ) è¿™ç§åº”è¯¥ç›´æ¥å…¥æ ˆ
3. å¦‚æœæ ˆé¡¶å…ƒç´ æ¯”å½“å‰çš„æ·±åº¦æ·±, è¯´æ˜å…¶è¢«åµŒå¥—äº†ä¸€ä¸ª() éœ€è¦ä¹˜2, å¹¶ä¸”ä¸èƒ½ç›´æ¥éå†ä¸‹ä¸€ä¸ªå­—ç¬¦, å› ä¸ºé€šè¿‡åµŒå¥—()ä¹˜2å, æœ‰å¯èƒ½ä¸ä¹‹å‰çš„å…ƒç´ å½¢æˆ AB çš„ç»“æ„, å› æ­¤è¿˜éœ€è¦åˆ¤æ–­æ˜¯å¦å½¢æˆäº† AB
4. æœ€ç®€å•çš„æƒ…å†µ: æ ˆé¡¶å…ƒç´ å’Œdepthç›¸ç­‰, é‚£ä¹ˆåªæœ‰å¯èƒ½æ˜¯ A ( ) è¿™ç§æƒ…å†µ, ç›´æ¥ç›¸åŠ 



â˜…å¯èƒ½ä¼šå†æƒ³æœ€åä¸€ç§æƒ…å†µå¦‚æœæ˜¯ A ( B )é‚£æ€ä¹ˆåŠ?  ä¸ç”¨æ‹…å¿ƒ, è¿™åœ¨3ä¸­å¤„ç†äº†

```js
/**
 * @param {string} S
 * @return {number}
 */
var scoreOfParentheses = function(S) {
    let depth=0,score=0,stack=[];
    for(let v of S){
        if(v==='('){
            depth++;
        }else{
            //ç¬¬ä¸€æ¬¡å…¥æ ˆ
            if(!stack.length){
                stack.push([1,depth--]);
            }
            else if(stack[stack.length-1][1]<depth){
                stack.push([1,depth--])
            }
            else if(stack[stack.length-1][1]>depth){
                stack[stack.length-1][0]*=2;
                stack[stack.length-1][1]--;
                if(stack.length>=2&&(stack[stack.length-1][1]===stack[stack.length-2][1])){
                    stack[stack.length-2][0]+=stack[stack.length-1][0];
                    stack.pop();                
                }
                depth--;
            }else{
                stack[stack.length-1][0]++;
                depth--;
            }
            
        }
    }
    return stack[0][0];
};
```



ğŸš©**plusï¼šæ‹¬å·ç±»å‹é¢˜æ‰©å±•**

[â˜…â˜…22. æ‹¬å·ç”Ÿæˆ](https://leetcode-cn.com/problems/generate-parentheses/)

[â˜…â˜…â˜…32. æœ€é•¿æœ‰æ•ˆæ‹¬å·](https://leetcode-cn.com/problems/longest-valid-parentheses/)



##### [â˜…â˜…22. æ‹¬å·ç”Ÿæˆ](https://leetcode-cn.com/problems/generate-parentheses/)

è¿™é“é¢˜åªæ˜¯æ‹¬å·ï¼Œæ²¡ç”¨åˆ°æ ˆï¼Œåªæ˜¯å’Œæ‹¬å·è”ç³»ä¸€ä¸‹ï¼

æ’åˆ— | æ‹¬å· | DFS

éš¾åº¦ä¸­ç­‰

æ•°å­— `n` ä»£è¡¨ç”Ÿæˆæ‹¬å·çš„å¯¹æ•°ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºèƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å¹¶ä¸” **æœ‰æ•ˆçš„** æ‹¬å·ç»„åˆã€‚

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šn = 3
è¾“å‡ºï¼š["((()))","(()())","(())()","()(())","()()()"]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šn = 1
è¾“å‡ºï¼š["()"]
```

 

**æç¤ºï¼š**

- `1 <= n <= 8`



**DFSï¼š** 

**é‡‡ç”¨æ·±åº¦éå†çš„æ–¹æ³•æ·»åŠ æ‰€æœ‰æ‹¬å·ï¼Œ <span style=" color:red;">ç”±äºæ¯ä¸€æ¬¡æ·»åŠ çš„æ‹¬å·éƒ½ä¸åŒå› æ­¤ä¸ä¼šå‡ºç°é‡å¤ï¼</span>**

1. ç”¨å®Œäº†æ‰€æœ‰çš„æ‹¬å·æ‰èƒ½push
2. å› ä¸ºå®é™…ä¸Šè¿˜æ˜¯æ‹¬å· ( ) åŒ…å«çš„å½¢å¼, æ‰€ä»¥å¿…é¡»è¦ä¿è¯leftNum>=rightNum, é¿å… ) (

3. æ¯æ¬¡åˆ¤æ–­ä¸€ä¸‹å·¦orå³æ‹¬å·æ˜¯å¦å·²ç»ç”¨å®Œ, æ²¡ç”¨å®Œå°±ç»§ç»­éå†

![image.png](ä¸“é¢˜.assets/efbe574e5e6addcd1c9dc5c13a50c6f162a2b14a95d6aed2c394e18287a067fa-image.png)

```js
/**
 * @param {number} n
 * @return {string[]}
 */
const generateParenthesis = function(n) {
	const res=[];
	if (n===0) return res;

	const dfs=(curStr,leftNum,rightNum)=>{
		//å¿…é¡»è¦æŠŠå·¦å³æ‹¬å·éƒ½ç”¨å®Œäº†å†push
		if (leftNum===n&&rightNum===n){
			res.push(curStr);
			return;
		}
		//å¿…é¡»ä¿è¯å·¦æ‹¬å·ä½¿ç”¨çš„æ›´å¤š,é¿å… )(
		if (leftNum<rightNum) return;
		//leftNum>=rightNum
		if (leftNum<n) {
			dfs(curStr+'(',leftNum+1,rightNum);
		}
		if (rightNum<n) {
			dfs(curStr+')',leftNum,rightNum+1);
		}
	}
	dfs('',0,0);
	return res;
};
```

 ![image-20210604215045755](ä¸“é¢˜.assets/image-20210604215045755.png)

â—è¿™é‡Œæ˜¯ `äº‹ååˆ¤æ–­` , æ¯”å¦‚è¯´æœ€å¼€å§‹çš„æ—¶å€™leftNumå’ŒrightNuméƒ½ä¸º0, ä½†ä¹Ÿä¼šè¿›è¡Œ ')' çš„é€’å½’ ! åªä¸è¿‡æ˜¯åœ¨é€’å½’ä¸­èˆå¼ƒæ‰å¹¶returnã€‚ 

â˜…å¯ä»¥æŠŠè¿™ä¸ªäº‹ååˆ¤æ–­æ”¹æˆäº‹å‰åˆ¤æ–­   <span style="color:blue;">if (rightNum < n && leftNum > rightNum)</span>

ğŸš©äºŒåˆ·æ—¶æ›´ç®€ä¾¿çš„å†™æ³•:

```js
const generateParenthesis = function(n){
	const res=[];
	if (n===0) return res;
	const dfs=(s,l,r)=>{
		if (l<r||l>n||r>n) return;
		if (l===n&&r===n) res.push(s);
		else {
			dfs(s+'(',l+1,r);
			dfs(s+')',l,r+1);
		}
	}
	dfs('',0,0);
	return res;
}
```





**BFSç‰ˆ:**

æä¸€ä¸ªç±»! è®°å½•str, leftNum, rightNumã€‚ æ¯æ¬¡ä» 0ï¼Œ0å¼€å§‹ï¼Œæ¯æ¬¡æ”¾ä¸€äº›å…¥é˜Ÿï¼Œå‡ºé˜Ÿæ—¶æ ¹æ®æ¡ä»¶åˆ¤æ–­åŠ å…¥res, è¿˜æ˜¯åŠ å·¦æ‹¬å·orå³æ‹¬å·ï¼ æ³¨æ„åŠ å…¥å³æ‹¬å·æ—¶å¿…é¡»æ»¡è¶³ leftNum>rightNum, ä¸ç„¶åŠ å…¥åå³æ‹¬å·å°±æ›´å¤šäº†ï¼ï¼ï¼

```js
/**
 * @param {number} n
 * @return {string[]}
 */
const generateParenthesisBFS = function (n) {
	const res = [];
	if (n === 0) return res;

	class Node {
		constructor(str, leftNum, rightNum) {
			this.str = str;
			this.leftNum = leftNum;
			this.rightNum = rightNum;
		}
	}

	const queue = [new Node('', 0, 0)];
	while (queue.length) {
		let temp = queue.shift();
		if (temp.leftNum === n && temp.rightNum === n) {
			res.push(temp.str);
		}
		if (temp.leftNum < n) {
			queue.push(new Node(temp.str + '(', temp.leftNum + 1, temp.rightNum));
		}
		if (temp.rightNum < n && temp.leftNum > temp.rightNum) {
			queue.push(new Node(temp.str + ')', temp.leftNum, temp.rightNum + 1));
		}
	}
	return res;
}
```

â–¼å¯ä»¥çœ‹å¾—å‡ºæ¥æœç´¢æ—¶BFSè¦å†™çš„å¤æ‚ä¸€ç‚¹ï¼ï¼ï¼ ğŸ’æ¨èä½¿ç”¨DFSï¼







#### [â˜…â˜…â˜…32. æœ€é•¿æœ‰æ•ˆæ‹¬å·](https://leetcode-cn.com/problems/longest-valid-parentheses/)

éš¾åº¦å›°éš¾

ç»™ä½ ä¸€ä¸ªåªåŒ…å« `'('` å’Œ `')'` çš„å­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºæœ€é•¿æœ‰æ•ˆï¼ˆæ ¼å¼æ­£ç¡®ä¸”è¿ç»­ï¼‰æ‹¬å·å­ä¸²çš„é•¿åº¦ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "(()"
è¾“å‡ºï¼š2
è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ "()"
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = ")()())"
è¾“å‡ºï¼š4
è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ "()()"
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šs = ""
è¾“å‡ºï¼š0
```

 

**æç¤ºï¼š**

- `0 <= s.length <= 3 * 104`
- `s[i]` ä¸º `'('` æˆ– `')'`







##### way1:æ ˆ

å…¶å®è¿™é‡Œå¾ˆç±»ä¼¼ä¸ä¸‹é¢å•è°ƒæ ˆ1,  æ ¹æ®æƒ…å†µè¿›è¡Œå…¥æ ˆå‡ºæ ˆ, è€Œä¸”å…¥æ ˆçš„ä¹Ÿæ˜¯index.

**ğŸš©å…·ä½“æ€è·¯:**

- å¯¹äºé‡åˆ°çš„æ¯ä¸ª $\text{â€˜(â€™}$ ï¼Œæˆ‘ä»¬å°†å®ƒçš„ä¸‹æ ‡æ”¾å…¥æ ˆä¸­

- å¯¹äºé‡åˆ°çš„æ¯ä¸ª $\text{â€˜)â€™}$ ï¼Œæˆ‘ä»¬å…ˆå¼¹å‡ºæ ˆé¡¶å…ƒç´ è¡¨ç¤ºåŒ¹é…äº†å½“å‰å³æ‹¬å·
  - å¦‚æœæ ˆä¸ºç©ºï¼Œè¯´æ˜å½“å‰çš„å³æ‹¬å·ä¸ºæ²¡æœ‰è¢«åŒ¹é…çš„å³æ‹¬å·ï¼Œæˆ‘ä»¬å°†å…¶ä¸‹æ ‡æ”¾å…¥æ ˆä¸­æ¥æ›´æ–°ã€Œæœ€åä¸€ä¸ªæ²¡æœ‰è¢«åŒ¹é…çš„å³æ‹¬å·çš„ä¸‹æ ‡ã€
  - å¦‚æœæ ˆä¸ä¸ºç©ºï¼Œå½“å‰å³æ‹¬å·çš„ä¸‹æ ‡å‡å»æ ˆé¡¶å…ƒç´ å³ä¸ºã€Œä»¥è¯¥å³æ‹¬å·ä¸ºç»“å°¾çš„æœ€é•¿æœ‰æ•ˆæ‹¬å·çš„é•¿åº¦ã€



**ğŸŒŸå…³é”®:**  <span style="font-weight:bold; color:red;">ä¿è¯æ ˆåº• $stack[0]$ æ˜¯å½“å‰éå†è¿‡çš„å…ƒç´ ä¸­æœ€åä¸€ä¸ªæ²¡æœ‰åŒ¹é…åˆ°å·¦æ‹¬å·çš„æœ‰æ‹¬å·çš„ä¸‹æ ‡!</span>

â–¼ä¸ºä»€ä¹ˆè¦è¿™æ ·å‘¢? å¦‚æœæˆ‘ä»¬åªæ˜¯å•çº¯çš„åœ¨æ ˆåº•æ”¾ $'('$  é‚£ä¹ˆé€šè¿‡å…¥æ ˆå‡ºæ ˆæ˜¯æ— æ³•å¤„ç†è¿™ç§æƒ…å†µçš„ ï¼ˆæ¯”å¦‚$'()()'$ ï¼‰å› ä¸ºè¿™æ ·æˆ‘ä»¬åªä¼šè€ƒè™‘å•ä¸ªæ‹¬å·é‡Œçš„æƒ…å†µ, æ— æ³•è”ç³»åˆ°ä¸ä¹‹ç›¸é‚»çš„æ‹¬å·! å› æ­¤è®°å½•ä¸Šä¸€ä¸ªæœªåŒ¹é…åˆ°çš„å³æ‹¬å·çš„åæ ‡, è¿™æ ·ç›¸å½“äºå½¢æˆäº†ä¸€ä¸ªéš”æ–­, ç±»ä¼¼äºä¸‹é¢å•è°ƒæ ˆ1ä¸­çš„æ ˆé¡¶! æ¯æ¬¡æ›´æ–°çš„stack[0] éƒ½æ˜¯ä¸€ä¸ªæ–°çš„èµ·ç‚¹



**â–¼å¤æ‚åº¦åˆ†æ**

æ—¶é—´å¤æ‚åº¦ï¼š $O(n)$ï¼Œn æ˜¯ç»™å®šå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚æˆ‘ä»¬åªéœ€è¦éå†å­—ç¬¦ä¸²ä¸€æ¬¡å³å¯ã€‚

ç©ºé—´å¤æ‚åº¦ï¼š $O(n)$ã€‚æ ˆçš„å¤§å°åœ¨æœ€åæƒ…å†µä¸‹ä¼šè¾¾åˆ° nï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦ä¸º $O(n)$ ã€‚

```js
/**
 * @param {string} s
 * @return {number}
 */
const longestValidParentheses = function(s){
	const stack=[-1]; //æ ˆåº•ä¸ºä¸Šä¸€æ¬¡å› å¤šä½™çš„')'ä¸èƒ½è¿ç»­è€Œç»“æŸçš„æ—¶å€™
	let maxLen=0;
	for (let i = 0; i < s.length; i++) {
		if (s[i]==='(') stack.push(i);
		else {
			stack.pop();
			if (stack.length===0){
				stack.push(i);
			}else {
				maxLen=Math.max(maxLen,i-stack[stack.length-1]);
			}
		}
	}
	return maxLen;
}
```

ğŸ’£

* ä¸ºä»€ä¹ˆè¦é¢„å…ˆè®¾ç½®ä¸€ä¸ª -1 åœ¨æ ˆä¸­?  ç›¸å½“äºå“¨å…µå§, æ¯”å¦‚è¯´ $'))'$ è¿™ç§æƒ…å†µéœ€è¦æ›´æ–°æ—¶stackä¸ºç©ºå°±ä¸èƒ½popäº†ã€‚ è€Œä¸”å¿…é¡»è®¾ç½®ä¸º-1ï¼Œ è¿™æ ·é‡åˆ° $'()'$ æ—¶åˆšå¥½åˆé€‚  $i-stack[stack.length-1]$  å°±æ˜¯1- (-1)
* elseä¸­ç›´æ¥pop, å¦‚æœæ ˆä¸ºç©ºäº†åˆ™è¯´æ˜é‡åˆ°äº†æ–°çš„æœªåŒ¹é…åˆ°çš„å³æ‹¬å·, éœ€è¦æ›´æ–°åæ ‡ã€‚æœ¬è´¨ä¸Šè¿˜æ˜¯ç±»ä¼¼äº`æ¶ˆæ¶ˆä¹` ï¼Œé‡åˆ°ï¼ˆï¼‰æ¶ˆé™¤ï¼Œé‡åˆ°æ— æ³•åŒ¹é…çš„ ï¼‰åˆ™è¯¥è½®æ¸¸æˆç»“æŸè¿›è¡Œä¸‹ä¸€è½®ï¼





å½“ç„¶è¿˜æœ‰dpçš„åšæ³•ï¼Œåªä¸è¿‡çŠ¶æ€è½¬ç§»æ–¹ç¨‹æœ‰ç‚¹éš¾æƒ³ï¼ˆä¸è¿‡ä¸Šé¢çš„æ ˆåº•æ”¾å•¥ä¹ŸæŒºéš¾æƒ³çš„ï¼‰

##### way2:åŠ¨æ€è§„åˆ’

ğŸš©æ€è·¯å…³é”®æ˜¯å¦‚ä½•ä»å‰é¢æ¨åˆ°åé¢ï¼Ÿå› æ­¤æˆ‘ä»¬å…ˆå®šä¹‰ $dp[i]$ ä¸ºä»¥s[i]ç»“å°¾èƒ½å¾—åˆ°çš„æœ€å¤§å­ä¸²çš„é•¿åº¦ã€‚é‚£ä¹ˆå¯ä»¥çŸ¥é“ â€˜(â€™ ä¸€å®šä¸º0, æ‰€ä»¥åªç”¨è€ƒè™‘ ')'çš„æƒ…å†µ:

ğŸŒŸæˆ‘ä»¬ä»å‰å¾€åéå†å­—ç¬¦ä¸²æ±‚è§£ $dp$ å€¼ï¼Œæˆ‘ä»¬æ¯ä¸¤ä¸ªå­—ç¬¦æ£€æŸ¥ä¸€æ¬¡ï¼š

1. $s[i]=â€˜)â€™$ ä¸” $s[iâˆ’1]=â€˜(â€™$ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ä¸²å½¢å¦‚ â€œâ€¦â€¦()â€â€œâ€¦â€¦()â€ï¼Œæˆ‘ä»¬å¯ä»¥æ¨å‡ºï¼š
   $$
   dp[i]=dp[iâˆ’2]+2
   $$

æˆ‘ä»¬å¯ä»¥è¿›è¡Œè¿™æ ·çš„è½¬ç§»ï¼Œæ˜¯å› ä¸ºç»“æŸéƒ¨åˆ†çš„ "()" æ˜¯ä¸€ä¸ªæœ‰æ•ˆå­å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”å°†ä¹‹å‰æœ‰æ•ˆå­å­—ç¬¦ä¸²çš„é•¿åº¦å¢åŠ äº† 2 ã€‚

2. $s[i]=â€˜)â€™$ ä¸” $s[iâˆ’1]=â€˜)â€™$ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ä¸²å½¢å¦‚ $â€œâ€¦â€¦))â€$ï¼Œæˆ‘ä»¬å¯ä»¥æ¨å‡ºï¼š
   å¦‚æœ $s[iâˆ’dp[iâˆ’1]âˆ’1]=â€˜(â€™$ï¼Œé‚£ä¹ˆ

$$
\textit{dp}[i]=\textit{dp}[i-1]+\textit{dp}[i-\textit{dp}[i-1]-2]+2
$$

ğŸ’ä¹Ÿå°±æ˜¯è¯´å¦‚æœæ˜¯è¿ç»­çš„ '))' , é‚£ä¹ˆæˆ‘ä»¬è¿˜éœ€è¦æ£€æŸ¥å‰é¢é‚£ä¸ªå³æ‹¬å·å°é—­èŒƒå›´å‰çš„ç¬¦å·æ˜¯å¦æ˜¯ '('



**æ—¶é—´å¤æ‚åº¦: $O(n)$:**

**ç©ºé—´å¤æ‚åº¦: $O(n)$:**

```js
/**
 * @param {string} s
 * @return {number}
 */
const longestValidParentheses = function(s) {
	const len=s.length;
	if (len<=1) return 0;
	let dp=Array(len).fill(0);
	let maxLen=0;
	//ä»1å¼€å§‹,å› ä¸ºç¬¬0ä½å¿…ä¸º0, å‰é¢ä¿è¯äº†è¿™é‡Œlen>1
	for (let i = 1; i < len; i++) {
		if (s[i]===')'){
			if (s[i-1]==='('){
				dp[i]= i-2>=0? dp[i-2]+2:2 ;
			}
			else{ //ä¸æ˜¯'('é‚£å°±æ˜¯')'
				if (s[i-dp[i-1]-1]==='('){ //åˆ¤æ–­å½“å‰çš„s[i]æ˜¯å¦å°é—­
					//åˆ¤æ–­å½“å‰å°é—­çš„()å‰é¢æ˜¯å¦è¿˜æœ‰æœ‰æ•ˆæ‹¬å·å­ä¸²
					dp[i]= i-dp[i-1]-2>=0? dp[i-1]+dp[i-dp[i-1]-2]+2:dp[i-1]+2;
				}
			}
			maxLen=Math.max(maxLen,dp[i]);
		}
	}
	return maxLen;
};
```



##### way3:å·¦å³éå†

ğŸš©å‡å°‘äº†ç©ºé—´å¤æ‚åº¦, è€Œä¸”æƒ³æ³•å¾ˆç®€å•!!! å› ä¸ºæ»¡è¶³æ¡ä»¶çš„å­ä¸²è‚¯å®šæ˜¯ å·¦å³æ‹¬å·æ•°ç›¸åŒ, å¹¶ä¸”è¿˜ä¼šåœ¨å³æ‹¬å·æ•°é‡å¤§äºå·¦æ‹¬å·æ—¶è¿›è¡Œæˆªæ–­, ååˆ†å®Œç¾! 

![image-20210606200810591](ä¸“é¢˜.assets/image-20210606200810591.png)

**æ—¶é—´å¤æ‚åº¦: $O(n)$:**

**ç©ºé—´å¤æ‚åº¦: $O(1)$:**

```js
const longestValidParenthesesPlus = function(s){
	let maxLen=0,left=0,right=0;
	for (let i = 0; i < s.length; i++) {
		if (s[i]==='('){
			left++;
		}else {
			right++;
		}
		if (left===right){
			maxLen=Math.max(maxLen,left+right);
		}else if (left<right){
			left=right=0;
		}
	}
	left=right=0;
	for (let i = s.length-1; i >=0 ; i--) {
		if (s[i]==='('){
			left++;
		}else {
			right++;
		}
		if (left===right){
			maxLen=Math.max(maxLen,left+right);
		}else if (left>right){
			left=right=0;
		}
	}
	return maxLen;
}
```

â—æ³¨æ„ä»å³åˆ°å·¦æ—¶æ˜¯rightè¦å¤§äºleft



æ€»çš„æ¥è¯´è¿æ–¹æ³•éƒ½å’Œä¸‹é¢å•è°ƒæ ˆå¾ˆç›¸ä¼¼, å¯ä»¥è”ç³»åœ¨ä¸€èµ·!!!







 







### å•è°ƒæ ˆ1



ğŸš©è¿™ç±»çš„å•è°ƒæ ˆé—®é¢˜ä»¥ 5.æ¯æ—¥æ¸©åº¦ ä¸ºå…¥é—¨é¢˜, ä¸»è¦é€šè¿‡å•è°ƒæ ˆæ¥è§£å†³ ä¸‹ä¸€ä¸ªæ›´å¤§æ•°å­—åœ¨å“ªçš„é—®é¢˜



ä»¥ä¸‹åˆ—å‡ºäº†å•è°ƒæ ˆçš„é—®é¢˜ï¼Œä¾›å¤§å®¶å‚è€ƒã€‚

åºå·	é¢˜ç›®	é¢˜è§£
1	42. æ¥é›¨æ°´ï¼ˆå›°éš¾ï¼‰	æš´åŠ›è§£æ³•ã€ä¼˜åŒ–ã€åŒæŒ‡é’ˆã€å•è°ƒæ ˆ
2	739. æ¯æ—¥æ¸©åº¦ï¼ˆä¸­ç­‰ï¼‰	æš´åŠ›è§£æ³• + å•è°ƒæ ˆ
3	496. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  Iï¼ˆç®€å•ï¼‰	æš´åŠ›è§£æ³•ã€å•è°ƒæ ˆ
4	316. å»é™¤é‡å¤å­—æ¯ï¼ˆå›°éš¾ï¼‰	æ ˆ + å“¨å…µæŠ€å·§ï¼ˆJavaã€C++ã€Pythonï¼‰
5	901. è‚¡ç¥¨ä»·æ ¼è·¨åº¦ï¼ˆä¸­ç­‰ï¼‰	ã€ŒåŠ›æ‰£ã€ç¬¬ 901 é¢˜ï¼šè‚¡ç¥¨ä»·æ ¼è·¨åº¦ï¼ˆå•è°ƒæ ˆï¼‰
6	402. ç§»æ‰Kä½æ•°å­—	
7	581. æœ€çŸ­æ— åºè¿ç»­å­æ•°ç»„	


é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/largest-rectangle-in-histogram/solution/bao-li-jie-fa-zhan-by-liweiwei1419/



#### â˜…â˜…1.é€›è¡—

**(è…¾è®¯ç¬”è¯•)**

å°Qåœ¨å‘¨æœ«çš„æ—¶å€™å’Œä»–çš„å°ä¼™ä¼´æ¥åˆ°å¤§åŸå¸‚é€›è¡—ï¼Œä¸€æ¡æ­¥è¡Œè¡—ä¸Šæœ‰å¾ˆå¤šé«˜æ¥¼ï¼Œå…±æœ‰nåº§é«˜æ¥¼æ’æˆä¸€è¡Œã€‚

å°Qä»ç¬¬ä¸€æ ‹ä¸€ç›´èµ°åˆ°äº†æœ€åä¸€æ ‹ï¼Œå°Qä»æ¥éƒ½æ²¡æœ‰è§åˆ°è¿™ä¹ˆå¤šçš„æ¥¼ï¼Œæ‰€ä»¥ä»–æƒ³çŸ¥é“ä»–åœ¨æ¯æ ‹æ¥¼çš„ä½ç½®å¤„èƒ½çœ‹åˆ°å¤šå°‘æ ‹æ¥¼å‘¢ï¼Ÿï¼ˆå½“å‰é¢çš„æ¥¼çš„é«˜åº¦å¤§äºç­‰äºåé¢çš„æ¥¼æ—¶ï¼Œåé¢çš„æ¥¼å°†è¢«æŒ¡ä½ï¼‰ 



**è¾“å…¥ä¾‹å­1:**

```
[5,3,8,3,2,5]
```



**è¾“å‡ºä¾‹å­1:**

```
[3,3,5,4,4,4]
```



**ä¾‹å­è¯´æ˜1:**

å½“å°Qå¤„äºä½ç½®3æ—¶ï¼Œä»–å¯ä»¥å‘å‰çœ‹åˆ°ä½ç½®2,1å¤„çš„æ¥¼ï¼Œå‘åçœ‹åˆ°ä½ç½®4,6å¤„çš„æ¥¼ï¼ŒåŠ ä¸Šç¬¬3æ ‹æ¥¼ï¼Œå…±å¯çœ‹åˆ°5æ ‹æ¥¼ã€‚å½“å°Qå¤„äºä½ç½®4æ—¶ï¼Œä»–å¯ä»¥å‘å‰çœ‹åˆ°ä½ç½®3å¤„çš„æ¥¼ï¼Œå‘åçœ‹åˆ°ä½ç½®5,6å¤„çš„æ¥¼ï¼ŒåŠ ä¸Šç¬¬4æ ‹æ¥¼ï¼Œå…±å¯çœ‹åˆ°4æ ‹æ¥¼ã€‚



æ„æ€æ˜¯, å¤„äºå½“å‰æ¥¼æ¯”å¦‚ç°åœ¨æ˜¯æ¥¼é«˜ä¸º8çš„æ¥¼æ—¶, é¦–å…ˆæˆ‘ä»¬è‚¯å®šå¯ä»¥çœ‹è§å½“å‰è¿™ä¸ªé«˜ä¸º8çš„æ¥¼, å…¶æ¬¡æˆ‘ä»¬å‘å·¦è¾¹çœ‹ 3<5ä¸ä¼šæœ‰é®æŒ¡, æ‰€ä»¥èƒ½çœ‹åˆ°ä¸¤æ ‹æ¥¼;  å‘å³è¾¹çœ‹ 3>2, ä¼šé®æŒ¡æ‰ä¸€æ ‹æ¥¼, æ‰€ä»¥èƒ½çœ‹åˆ°ä¸¤æ ‹æ¥¼, ä¸€å…±æ˜¯5æ ‹æ¥¼ã€‚â—ç»è¿‡æˆ‘æµ‹è¯•äº†ä¸€ä¸‹ :alien: ,  <span style=" color:red;">é¢˜ç›®ä¸­ç›¸åŒé«˜åº¦çš„æ¥¼ä¹Ÿæ˜¯ä¼šè¢«é®æŒ¡å¯¼è‡´æ— æ³•çœ‹è§!</span>  å› æ­¤=ä¹Ÿè¦å‡ºæ ˆã€‚ è¿™é‡Œæ˜¯å•è°ƒä¸¥æ ¼é€’å‡æ ˆ



```js
/**
 * ä»£ç ä¸­çš„ç±»åã€æ–¹æ³•åã€å‚æ•°åå·²ç»æŒ‡å®šï¼Œè¯·å‹¿ä¿®æ”¹ï¼Œç›´æ¥è¿”å›æ–¹æ³•è§„å®šçš„å€¼å³å¯
 * @param heights intæ•´å‹ä¸€ç»´æ•°ç»„ 
 * @return intæ•´å‹ä¸€ç»´æ•°ç»„
 */
function findBuilding(heights) {
	// write code here
	const len = heights.length, stack = [];
	let pre = Array(len), suff = Array(len);
	//è®¡ç®—å·¦è¾¹èƒ½çœ‹åˆ°çš„æ¥¼
	for (let i = 0; i < len; i++) {
		pre[i] = stack.length;  
		while (stack.length && stack[stack.length - 1] <= heights[i]) {
			stack.pop();
		}
		stack.push(heights[i]);
	}
	stack.length = 0;
	//è®¡ç®—å³è¾¹èƒ½çœ‹åˆ°çš„æ¥¼
	for (let i = heights.length - 1; i >= 0; i--) {
		suff[i] = stack.length;  
		while (stack.length && stack[stack.length - 1] <= heights[i]) {
			stack.pop();
		}
		stack.push(heights[i]);
	}
	let res = Array(len);
	for (let i = 0; i < len; i++) {
		res[i] = pre[i] + suff[i] + 1; //1æ˜¯æ‰€åœ¨ä½ç½®é‚£æ ‹æ¥¼
	}
	return res;
}
module.exports = {
    findBuilding : findBuilding
};
```



**ğŸŒŸåæ€:**

å…¶å®è¿™æ˜¯ä¸€é“å¾ˆç®€å•çš„é¢˜, ä¸ºä»€ä¹ˆåšçš„è¿™ä¹ˆä¸å¥½???

1. é¦–å…ˆæ˜¯æ²¡æœ‰ç†è§£æ¸…æ¥šé¢˜æ„!!!  é¢˜ç›®è¡¨è¿°ç¡®å®æœ‰ç‚¹ä¸æ¸…æ™°...
2. åº”è¯¥é€Ÿåº¦æŠ“ä½é‡ç‚¹, ä½¿ç”¨ä¸€ä¸ªæ ˆè¡¨ç¤ºå‰é¢çš„æ¥¼å±‚, å½“å‰æ¥¼æ›´é«˜å°±ä¸€ç›´å‡ºæ ˆå°±è¡Œäº†!!!
3. å…¶å®å¯ä»¥ä¼˜åŒ–, ç”¨ä¸€ä¸ªresæ•°ç»„æ¥æ ‡è¯†preå’Œsuffå°±è¡Œäº†, åˆå§‹åŒ–ä¸º1, è¡¨ç¤ºè‚¯å®šèƒ½çœ‹è§å½“å‰çš„



2021/6/3:  ä¿®æ”¹äº†ä¸€ä¸‹,  æ›´åŠ ç®€æ´ï¼





#### â˜…â˜…â˜…2.æœ€å¤§åŒºé—´å€¼ (å­—èŠ‚)



Leetcodeä¸Šæ‰¾ä¸åˆ°çš„å­—èŠ‚è·³åŠ¨é«˜é¢‘é¢è¯•é¢˜ (18å¹´å¤´æ¡è‡ªå·±å‡ºçš„æ ¡æ‹›ç¬”è¯•é¢˜)

- æŒ‘é€‰ä¸€ä¸ªåŒºé—´ï¼ŒåŒºé—´å€¼ä¸ºåŒºé—´å’Œä¹˜ä»¥åŒºé—´å†…æœ€å°çš„æ•°çš„å€¼ï¼Œæ±‚åŒºé—´å€¼æœ€å¤§çš„åŒºé—´ï¼ˆ2021.1 å­—èŠ‚è·³åŠ¨-å›½é™…åŒ–-å‰ç«¯ï¼‰
- æ— åºæ•°ç»„ï¼Œæ±‚ä¸€ä¸ªå€¼æœ€å¤§çš„åŒºé—´ï¼ŒåŒºé—´è®¡ç®—æ–¹æ¡ˆä¸ºï¼šåŒºé—´å’Œ * åŒºé—´æœ€å°å€¼ï¼ˆ2020.09 å­—èŠ‚è·³åŠ¨-ç”µå•†-åç«¯ï¼‰
- [3,1,6,4,5,2]ï¼Œå¯¹äºä»»æ„å­åºåˆ—å¯ä»¥è®¡ç®—ä¸€ä¸ªXå€¼ï¼ŒX=sum(subArray) * min(subArray)ï¼Œæ±‚æœ€å¤§Xï¼ˆ2020.07 å­—èŠ‚è·³åŠ¨-å•†ä¸šåŒ–-å‰ç«¯ï¼‰

**é¢˜ç›®æè¿°**
ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œè¦æ±‚é€‰å‡ºä¸€ä¸ªåŒºé—´, ä½¿å¾—è¯¥åŒºé—´æ˜¯æ‰€æœ‰åŒºé—´ä¸­ç»è¿‡å¦‚ä¸‹è®¡ç®—çš„å€¼æœ€å¤§çš„ä¸€ä¸ªï¼šåŒºé—´ä¸­çš„æœ€å°æ•° * åŒºé—´æ‰€æœ‰æ•°çš„å’Œã€‚**æ•°ç»„ä¸­çš„å…ƒç´ éƒ½æ˜¯éè´Ÿæ•°**ã€‚



ğŸŒŸå…·ä½“åˆ†æå¯ä»¥çœ‹ä¸‹é¢çš„leetcode84

é‡‡ç”¨çš„å•è°ƒæ ˆ ï¼ˆå•è°ƒéä¸¥æ ¼é€’å¢ï¼‰+ å“¨å…µçš„æ–¹æ³•

```js
/**
 * @param {number[]} arr
 * @return {number}
 */
const maxSumAndMin=arr=>{
	//å®é™…ä¸Šè¿˜æ˜¯å»è®¡ç®—æ•°ç»„ä»¥æŸä¸€ä¸ªå€¼ä¸ºåŒºé—´æœ€å°å€¼æ—¶èƒ½å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯
	const stack=[];
	const data=[0,...arr,0];
	//sliceæ˜¯å·¦é—­å³å¼€
	const getSum=(l,r)=>{
		return data.slice(l,r).reduce((a,b)=>a+b);
	}
	let maxValue=0;

	for (let i = 0; i < data.length; i++) {
		while (stack.length&&data[i]<data[stack[stack.length-1]]){
			let topIndex=stack.pop();
			maxValue=Math.max(
				maxValue,
				data[topIndex]*getSum(stack[stack.length-1]+1,i)
			)
		}
		stack.push(i);
	}
	return maxValue;
}
```



**â–¼ä¸ºä»€ä¹ˆæ˜¯å•è°ƒéä¸¥æ ¼é€’å¢æ ˆï¼Ÿ**

ğŸŒŸå› ä¸ºè¿™é‡Œæ˜¯æœ€å°çš„æ¥å†³å®šä¹˜æ•°ï¼Œå› æ­¤å¯ä»¥ä¿è¯å‡ºæ ˆæ—¶çš„é‚£ä¸ªæ•°å¯ä»¥æ˜¯$(stack[stack.length-2], stack[stack.length-1]) $  èŒƒå›´å†…æœ€å°çš„ï¼

ğŸŒŸç›¸åŒå¤§å°çš„ä¸ç”¨å‡ºæ ˆï¼ˆå…¶å®å‡ºä¸å‡ºéƒ½å¯ï¼‰ï¼Œå› ä¸ºé å‰é¢çš„é‚£ä¸ªæ•°ä¼šæ¯”åé¢è®¡ç®—çš„å¤§å¹¶è¦†ç›–ï¼



**â–¼å‰åä¸¤ä¸ªå“¨å…µ (å°±æ˜¯0) çš„ä½œç”¨**

ğŸŒŸç¬¬ä¸€ä¸ªæ˜¯é˜²æ­¢ä¸€ç›´å‡ºæ ˆåˆ°æœ€åæ ˆä¸ºç©ºæ— æ³•è®¡ç®—å®½åº¦

ğŸŒŸæœ€åä¸€ä¸ªæ˜¯ä¸ºäº†è®©æ‰€æœ‰å…ƒç´ éƒ½å‡ºæ ˆå¥½è®¡ç®—æ‰€æœ‰æƒ…å†µçš„å€¼



**â–¼å®½åº¦çš„è®¡ç®—**

ğŸŒŸi æ˜¯å³è¾¹ç•Œ, æ˜¯æ¯”å‡ºæ ˆå…ƒç´ å°çš„, ç”±äºæˆ‘ä»¬ä»¥å‡ºæ ˆå…ƒç´ ä¸ºæœ€å°å…ƒç´ , å› æ­¤ä¸åŒ…æ‹¬ i, å‡ºæ ˆä¹‹åçš„æ ˆé¡¶å…ƒç´ å¯èƒ½ä¸å‡ºæ ˆå…ƒç´ ç›¸ç­‰æˆ–æ¯”å‡ºæ ˆå…ƒç´ å°ï¼Œå› æ­¤ä¹Ÿä¸èƒ½é‡‡ç”¨ï¼Œæ‰€ä»¥è¦åŠ ä¸€ï¼ˆæ ¹æ®sliceçš„å·¦é—­å³å¼€æ¥å»ç¡®å®šï¼ï¼‰



â—â—â—  

1. stack è®°å½•çš„æ˜¯ indexï¼Œé«˜åº¦æ˜¯ numArr[topIndex] è€Œä¸æ˜¯ topIndex





#### â˜…â˜…â˜…3.æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢(LC84)

ç»™å®š n ä¸ªéè´Ÿæ•´æ•°ï¼Œç”¨æ¥è¡¨ç¤ºæŸ±çŠ¶å›¾ä¸­å„ä¸ªæŸ±å­çš„é«˜åº¦ã€‚æ¯ä¸ªæŸ±å­å½¼æ­¤ç›¸é‚»ï¼Œä¸”å®½åº¦ä¸º 1 ã€‚

æ±‚åœ¨è¯¥æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºæ¥çš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚

 ![img](ä¸“é¢˜.assets/histogram.png)



ä»¥ä¸Šæ˜¯æŸ±çŠ¶å›¾çš„ç¤ºä¾‹ï¼Œå…¶ä¸­æ¯ä¸ªæŸ±å­çš„å®½åº¦ä¸º 1ï¼Œç»™å®šçš„é«˜åº¦ä¸º [2,1,5,6,2,3]ã€‚

 ![img](ä¸“é¢˜.assets/utgRAQ4hO3qZdfb.png)



å›¾ä¸­é˜´å½±éƒ¨åˆ†ä¸ºæ‰€èƒ½å‹¾å‹’å‡ºçš„æœ€å¤§çŸ©å½¢é¢ç§¯ï¼Œå…¶é¢ç§¯ä¸º 10 ä¸ªå•ä½ã€‚

![111](ä¸“é¢˜.assets/8951bc3b8b7eb4da2a46063c1bb96932e7a69910c0a93d973bd8aa5517e59fc8.gif)



**ç¤ºä¾‹:**

>è¾“å…¥: [2,1,5,6,2,3]
>è¾“å‡º: 10



###### 1.æš´åŠ›è§£æ³•:   âŒ

**æ—¶é—´å¤æ‚åº¦: O(n^2^):**  ä¼šè¶…å‡ºæ—¶é—´é™åˆ¶

**ç©ºé—´å¤æ‚åº¦: O(1)**

æ€æƒ³å¾ˆç®€å•: ç”±äºæœ€å¤§çš„çŸ©å½¢é¢ç§¯è‚¯å®šæ˜¯ä¼šæ˜¯æŸä¸ªçŸ©å½¢çš„é«˜åº¦, æ‰€ä»¥ä»¥æ¯ä¸€ä¸ªçŸ©å½¢ä¸ºæœ€å¤§é«˜åº¦æ¥è®¡ç®—, å‘å·¦å’Œå‘å³å»¶ä¼¸

```js
/**
 * @param {number[]} heights
 * @return {number}
 */
var largestRectangleArea = function(heights) {
	//æ±‚å‡ºä»¥æ¯ä¸ªæŸ±å­ä¸ºæœ€å¤§é«˜åº¦æ—¶å¾—åˆ°çš„æœ€å¤§é¢ç§¯
	let max=-1;
	for(let i=0;i<heights.length;i++){
		let count=1,h=heights[i],index=i;
		while(--index>=0&&heights[index]>=h) count++;
		index=i;
		while(++index<heights.length&&heights[index]>=h) count++;
		max=Math.max(max,count*h);
	}
	return max;
};
```





###### 2.å•è°ƒæ ˆ ğŸŒŸ 



ä¸»è¦æ€è·¯:

1. è®°å½•ä¸€ä¸ªéä¸¥æ ¼å•è°ƒé€’å¢æ ˆ, å­˜æ”¾heightsæ•°ç»„çš„index
2. $heights[i]$ å¤§äºæ ˆé¡¶å…ƒç´ åˆ™å…¥æ ˆ
3. $heights[i]$ å°äºæ ˆé¡¶å…ƒç´ , åˆ™å°†æ ˆé¡¶å…ƒç´ å‡ºæ ˆåŒæ—¶è®°å½•maxArea, ç›´åˆ°æ ˆé¡¶å…ƒç´ å°äºç­‰äº $heights[i]$



ä¸Šé¢çš„åªæ˜¯å¤§æ¦‚æ€è·¯, è¿™é‡Œé¢è¿˜æœ‰è®¸å¤šç»†èŠ‚:

**â–¼å¦‚ä½•è®°å½•maxArea?**

â€‹	é¦–å…ˆå¯ä»¥åˆå§‹åŒ–ä¸º0ã€‚æ¯ä¸€æ¬¡å‡ºæ ˆéƒ½æ˜¯å› ä¸ºå½“å‰barå°äºè¯¥å‡ºæ ˆå…ƒç´ çš„é«˜åº¦ï¼Œå› æ­¤å…¶å®½åº¦å¯ä»¥è®°å½•ä¸º 
$$
i-stack[stack.length-1]-1
$$
â€‹	$i$æ˜¯å½“å‰barçš„indexï¼Œ$stack[stack.length-1]$æ˜¯æ–°æ ˆé¡¶çš„indexï¼Œè¿™æ˜¯å•è°ƒé€’å¢æ ˆï¼Œæ‰€ä»¥å‡ºæ ˆå…ƒç´ çš„é«˜åº¦åªèƒ½åœ¨æ–°æ ˆé¡¶å’Œå½“å‰barä¹‹é—´æ»¡è¶³ï¼ˆå½“ç„¶å¯èƒ½æ–°æ ˆé¡¶é«˜åº¦ç­‰äºå‡ºæ ˆå…ƒç´ é«˜åº¦ï¼Œä½†å¯ä»¥ç•™åœ¨æ–°æ ˆé¡¶å‡ºæ ˆæ—¶è€ƒè™‘ï¼‰ã€‚$i-stack[stack.length-1]$ æ˜¯å½“å‰barå’Œæ–°æ ˆé¡¶ä¹‹é—´çš„å®½åº¦ï¼Œå¤šç®—äº†å½“å‰baræ‰€ä»¥æœ€åè¿˜è¦ -1



**â–¼è®°å½•maxAreaæ—¶æ ˆä¸ºç©ºäº†æ€ä¹ˆåŠï¼Ÿ**

â€‹	å› ä¸ºæ¯æ¬¡æ›´æ–°maxAreaçš„å‰ææ˜¯æœ‰å…ƒç´ å‡ºæ ˆï¼Œå¦‚æœ$heights[i]$å°äºæ‰€æœ‰æ ˆä¸­çš„å…ƒç´ , å¯¼è‡´æœ€åæ ˆä¸ºç©ºæ²¡æœ‰æ–°æ ˆé¡¶æ€ä¹ˆåŠ?  

â€‹	è®¾ç½®ä¸€ä¸ªé«˜åº¦ä¸º0çš„è™šæ‹Ÿbaræ”¾åœ¨æœ€å‰ç«¯, åœ¨æœ¬é¢˜çš„é¢˜æ„ä¸‹, è‚¯å®šé«˜åº¦ä¸º0æ˜¯æœ€å°çš„äº†ã€‚è¿™æ ·ä¼šå§‹ç»ˆä¿è¯æ ˆä¸­å­˜åœ¨ä¸€ä¸ªå…ƒç´ ã€‚



**â–¼æ ˆä¸­æœ€åå‰©ä¸‹æ¥çš„å…ƒç´ æ€ä¹ˆåŠï¼Ÿ**

â€‹	maxAreaçš„æ›´æ–°æ˜¯å› ä¸º$heights[i]$<æ ˆé¡¶å…ƒç´  ä»è€Œå¯¼è‡´å‡ºæ ˆï¼Œå¯æ˜¯æœ€åä¸ä¸€å®šæ‰€æœ‰å…ƒç´ éƒ½èƒ½å‡ºæ ˆï¼ˆæ¯”å¦‚æœ€åä¸€ä¸ªå…ƒç´ æ°¸è¿œæ— æ³•å‡ºæ ˆï¼‰ã€‚å› æ­¤æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªè¾…åŠ©å…ƒç´ 0æ”¾åœ¨æœ€åï¼Œè¿™æ ·èƒ½ä¿è¯æ‰€æœ‰å…ƒç´ éƒ½èƒ½å‡ºæ ˆå¹¶è®¡ç®—å…¶å¯¹åº”çš„maxAreaã€‚ ï¼ˆå¦‚æœæœ€åä¸€ä¸ªå…ƒç´ ä¸º0å‘¢ï¼Ÿè¿™ç§æƒ…å†µä¸ä¼šå‡ºæ ˆï¼Œä½†ä¸å‡ºæ ˆä¹Ÿä¸ä¼šå½±å“ç»“æœï¼‰



**â–¼ä¸¾ä¾‹åŠ æ·±ç†è§£**

è¿™é‡Œä»¥[2,1,5,6,2,3]ä¸ºä¾‹:

 <img src="ä¸“é¢˜.assets/image-20210420185911961.png" alt="image-20210420185911961" style="zoom:67%;" />



**æ—¶é—´å¤æ‚åº¦: O(n)**

**ç©ºé—´å¤æ‚åº¦: O(n)**

```js
/**
 * @param {number[]} heights
 * @return {number}
 */
const largestRectangleArea = function(heights) {
	const heightArr=[0,...heights,0];
	const stack=[];  //stackè®°å½•çš„æ˜¯heightArrä¸­å…ƒç´ çš„index
	let maxArea=0;
	for (let i=0;i<heightArr.length;i++){
		//å½“å‰çš„å€¼å°äºæ ˆé¡¶å…ƒç´ æ—¶
		while (stack.length&&heightArr[i]<heightArr[stack[stack.length-1]]){ //stack[-1]:undefined
			//å› ä¸ºæ ˆåº•è‚¯å®šæ˜¯0,æ‰€ä»¥ä¸ç”¨æ‹…å¿ƒæ ˆä¸ºç©ºçš„æƒ…å†µ
			let top=stack.pop();  //æ ˆé¡¶å…ƒç´ å‡ºæ ˆ
			maxArea=Math.max(
				maxArea,
				//è®¡ç®—å‡ºæ ˆçš„barå½¢æˆçš„é•¿æ–¹å½¢é¢ç§¯
				heightArr[top]*(i-stack[stack.length-1]-1)
			)
		}
		/*æ³¨æ„å…¥æ ˆçš„æ˜¯indexä¸æ˜¯value!!!*/
		stack.push(i);  //ç»è¿‡whileåæ ˆé¡¶å…ƒç´ é«˜åº¦è‚¯å®šå°äºç­‰äºå½“å‰çš„bar,å…¥æ ˆ
	}
	return maxArea;
};
```

ğŸ’£æ„Ÿè§‰è¿™ä¸ªæ–¹æ³•æŒºå¥½çš„ï¼Œ ä¸çŸ¥é“ä¸ºå•¥æ—¶ç©ºæ•ˆç‡è¿™ä¹ˆä½

 <img src="ä¸“é¢˜.assets/image-20210424220554468.png" alt="image-20210424220554468" style="zoom:67%;" />

ğŸ˜…æ›´æ–°:æ—¶ç©ºæ•ˆç‡ä½åœ°åŸå› æ‰¾åˆ°äº†

```js
const heightArr=[0,...heights,0];
//æ¢æˆ
heights.unshift(0), heights.push(0);
```





tips:

1. whileä¸­stack.lengthçš„åˆ¤æ–­å…¶å®å¯ä»¥å»æ‰, å› ä¸ºåé¢ä¸ºundefinedæ— æ³•åˆ¤æ–­ä¹Ÿä¼šè¿”å›false, ä½†åŠ ä¸Šæ›´åŠ ä¸¥è°¨è€Œä¸”æ—¶é—´æœ‰æ•ˆç‡æœ‰æ‰€æå‡



ğŸŒŸå¤ä¹ åæ€

1. åœ¨åŸæœ‰çš„heightsæ•°ç»„å‰åå¢åŠ ä¸¤ä¸ª0çš„ç”¨é€”è¦ææ¸… (å‰åä¸ä¸€æ ·çš„å“¦)
2. stackè®°å½•çš„æ˜¯index!!!åœ¨æˆ‘ä»¬æ¯”è¾ƒå…ƒç´ å¤§å°(value)å’Œè®¡ç®—å®½åº¦(é‡‡ç”¨index)æ—¶è¦æ³¨æ„



###### 3.å•è°ƒæ ˆå¯»æ‰¾å·¦å³è¾¹ç•Œ

å…¶å®è¿™ç§æ–¹æ³•æ²¡æœ‰ç¬¬äºŒç§æ–¹æ³•å¥½, å› ä¸ºéœ€è¦ä¸¤æ¬¡å¾ªç¯, ä½†æ˜¯æˆ‘è§‰å¾—è¿™ç§æ–¹æ³•å’Œè…¾è®¯é‚£é“é€›è¡—çš„é¢˜ç‰¹åˆ«ç›¸ä¼¼,æ‰€ä»¥è¿˜æ˜¯ç†è§£ä¸€ä¸‹!!! å°±æ˜¯è®¡ç®—ä»¥å½“å‰çŸ©å½¢é«˜åº¦ä¸ºæœ€å°é«˜åº¦æ—¶çš„å·¦å³è¾¹ç•Œ

å¤§è‡´æ€è·¯: 

1. ä»å·¦åˆ°å³å¾ªç¯æ‰¾åˆ°å·¦è¾¹ç•Œ (ifå•è°ƒæ ˆä¸ºç©ºåˆ™è¡¨ç¤ºä¹‹å‰çš„éƒ½æ»¡è¶³,æ‰€ä»¥æ­¤æ—¶å·¦è¾¹ç•Œä¸º-1)
2. ä»å³åˆ°å·¦å¯»æ‰¾å³è¾¹ç•Œ(ä¹Ÿæ˜¯åˆ©ç”¨å•è°ƒæ ˆåŒæ ·çš„æ€è·¯)
3. æœ€åé€šè¿‡å·¦å³è¾¹ç•Œå†æ±‚å‡ºå®½åº¦è®¡ç®—maxArea



![image-20210424215647731](ä¸“é¢˜.assets/image-20210424215647731.png)

```js
/**
 * @param {number[]} heights
 * @return {number}
 */
const largestRectangleArea = function(heights) {
	//ç¬¬ä¸€ä¸ª0æ˜¯é˜²æ­¢å•è°ƒæ ˆä¸ºç©ºçš„æƒ…å†µ
	//ç¬¬äºŒä¸ª0æ˜¯ä¸ºäº†æœ€åå°†å•è°ƒæ ˆæ¸…ç©º
	const stack=[];
	const left=[],right=[];  //è¿™é‡Œå­˜å‚¨çš„æ˜¯indexä¸æ˜¯value
	let maxArea=0;
	const len=heights.length;

	//ä»å·¦åˆ°å³è®¡ç®—å·¦è¾¹ç•Œ
	for (let i = 0; i < len; i++) {
		//åªè¦å¤§äºç­‰äºçš„éƒ½å‡ºæ ˆ,è¿™é‡Œç®—çš„æ˜¯èƒ½åˆ°è¾¾çš„æœ€è¿œçš„å·¦è¾¹ç•Œçš„ä½ç½®(ä¸åŒ…å«å·¦è¾¹ç•Œ)
		while (stack.length&&heights[i]<=heights[stack[stack.length-1]]){
			stack.pop();
		}
		//è¿™é‡Œå·¦è¾¹æœ‰ä¸€ä¸ªå“¨å…µ(ä½ç½®ä¸º-1),ä½†å¹¶æ²¡æœ‰å®é™…æ·»åŠ ä¸Šå»
		left[i]= stack.length? stack[stack.length-1]:-1;
		stack.push(i);

	}

	stack.length=0;
	//ä»å³åˆ°å·¦è®¡ç®—å³è¾¹ç•Œ
	for (let i =len-1; i >=0; i--) {
		//stack.lengthåˆ¤æ–­æ¡ä»¶å…¶å®å¯ä»¥å»æ‰,å› ä¸º<å³è¾¹ä¸ºundefinedçš„è¯é»˜è®¤ä¸ºfalse,åŠ ä¸Šä¸¥è°¨!
		while (stack.length&&heights[i]<=heights[stack[stack.length-1]]){
			stack.pop();
		}
		right[i]=stack.length? stack[stack.length-1]:len;
		stack.push(i);
	}

	for (let i = 0; i < len; i++) {
		maxArea=Math.max(
			maxArea,
			heights[i]*(right[i]-left[i]-1)
		)
	}
	return maxArea;
};
```

ğŸš©æ ˆä¸­å¤§äºç­‰äºå½“å‰é«˜åº¦çš„éƒ½è¦å‡ºæ ˆï¼Œæ˜¯å› ä¸ºå¤§äºç­‰äºçš„éƒ½å¯ä»¥æ»¡è¶³è¦æ±‚ç»„æˆçŸ©å½¢ï¼Œå‡ºæ ˆåæ–¹ä¾¿è®¡ç®—æœ€å¤§çš„å®½åº¦ï¼



 æ¯”ç¬¬äºŒç§æ–¹æ³•ç¨å¾®æ…¢ä¸€ç‚¹, ä½†åˆ†æ­¥éª¤æ˜“ç†è§£ä¸€äº›

<img src="ä¸“é¢˜.assets/image-20210424220350511.png" alt="image-20210424220350511" style="zoom:67%;" /> 

â—å½“ç„¶è¿™é‡Œå¦‚æœæƒ³å’Œç¬¬äºŒç§æ–¹æ³•ä¸€æ ·æ˜¾å¼åœ°æ·»åŠ å“¨å…µä¹Ÿæ˜¯å¯ä»¥çš„, è€Œä¸”åªéœ€è¦æ¢æˆä¸‹é¢è¿™æ ·å³å¯, å…¶ä½™çš„ä¸éœ€è¦æ”¹å˜

```js
const heightsArr=[0,...heights,0];
```



#### â˜…â˜…â˜…4.æ¥é›¨æ°´

è¿™é“é¢˜å’Œä¸Šé¢çš„ç±»ä¼¼, ä¸è¿‡å¤„ç†èµ·æ¥æ›´ç®€å•! åƒlc84è¿˜éœ€è¦è€ƒè™‘å“¨å…µçš„é—®é¢˜, è¿™é‡Œå°±ä¸ç”¨è€ƒè™‘â—

[æ¥é›¨æ°´-link](https://leetcode-cn.com/problems/trapping-rain-water/)



ç»™å®š *n* ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºæ¯ä¸ªå®½åº¦ä¸º 1 çš„æŸ±å­çš„é«˜åº¦å›¾ï¼Œè®¡ç®—æŒ‰æ­¤æ’åˆ—çš„æŸ±å­ï¼Œä¸‹é›¨ä¹‹åèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

![img](ä¸“é¢˜.assets/rainwatertrap.png)

```
è¾“å…¥ï¼šheight = [0,1,0,2,1,0,1,3,2,1,2,1]
è¾“å‡ºï¼š6
è§£é‡Šï¼šä¸Šé¢æ˜¯ç”±æ•°ç»„ [0,1,0,2,1,0,1,3,2,1,2,1] è¡¨ç¤ºçš„é«˜åº¦å›¾ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ¥ 6 ä¸ªå•ä½çš„é›¨æ°´ï¼ˆè“è‰²éƒ¨åˆ†è¡¨ç¤ºé›¨æ°´ï¼‰ã€‚ 
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šheight = [4,2,0,3,2,5]
è¾“å‡ºï¼š9
```

 

**æç¤ºï¼š**

- `n == height.length`
- `0 <= n <= 3 * 104`
- `0 <= height[i] <= 105`



â–¼æ›´å¤šç¤ºä¾‹:

 <img src="https://gitee.com/shanxiansen310/picrepo/raw/master/img/2912DC9E90E90D91C6ED3FE60D773244.png" style="zoom: 33%;" />



##### way1:å•è°ƒæ ˆ

æ€è·¯å’Œä¸Šé¢ç±»ä¼¼

**æ—¶é—´å¤æ‚åº¦: O(n):**

**ç©ºé—´å¤æ‚åº¦: O(n):**

```js
/**
 * @param {number[]} height
 * @return {number}
 */
var trap = function(height) {
	let maxDrop = 0;
	const stack = [];

	for (let i = 0; i < height.length; i++) {
		while (stack.length && height[i] >= height[stack[stack.length - 1]]) {
			let topIndex = stack.pop();

			//å› ä¸ºè®¡ç®—é›¨æ°´éœ€è¦æ ˆé‡Œçš„ä¸¤ä¸ªæŸ±å­æ¥è®¡ç®—é«˜åº¦, å› æ­¤å‡ºæ ˆä¸€ä¸ªåå¿…é¡»è¿˜è¦ä¿è¯æœ‰ä¸€ä¸ªæŸ±å­
			if (stack.length) {
				//è¿™é‡Œä¹Ÿè€ƒè™‘äº†æ ˆä¸­é«˜åº¦ç›¸åŒçš„æŸ±å­,é‡è§é«˜åº¦ç›¸åŒçš„æŸ±å­ä¼šå‡ºæ ˆä¿ç•™åé¢ä¸€ä¸ª
				let h = Math.min(height[i], height[stack[stack.length - 1]]) - height[topIndex];
				let width = i - stack[stack.length - 1] - 1;
				maxDrop += h * width;
			}
		}

		stack.push(i);
	}
	return maxDrop;
};
```



**ğŸŒŸå…³é”®:**

1. åœ¨è¿›è¡Œå•è°ƒæ ˆçš„popæ—¶, è¿™é‡Œçš„å•ä½ä½“ç§¯æˆ‘ä»¬æ˜¯é€šè¿‡å½“å‰æŸ±å­ä¸Šé¢çš„ç©ºé—´æ¥è®¡ç®—çš„, é«˜åº¦å–å‰åä¸¤æ ¹æŸ±å­æœ€å°çš„ (ç±»ä¼¼äºæœ¨æ¡¶åŸç†) å‡å»å½“å‰æŸ±å­çš„é«˜åº¦, widthå’Œå‰é¢çš„ä¸€æ ·
2. é‡è§ç›¸åŒé«˜åº¦çš„æŸ±å­æ—¶ä¾ç„¶ä¼šè¿›å…¥pop, ä½†è¿™é‡Œè®¡ç®—é«˜åº¦æ—¶ä¼šæ˜¯0, å› æ­¤ä¸ç”¨å»ç®¡ã€‚ä¸€èˆ¬ä¼šä¿ç•™æœ€åä¸€ä¸ªæŸ±å­
3. è¿™é‡Œçš„é«˜åº¦è®¡ç®—ä¸ç”¨å‘å‰é¢çš„ä¸€æ ·æ·»åŠ å“¨å…µï¼Œå› ä¸ºå®é™…ä¸Šæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ å°±ç›¸å½“äºäº†å“¨å…µï¼ˆæˆ‘ä»¬æ°¸è¿œä¸ä¼šå»è®¡ç®—ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ èƒ½æ¥åˆ°çš„é›¨æ°´ï¼‰
4. ç‰¹æ®Šæƒ…å†µï¼š length<=2æ—¶ä¹Ÿä¼šè¿”å› 0, å½“ç„¶å¯ä»¥åœ¨å‰é¢æ·»åŠ ä¸€ä¸ªåˆ¤æ–­



â—

1. è¿™é‡Œæ˜¯è®¡ç®—æ‰€æœ‰çš„é›¨æ»´æ•°, å‰é¢æ˜¯è®¡ç®—æœ€å¤§çš„, æœ‰äº›è®¸ä¸åŒ!









##### way2:åŠ¨æ€è§„åˆ’

(ğŸ˜…å…¶å®å°±æ˜¯ä»å·¦åˆ°å³+ä»å³åˆ°å·¦ä¸¤æ¬¡å¾ªç¯)



**æ—¶é—´å¤æ‚åº¦: O(n):**

**ç©ºé—´å¤æ‚åº¦: O(n):**

```js
/**
 * @param {number[]} height
 * @return {number}
 */
const trap = function(height) {
	if (height.length<=2) return 0;
	let maxDrop=0;
	const leftMax=[height[0]],rightMax=[];
	rightMax[height.length-1]=height[height.length-1];

	for (let i = 1; i < height.length; i++) {
		leftMax[i]=Math.max(leftMax[i-1],height[i]);
	}
	for (let i = height.length-2; i >=0 ; i--) {
		rightMax[i]=Math.max(rightMax[i+1],height[i]);
	}

	for (let i = 0; i < height.length; i++) {
		maxDrop+=Math.min(leftMax[i],rightMax[i])-height[i];
	}

	return maxDrop;
};
```

è¿™ä¸ªæ•ˆç‡ç›¸å¯¹ä½ä¸€ç‚¹

 <img src="https://gitee.com/shanxiansen310/picrepo/raw/master/img/20210517111549.png" style="zoom:67%;" />





#### â˜…5.æ¯æ—¥æ¸©åº¦ (ç®€å•å…¥é—¨çº§åˆ«)

[739. æ¯æ—¥æ¸©åº¦](https://leetcode-cn.com/problems/daily-temperatures/)

éš¾åº¦ä¸­ç­‰

è¯·æ ¹æ®æ¯æ—¥ `æ°”æ¸©` åˆ—è¡¨ï¼Œé‡æ–°ç”Ÿæˆä¸€ä¸ªåˆ—è¡¨ã€‚å¯¹åº”ä½ç½®çš„è¾“å‡ºä¸ºï¼šè¦æƒ³è§‚æµ‹åˆ°æ›´é«˜çš„æ°”æ¸©ï¼Œè‡³å°‘éœ€è¦ç­‰å¾…çš„å¤©æ•°ã€‚å¦‚æœæ°”æ¸©åœ¨è¿™ä¹‹åéƒ½ä¸ä¼šå‡é«˜ï¼Œè¯·åœ¨è¯¥ä½ç½®ç”¨ `0` æ¥ä»£æ›¿ã€‚

ä¾‹å¦‚ï¼Œç»™å®šä¸€ä¸ªåˆ—è¡¨ `temperatures = [73, 74, 75, 71, 69, 72, 76, 73]`ï¼Œä½ çš„è¾“å‡ºåº”è¯¥æ˜¯ `[1, 1, 4, 2, 1, 1, 0, 0]`ã€‚

**æç¤ºï¼š**`æ°”æ¸©` åˆ—è¡¨é•¿åº¦çš„èŒƒå›´æ˜¯ `[1, 30000]`ã€‚æ¯ä¸ªæ°”æ¸©çš„å€¼çš„å‡ä¸ºåæ°åº¦ï¼Œéƒ½æ˜¯åœ¨ `[30, 100]` èŒƒå›´å†…çš„æ•´æ•°ã€‚



```js
/**
 * @param {number[]} temperatures
 * @return {number[]}
 */
const dailyTemperatures = function(temperatures){
	const len=temperatures.length;  
  ////æ²¡æœ‰è¿›è¡Œä¿®æ”¹çš„è¯´æ˜æ‰¾ä¸åˆ°æ›´å¤§çš„å¤©æ°”
	const waitDays=Array(len).fill(0),stack=[];  //éä¸¥æ ¼å•è°ƒé€’å‡æ ˆï¼Œ è®°å½•index
	for (let i = 0; i < len; i++) {
		while (stack.length&&temperatures[i]>temperatures[stack[stack.length-1]]){
			const topIndex=stack.pop();
			waitDays[topIndex]=i-topIndex;
		}
		stack.push(i);
	}
	return waitDays;
}
```

æ—¶ç©ºå¤æ‚åº¦éƒ½æ˜¯O(n)

ğŸŒŸåŸºæœ¬æ€è·¯å’Œå‰é¢çš„éƒ½ä¸€æ ·

1. è¿”å›æ•°ç»„åˆå§‹åŒ–ä¸º0ï¼Œå› ä¸ºåªå¯¹åœ¨åé¢å¤©æ°”ä¼šå‡é«˜çš„æ°”æ¸©è¿›è¡Œä¿®æ”¹ï¼Œä¸è¿›è¡Œä¿®æ”¹çš„åœ¨è¿™ä¹‹åè‚¯å®šå°±è§‚æµ‹ä¸åˆ°æ›´é«˜çš„æ°”æ¸©
2. åªéœ€è¦è®¡ç®—å®½åº¦å³å¯





#### â˜…6.ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  (ç®€å•å˜ä½“)

[496. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  I](https://leetcode-cn.com/problems/next-greater-element-i/)



ç»™ä½ ä¸¤ä¸ª **æ²¡æœ‰é‡å¤å…ƒç´ ** çš„æ•°ç»„ `nums1` å’Œ `nums2` ï¼Œå…¶ä¸­`nums1` æ˜¯ `nums2` çš„å­é›†ã€‚

è¯·ä½ æ‰¾å‡º `nums1` ä¸­æ¯ä¸ªå…ƒç´ åœ¨ `nums2` ä¸­çš„ä¸‹ä¸€ä¸ªæ¯”å…¶å¤§çš„å€¼ã€‚

`nums1` ä¸­æ•°å­— `x` çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ æ˜¯æŒ‡ `x` åœ¨ `nums2` ä¸­å¯¹åº”ä½ç½®çš„å³è¾¹çš„ç¬¬ä¸€ä¸ªæ¯” `x` å¤§çš„å…ƒç´ ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œå¯¹åº”ä½ç½®è¾“å‡º `-1` ã€‚

 

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums1 = [4,1,2], nums2 = [1,3,4,2].
è¾“å‡º: [-1,3,-1]
è§£é‡Š:
    å¯¹äº num1 ä¸­çš„æ•°å­— 4 ï¼Œä½ æ— æ³•åœ¨ç¬¬äºŒä¸ªæ•°ç»„ä¸­æ‰¾åˆ°ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°å­—ï¼Œå› æ­¤è¾“å‡º -1 ã€‚
    å¯¹äº num1 ä¸­çš„æ•°å­— 1 ï¼Œç¬¬äºŒä¸ªæ•°ç»„ä¸­æ•°å­—1å³è¾¹çš„ä¸‹ä¸€ä¸ªè¾ƒå¤§æ•°å­—æ˜¯ 3 ã€‚
    å¯¹äº num1 ä¸­çš„æ•°å­— 2 ï¼Œç¬¬äºŒä¸ªæ•°ç»„ä¸­æ²¡æœ‰ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°å­—ï¼Œå› æ­¤è¾“å‡º -1 ã€‚
```



**ç¤ºä¾‹ 2:**

```
è¾“å…¥: nums1 = [2,4], nums2 = [1,2,3,4].
è¾“å‡º: [3,-1]
è§£é‡Š:
    å¯¹äº num1 ä¸­çš„æ•°å­— 2 ï¼Œç¬¬äºŒä¸ªæ•°ç»„ä¸­çš„ä¸‹ä¸€ä¸ªè¾ƒå¤§æ•°å­—æ˜¯ 3 ã€‚
    å¯¹äº num1 ä¸­çš„æ•°å­— 4 ï¼Œç¬¬äºŒä¸ªæ•°ç»„ä¸­æ²¡æœ‰ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°å­—ï¼Œå› æ­¤è¾“å‡º -1 ã€‚
```


 æç¤ºï¼š

1 <= nums1.length <= nums2.length <= 1000
0 <= nums1[i], nums2[i] <= 104
nums1å’Œnums2ä¸­æ‰€æœ‰æ•´æ•° äº’ä¸ç›¸åŒ
nums1 ä¸­çš„æ‰€æœ‰æ•´æ•°åŒæ ·å‡ºç°åœ¨ nums2 ä¸­



ğŸš©

>æ ˆï¼ˆstackï¼‰æ˜¯å¾ˆç®€å•çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå…ˆè¿›åå‡ºçš„é€»è¾‘é¡ºåºï¼Œç¬¦åˆæŸäº›é—®é¢˜çš„ç‰¹ç‚¹ï¼Œæ¯”å¦‚è¯´å‡½æ•°è°ƒç”¨æ ˆã€‚
>
>å•è°ƒæ ˆå®é™…ä¸Šå°±æ˜¯æ ˆï¼Œåªæ˜¯åˆ©ç”¨äº†ä¸€äº›å·§å¦™çš„é€»è¾‘ï¼Œä½¿å¾—æ¯æ¬¡æ–°å…ƒç´ å…¥æ ˆåï¼Œæ ˆå†…çš„å…ƒç´ éƒ½ä¿æŒæœ‰åºï¼ˆå•è°ƒé€’å¢æˆ–å•è°ƒé€’å‡ï¼‰ã€‚
>
>å¬èµ·æ¥æœ‰ç‚¹åƒå †ï¼ˆheapï¼‰ï¼Ÿä¸æ˜¯çš„ï¼Œå•è°ƒæ ˆç”¨é€”ä¸å¤ªå¹¿æ³›ï¼Œåªå¤„ç†ä¸€ç§å…¸å‹çš„é—®é¢˜ï¼Œå«åš Next Greater Elementã€‚



â˜…ç®€å•æ€è·¯: ç”±äºnums1æ˜¯nums2çš„å­é›†ï¼Œå› æ­¤æˆ‘ä»¬å…ˆé€šè¿‡ä¸€ä¸ªforå¾ªç¯å¯¹nums2ä¸­çš„æ‰€æœ‰æ•°æ®é‡‡ç”¨å•è°ƒæ ˆæ±‚ next greater numberï¼Œç„¶åå†é€šè¿‡ä¸€ä¸ªforå¾ªç¯å¯»æ‰¾åˆ°nums1ä¸­çš„å…ƒç´ åœ¨nums2ä¸­å¯¹åº”çš„ä½ç½®ï¼Œè¿›è€Œå¾—åˆ°next greater number

```js
/**
 * @param {number[]} nums1
 * @param {number[]} nums2
 * @return {number[]}
 */
const nextGreaterElement = function(nums1, nums2) {
	const res=[];
	const nextGreater=Array(nums2.length).fill(-1);
	const monoStack=[];    //ä¸€ä¸ªå•è°ƒé€’å‡æ ˆ
	for (let i = 0; i < nums2.length; i++) {
		while (monoStack.length&&nums2[monoStack[monoStack.length-1]]<nums2[i]){
			let topIndex=monoStack.pop();
			nextGreater[topIndex]=nums2[i];
		}
		monoStack.push(i);
	}
	for (let i = 0; i < nums1.length; i++) {
		let index=nums2.indexOf(nums1[i]);
		res[i]=nextGreater[index];
	}
	return res;
};
```

â–¼å®é™…ä¸Šè¿˜æ˜¯å•è°ƒæ ˆçš„æ€è·¯ï¼





#### â˜…â˜…7.ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ (å¾ªç¯æ•°ç»„)



[503. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  II](https://leetcode-cn.com/problems/next-greater-element-ii/)

éš¾åº¦ä¸­ç­‰430æ”¶è—åˆ†äº«åˆ‡æ¢ä¸ºè‹±æ–‡æ¥æ”¶åŠ¨æ€åé¦ˆ

ç»™å®šä¸€ä¸ªå¾ªç¯æ•°ç»„ï¼ˆæœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ æ˜¯æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œè¾“å‡ºæ¯ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ã€‚æ•°å­— x çš„ä¸‹ä¸€ä¸ªæ›´å¤§çš„å…ƒç´ æ˜¯æŒ‰æ•°ç»„éå†é¡ºåºï¼Œè¿™ä¸ªæ•°å­—ä¹‹åçš„ç¬¬ä¸€ä¸ªæ¯”å®ƒæ›´å¤§çš„æ•°ï¼Œè¿™æ„å‘³ç€ä½ åº”è¯¥å¾ªç¯åœ°æœç´¢å®ƒçš„ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¾“å‡º -1ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: [1,2,1]
è¾“å‡º: [2,-1,2]
è§£é‡Š: ç¬¬ä¸€ä¸ª 1 çš„ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°æ˜¯ 2ï¼›
æ•°å­— 2 æ‰¾ä¸åˆ°ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°ï¼› 
ç¬¬äºŒä¸ª 1 çš„ä¸‹ä¸€ä¸ªæœ€å¤§çš„æ•°éœ€è¦å¾ªç¯æœç´¢ï¼Œç»“æœä¹Ÿæ˜¯ 2ã€‚
```

**æ³¨æ„:** è¾“å…¥æ•°ç»„çš„é•¿åº¦ä¸ä¼šè¶…è¿‡ 10000ã€‚



**ğŸš©è¿™é‡Œè®²ä¸€ä¸‹å¾ªç¯æ•°ç»„çš„å¤„ç†æ–¹æ³•:**

1. ä¸€ç§å®ç°æ–¹å¼æ˜¯ï¼ŒæŠŠæ•°ç»„å¤åˆ¶ä¸€ä»½åˆ°æ•°ç»„æœ«å°¾ï¼Œè¿™æ ·è™½ç„¶ä¸æ˜¯ä¸¥æ ¼çš„å¾ªç¯æ•°ç»„ï¼Œä½†æ˜¯å¯¹äºæœ¬é¢˜å·²ç»è¶³å¤Ÿäº†ï¼Œå› ä¸ºæœ¬é¢˜å¯¹æ•°ç»„æœ€å¤šéå†ä¸¤æ¬¡ã€‚
2. å¦ä¸€ä¸ªå¸¸è§çš„å®ç°æ–¹å¼æ˜¯ï¼Œä½¿ç”¨å–æ¨¡è¿ç®— % å¯ä»¥æŠŠä¸‹æ ‡ i æ˜ å°„åˆ°æ•°ç»„ nums é•¿åº¦çš„ 0âˆ’N å†…ã€‚



##### way1:  å¤åˆ¶æ•°ç»„

```js
/**
 * @param {number[]} nums
 * @return {number[]}
 */
const nextGreaterElements = function(nums) {
	const monoStack=[];
	const next=Array(2*nums.length).fill(-1);
	let circularNums=[...nums,...nums];
	for (let i = 0; i < circularNums.length; i++) {
		while (monoStack.length&&circularNums[i]>circularNums[monoStack[monoStack.length-1]]){
			let topIndex=monoStack.pop();
			next[topIndex]=circularNums[i];
		}
		monoStack.push(i);
	}
	return next.slice(0,nums.length)
};

```



##### way2: å–æ¨¡

```js
/**
 * @param {number[]} nums
 * @return {number[]}
 */
const nextGreaterElements = function(nums){
	const stack=[],len=nums.length;
	const nextArr=Array(len).fill(-1);
	for (let i = 0; i < len*2; i++) {
		while (stack.length&&nums[i%len]>nums[stack[stack.length-1]]){
			const topIndex=stack.pop();
			nextArr[topIndex]=nums[i%len];
		}
		stack.push(i%len);
	}
	return nextArr;
}
```

ğŸš©è¿™é‡Œ $i$ å– $[0,len*2-1]$ æˆ– $[0,len*2-2]$  éƒ½ä¸€æ ·çš„, å› ä¸ºæœ€åä¸€ä¸ªå…ƒç´ å…¶å®å¹¶ä¸éœ€è¦å†è®¡ç®—!





#### [â˜…â˜…581. æœ€çŸ­æ— åºè¿ç»­å­æ•°ç»„](https://leetcode-cn.com/problems/shortest-unsorted-continuous-subarray/)

éš¾åº¦ä¸­ç­‰

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œä½ éœ€è¦æ‰¾å‡ºä¸€ä¸ª **è¿ç»­å­æ•°ç»„** ï¼Œå¦‚æœå¯¹è¿™ä¸ªå­æ•°ç»„è¿›è¡Œå‡åºæ’åºï¼Œé‚£ä¹ˆæ•´ä¸ªæ•°ç»„éƒ½ä¼šå˜ä¸ºå‡åºæ’åºã€‚

è¯·ä½ æ‰¾å‡ºç¬¦åˆé¢˜æ„çš„ **æœ€çŸ­** å­æ•°ç»„ï¼Œå¹¶è¾“å‡ºå®ƒçš„é•¿åº¦ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [2,6,4,8,10,9,15]
è¾“å‡ºï¼š5
è§£é‡Šï¼šä½ åªéœ€è¦å¯¹ [6, 4, 8, 10, 9] è¿›è¡Œå‡åºæ’åºï¼Œé‚£ä¹ˆæ•´ä¸ªè¡¨éƒ½ä¼šå˜ä¸ºå‡åºæ’åºã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3,4]
è¾“å‡ºï¼š0
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [1]
è¾“å‡ºï¼š0
```

 

**æç¤ºï¼š**

- `1 <= nums.length <= 104`
- `-105 <= nums[i] <= 105`

 

**è¿›é˜¶ï¼š**ä½ å¯ä»¥è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º `O(n)` çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ



â–¼æ€è·¯: å°±æ˜¯æ™®é€šçš„å•è°ƒæ ˆ, ä¸è¿‡éœ€è¦æœ‰äº›ç‰¹æ®Šçš„è€ƒè™‘!!!

æˆ‘è¿™é‡Œé‡‡ç”¨çš„æ˜¯è®°å½•startå’Œendã€‚startæ˜¯æœ€æ—©å‘ç”Ÿé¡ºåºé”™ä¹±çš„ä½ç½® (å¤§çš„é‚£ä¸ªæ•°çš„ä½ç½®, æˆ–è€…è¯´å‡ºæ ˆçš„æ•°ä¸­indexæœ€å°çš„)ï¼Œendæ˜¯æœ€åå‘ç”Ÿä½ç½®é”™ä¹±çš„ä½ç½®ã€‚



**æ—¶é—´å¤æ‚åº¦: $O(n)$:**

**ç©ºé—´å¤æ‚åº¦: $O(n)$:**

```js
/**
 * @param {number[]} nums
 * @return {number}
 */
const findUnsortedSubarray = function(nums) {
	//è®°å½•ä½ç½®ï¼Œä¸€ä¸ªstart(æœ€å…ˆå¼€å§‹å‘ç”Ÿé™åºçš„åœ°æ–¹ï¼Œå‡ºæ ˆçš„é‚£ä¸ªæ•°)ï¼Œä¸€ä¸ªend
	let start=nums.length,end=0,maxNum=-Infinity;
	const stack=[],len=nums.length;

	for (let i = 0; i < len; i++) {
		while (stack.length&&nums[i]<nums[stack[stack.length-1]]){
			end=i;
			let topIndex=stack.pop();
			start=Math.min(start,topIndex);
			maxNum=Math.max(maxNum,nums[topIndex]);
		}
		stack.push(i);
	}
	while (end+1<len&&nums[end+1]<maxNum&&end++){}
	return start===len? 0:end-start+1;
};
```

 <img src="ä¸“é¢˜.assets/image-20210606215447278.png" alt="image-20210606215447278" style="zoom:67%;" />

â—<span style="font-weight:bold; color:red;">æ³¨æ„:</span>

1. stackè®°å½•çš„æ˜¯indexï¼ŒmaxNumè®°å½•çš„æ˜¯å‡ºæ ˆçš„å…ƒç´ ä¸­æœ€å¤§çš„
2. whileå¾ªç¯æ˜¯å› ä¸ºendè®°å½•çš„å¹¶ä¸ä¸€å®šæ˜¯æœ€åçš„ä½ç½®ï¼Œæ¯”å¦‚ [1,6,2,2,3] æœ€åè®°å½•çš„endæ˜¯2(index), ä½†å®é™…ä¸Šendåº”è¯¥ä¸º5(index)ã€‚æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸å°äºmaxNumçš„é‚£ä¸ªæ•°çš„ä½ç½®æ‰æ˜¯end
3. æœ€åè¦ä»end+1å¼€å§‹åˆ¤æ–­ï¼Œå› ä¸º $nums[end]$ è‚¯å®šå°äºmaxNumã€‚è€Œä¸”å¦‚æœä¸è¿™æ ·å®‰æ’çš„è¯æœ€åendä¼šæ¯”ç†æƒ³ä¸­çš„å¤§ $1$ , åˆ™åé¢çš„è®¡ç®— $end-start+1$ å°±ä¼šå‡ºé”™!
4. æœ‰å¯èƒ½æœ¬èº«å°±æ˜¯å‡åºçš„ï¼Œä½†startåˆä¸èƒ½å–å¾ˆå°çš„æ•°ï¼Œæ‰€ä»¥æœ€åè¦åˆ¤æ–­æ˜¯å¦æœ‰åºï¼



ğŸ’£è¿™é“é¢˜ç¡®å®æœ‰ç‚¹éš¾åº¦!!!  éœ€è¦å¤šè€ƒè™‘!!!  æ¯”å¦‚ startå’Œendçš„è®°å½•, æœ€åçš„while, å…¨æœ‰åºçš„æƒ…å†µ!







### å•è°ƒæ ˆ2



ğŸš©è¿™ç±»çš„å•è°ƒæ ˆä¸»è¦è§£å†³åˆ é™¤æˆ–è€…ä¿ç•™è‹¥å¹²ä¸ªå­—ç¬¦ï¼Œä½¿å¾—å‰©ä¸‹çš„æ•°å­—æœ€å°ï¼ˆæˆ–æœ€å¤§ï¼‰æˆ–è€…å­—å…¸åºæœ€å°ï¼ˆæˆ–æœ€å¤§ï¼‰çš„é—®é¢˜ã€‚è€Œè§£å†³é—®é¢˜çš„å‰ææ˜¯è¦æœ‰ä¸€å®šæ•°å­¦å‰æã€‚è€ŒåŸºäºè¿™ä¸ªæ•°å­¦å‰æï¼Œæˆ‘ä»¬è´ªå¿ƒåœ°åˆ é™¤æ ˆä¸­ç›¸é‚»çš„å­—ç¬¦ã€‚



è¿™å°±æ˜¯æ¥ä¸‹æ¥è¦ç»™å¤§å®¶è®²çš„å››ä¸ªé¢˜ï¼Œå…¶ä¸­ 1081 å’Œ 316 é¢˜åªæ˜¯æ¢äº†è¯´æ³•è€Œå·²ã€‚

- [316. å»é™¤é‡å¤å­—æ¯](https://leetcode-cn.com/problems/remove-duplicate-letters/)(å›°éš¾)
- [321. æ‹¼æ¥æœ€å¤§æ•°](https://leetcode-cn.com/problems/create-maximum-number/)(å›°éš¾)
- [402. ç§»æ‰ K ä½æ•°å­—](https://leetcode-cn.com/problems/remove-k-digits/)(ä¸­ç­‰)
- [1081. ä¸åŒå­—ç¬¦çš„æœ€å°å­åºåˆ—](https://leetcode-cn.com/problems/smallest-subsequence-of-distinct-characters/)ï¼ˆä¸­ç­‰ï¼‰





#### [â˜…â˜…402. ç§»æ‰Kä½æ•°å­—](https://leetcode-cn.com/problems/remove-k-digits/)



ç»™å®šä¸€ä¸ªä»¥å­—ç¬¦ä¸²è¡¨ç¤ºçš„éè´Ÿæ•´æ•° *num*ï¼Œç§»é™¤è¿™ä¸ªæ•°ä¸­çš„ *k* ä½æ•°å­—ï¼Œä½¿å¾—å‰©ä¸‹çš„æ•°å­—æœ€å°ã€‚

**æ³¨æ„:**

- `1 <= k <= num.length <= 10^5  `
- `num` ä»…ç”±è‹¥å¹²ä½æ•°å­—ï¼ˆ0 - 9ï¼‰ç»„æˆ  
- é™¤äº† **0** æœ¬èº«ä¹‹å¤–ï¼Œ`num` ä¸å«ä»»ä½•å‰å¯¼é›¶



**ç¤ºä¾‹ 1 :**

```
è¾“å…¥: num = "1432219", k = 3
è¾“å‡º: "1219"
è§£é‡Š: ç§»é™¤æ‰ä¸‰ä¸ªæ•°å­— 4, 3, å’Œ 2 å½¢æˆä¸€ä¸ªæ–°çš„æœ€å°çš„æ•°å­— 1219ã€‚
```

**ç¤ºä¾‹ 2 :**

```
è¾“å…¥: num = "10200", k = 1
è¾“å‡º: "200"
è§£é‡Š: ç§»æ‰é¦–ä½çš„ 1 å‰©ä¸‹çš„æ•°å­—ä¸º 200. æ³¨æ„è¾“å‡ºä¸èƒ½æœ‰ä»»ä½•å‰å¯¼é›¶ã€‚
```

**ç¤ºä¾‹ 3 :**

```
è¾“å…¥: num = "10", k = 2
è¾“å‡º: "0"
è§£é‡Š: ä»åŸæ•°å­—ç§»é™¤æ‰€æœ‰çš„æ•°å­—ï¼Œå‰©ä½™ä¸ºç©ºå°±æ˜¯0ã€‚
```





**ğŸŒŸä¸»è¦æ€è·¯:**

1. ä»å·¦è‡³å³æ‰«æï¼Œå½“å‰æ‰«æçš„æ•°è¿˜ä¸ç¡®å®šè¦ä¸è¦åˆ ï¼Œå…¥æ ˆæš‚å­˜ï¼Œä¿ç•™å¯¹å®ƒçš„è®°å¿†ã€‚
2. 123531è¿™æ ·ã€Œé«˜ä½é€’å¢ã€çš„æ•°ï¼Œè‚¯å®šä¸ä¼šæƒ³åˆ é«˜ä½ï¼Œé«˜ä½è‚¯å®šæƒ³å°½é‡å°ï¼Œä¼šå°½é‡åˆ ä½ä½ã€‚
3. 432135è¿™æ ·ã€Œé«˜ä½é€’å‡ã€çš„æ•°ï¼Œä¼šæƒ³å¹²æ‰é«˜ä½ï¼Œç›´æ¥è®©é«˜ä½å˜å°ï¼Œæ•ˆæœå¾ˆå¥½ã€‚
   æ‰€ä»¥ï¼Œå¦‚æœå½“å‰éå†çš„æ•°æ¯”æ ˆé¡¶å¤§ï¼Œç¬¦åˆé€’å¢ï¼Œå°±æ˜¯æ»¡æ„çš„ï¼Œå…¥æ ˆã€‚
4. å¦‚æœå½“å‰éå†çš„æ•°æ¯”æ ˆé¡¶å°ï¼Œç«‹é©¬åˆ æ‰æ ˆé¡¶çš„æ•°ï¼Œä¸ç®¡åé¢æœ‰æ²¡æœ‰æ›´å¤§çš„ï¼Œä¸ºä»€ä¹ˆï¼Ÿ
   **å› ä¸ºæ ˆé¡¶çš„æ•°åœ¨é«˜ä½ï¼Œåˆ æ‰å®ƒï¼Œå°çš„é¡¶ä¸Šï¼Œé«˜ä½å˜å°ï¼Œå˜å°çš„å¹…åº¦å¤§äºä½ä½å˜å°**ã€‚

â—

1. å•è°ƒæ ˆæ˜¯éä¸¥æ ¼å•è°ƒé€’å¢, ç›¸ç­‰çš„ä¸ç”¨å‡ºæ ˆ æ¯”å¦‚( '12234', 2 )
2. å‡ºæ ˆè¦è€ƒè™‘å‡ºæ ˆæ¬¡æ•°æ˜¯å¦å¤§äºäº† k ?
3. å¯¹äºæ ˆä¸­å‰å¯¼0çš„å¤„ç†, å…¶å®å¯ä»¥å…¥æ ˆæœ€åå†è¿›è¡Œç±»å‹è½¬æ¢ ï¼ˆâŒåé¢è¯•è¿‡ä¸è¡Œï¼Œå› ä¸ºnumé•¿åº¦å¤ªé•¿äº†ä¼šè½¬ä¸ºInfinityï¼‰



**æ—¶é—´å¤æ‚åº¦: O(n):**

**ç©ºé—´å¤æ‚åº¦: O(n):**

```js
/**
 * @param {string} num
 * @param {number} k
 * @return {string}
 */
const removeKdigits = function(num, k) {
	if (num.length===k) return '0';   //å¯ä»¥å»æ‰
	const monoStack=[];   //éä¸¥æ ¼å•è°ƒé€’å¢æ ˆ
	let count=0;
	for (let i = 0; i < num.length; i++) {
		while (count<k&&monoStack.length&&monoStack[monoStack.length-1]>num[i]){
			monoStack.pop();
			count+=1;
		}
		//é˜²æ­¢monoStackä¸­å«æœ‰å‰å¯¼0 (æ¯”å¦‚ '3204' ä¼šé€ æˆå‰å¯¼0 '04')
        //â˜… åœ¨æ ˆä¸ºç©ºçš„æ¸…ç©ºä¸‹ä¸èƒ½ä¸º0 â˜…
		if (num[i]!=='0'||monoStack.length){
			monoStack.push(num[i]);
		}
	}
	while(count++<k){
		monoStack.pop();
	}
	//ç”±äºå‰å¯¼0ä¸ä¼šè¢«åŠ å…¥, æ‰€ä»¥monoStackä¸ºç©ºè¡¨ç¤ºæœ€ååªå‰©ä¸‹ '0'
	return  monoStack.length? monoStack.join('') : '0';
};
```

ğŸŒŸä»0åˆ°kæ‰§è¡Œkæ¬¡æ“ä½œ, å¯ä»¥ç”¨ while(count++<k)æ¥ä»£æ›¿forå¾ªç¯

ğŸˆ²æˆ‘ä¹‹å‰è¿˜æƒ³é€šè¿‡String(Number())æ¥å»æ‰å‰å¯¼0, ä½†å‘ç° num å­—ç¬¦ä¸²çš„é•¿åº¦å¤ªé•¿äº†!!! ä¼šè¶…å‡ºjså¯ä»¥è¡¨è¾¾çš„æœ€å¤§çš„å€¼, æ‰€ä»¥è¿˜æ˜¯ä½¿ç”¨è¿™ç§å…¥æ ˆæ—¶åˆ¤æ–­å‰å¯¼0çš„æ–¹æ³•å§

ğŸš©å•è°ƒæ ˆçš„æ€æƒ³å¾ˆç®€å•ï¼Œ==è¿™é‡Œå…³é”®æ˜¯å‰å¯¼0çš„è€ƒè™‘==

â˜…å…¶å®ä¹Ÿå¯ä»¥ä¸è€ƒè™‘å‰å¯¼0, ç›´æ¥åœ¨æœ€åshiftå°±è¡Œ!

```js
/**
 * @param {string} num
 * @param {number} k
 * @return {string}
 */
var removeKdigits = function (num, k) {
  //å•è°ƒé€’å¢æ ˆ
  const stack = [];
  let popCount = k;
  for (let i = 0; i < num.length; i++) {
    while (stack.length && popCount && num[i] < stack[stack.length - 1]) {
      stack.pop();
      popCount--;
    }
    stack.push(num[i]);
  }
  while (popCount--) {
    stack.pop();
  }
  while (stack[0] === "0") stack.shift();
  return stack.length ? stack.join("") : '0';
};
```



ğŸ–ğŸ–ğŸ–äºŒåˆ·æç¤ºï¼š

1. æ³¨æ„å‰å¯¼0çš„è€ƒè™‘
2. æ³¨æ„æœ€åè¿˜è¦ä¸ªwhileå¾ªç¯popå®Œ





#### [â˜…â˜…316. å»é™¤é‡å¤å­—æ¯](https://leetcode-cn.com/problems/remove-duplicate-letters/)

éš¾åº¦ä¸­ç­‰

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œè¯·ä½ å»é™¤å­—ç¬¦ä¸²ä¸­é‡å¤çš„å­—æ¯ï¼Œä½¿å¾—æ¯ä¸ªå­—æ¯åªå‡ºç°ä¸€æ¬¡ã€‚éœ€ä¿è¯ **è¿”å›ç»“æœçš„å­—å…¸åºæœ€å°**ï¼ˆè¦æ±‚ä¸èƒ½æ‰“ä¹±å…¶ä»–å­—ç¬¦çš„ç›¸å¯¹ä½ç½®ï¼‰

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "bcabc"
è¾“å‡ºï¼š"abc"
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "cbacdcbc"
è¾“å‡ºï¼š"acdb"
```

 

**æç¤ºï¼š**

- `1 <= s.length <= 104`
- `s` ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ



â˜…è¿˜æ˜¯ä¸€æ ·çš„å•è°ƒæ ˆæ€è·¯!!!ä½†æœ‰äº›å°å‘, æ€è·¯å¦‚ä¸‹:

1. åªæ˜¯ä¸ºäº†å»é‡, æ‰€ä»¥æˆ‘ä»¬è¦å…ˆé‡‡ç”¨hashæ•°ç»„æ¥è®°å½•æ¯ä¸€ä¸ªå­—æ¯å‡ºç°çš„æ¬¡æ•°!
2. ä¹‹å‰çš„å•è°ƒæ ˆæ˜¯çœŸæ­£çš„å•è°ƒæ ˆ, è€Œè¿™é‡Œåœ¨å‡ºæ ˆæ—¶è€ƒè™‘çš„æ¡ä»¶æ›´å¤šã€‚ç”±äºå‡ºæ ˆå’Œå…¥æ ˆéƒ½éœ€è¦ä¿è¯å½“å‰å…ƒç´ ä¸åœ¨æ ˆä¸­ï¼Œæ‰€ä»¥åœ¨æ”¾åœ¨ä¸€ä¸ªifä¸‹ ï¼ˆä¹‹å‰æˆ‘æ²¡æ”¾ä¸€ä¸ªifä¸‹å°±æœ‰ç‚¹é‡å¤è€ƒè™‘ï¼Œ ä¸å¤ªå¥½ï¼‰
3. whileå¾ªç¯å‡ºæ ˆï¼Œè¿™é‡Œå‡ºæ ˆå°±æœ‰ç‚¹ç‰¹æ®Šäº†ï¼Œä¸ä»…æ˜¯å•çº¯çš„å¤§å°æ¯”è¾ƒï¼Œè¿˜è¦è€ƒè™‘æ˜¯å¦ä¸ºé‡å¤å…ƒç´ ï¼ ç„¶ååœ¨å…¥æ ˆ
4. counts[i]-- ç›¸å½“äºè¡¨ç¤ºéå†è¿‡çš„é€šç”¨æ“ä½œï¼Œå› æ­¤ä¸å—å…¶ä»–æ¡ä»¶é™åˆ¶ã€‚ä¸è¦å†™æˆå…¥æ ˆæ‰å‡ï¼Œå› ä¸ºä½ å…¥æ ˆæ‰å‡çš„è¯ä¼šä¼šå¿½ç•¥æ‰ä¸€äº›ç‰¹æ®Šæƒ…å†µã€‚æ¯”å¦‚è¯´ cca è¿™æ ·çš„è¯ä¼šä½¿å‰é¢çš„céƒ½æ²¡æœ‰ï¼Œå› ä¸ºé‡åˆ°aæ—¶åˆ¤æ–­åˆ°cçš„countå¹¶éä¸º0ï¼Œä¼šä¸€ç›´popï¼

**æ—¶é—´å¤æ‚åº¦: O(n)**

**ç©ºé—´å¤æ‚åº¦: O(n)**

```js
/**
 * @param {string} s
 * @return {string}
 */
const removeDuplicateLetters = function(s) {
	const counts={},stack=[];
	let i=s.length;
	while (i--){
		if (!counts[s[i]]) counts[s[i]]=0;
		counts[s[i]]++;
	}
	//æ³¨æ„è¿™æ—¶ i=-1, countså¯¹è±¡è¡¨ç¤ºè¿˜iä¹‹åå¯¹åº”çš„å­—æ¯çš„ä¸ªæ•°,è¿™é‡Œçš„whileå®é™…ä¸Šå°±æ˜¯ç›¸å½“äºfor
	while (i++<s.length){
		if (!stack.includes(s[i])){
			//â˜…å‡ºæ ˆæ¡ä»¶: 1.æ ˆé¡¶å…ƒç´ åœ¨åé¢è¿˜ä¼šå‡ºç° 2.æ ˆé¡¶å…ƒç´ å¤§äºå½“å‰å…ƒç´  3.å½“å‰å…ƒç´ ä¸åœ¨æ ˆä¸­
			while (stack.length&&counts[stack[stack.length-1]]&&stack[stack.length-1]>s[i]){
				stack.pop();
			}
			//â˜…å…¥æ ˆæ¡ä»¶: åœ¨æ ˆé‡Œæ²¡å‡ºç°è¿‡
			stack.push(s[i]);
		}
		counts[s[i]]--;
	}
	return stack.join('');
};
```

 <img src="ä¸“é¢˜.assets/image-20210522215642102.png" alt="image-20210522215642102" style="zoom:60%;" />

 (è¿™é‡Œä¹Ÿå¯ä»¥é‡‡ç”¨mapå®ç°)





ğŸ’£ï¼š

1.ä¸ºä»€ä¹ˆåæ¥çš„ç›¸åŒçš„æˆ‘ä»¬ä¸å…¥æ ˆå´é‡‡ç”¨å‰é¢çš„?

ä»”ç»†è§‚å¯Ÿå¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬è¿™é‡Œå¯¹äºé‡å¤å…ƒç´ å¦‚æœå·²ç»åœ¨æ ˆä¸­é‚£ä¹ˆå°±ä¼šæŠ›å¼ƒåé¢çš„å…ƒç´ è€Œé‡‡ç”¨æ ˆä¸­çš„ã€‚è¿™é‡Œæœ‰å‡ ç§æƒ…å†µï¼š

â€‹	â‘ å½“å‰å…ƒç´ å’Œæ ˆé¡¶å…ƒç´ ç›¸åŒ æ¯”å¦‚ac => c ï¼Œé‚£ä¹ˆæ­¤æ—¶æˆ‘é€‰æ‹©æ ˆé‡Œçš„æˆ–å½“å‰å…ƒç´ çš„ç»“æœæ˜¯ä¸€æ ·çš„  

â€‹	â‘¡å½“å‰å…ƒç´ å°äºæ ˆé¡¶å…ƒç´ ï¼Œ æ¯”å¦‚ abc => b ï¼šè¿™ç§æ—¶å€™æŒ‰å­—å…¸åºæ˜¯ abc å°äº acbï¼Œå› æ­¤é‡‡ç”¨æ ˆä¸­å·²æœ‰çš„å…ƒç´ 

â€‹	â‘¢å½“å‰å…ƒç´ å¤§äºæ ˆé¡¶å…ƒç´ ï¼Œè¿™ç§æƒ…å†µæœ‰ç‚¹éš¾è€ƒè™‘åˆ°ï¼Œæ¯”å¦‚ acegd => e : æŒ‰ç†æ¥è¯´d<e, é‚£ä¹ˆä¹‹å‰æ ˆä¸­çš„eåº”è¯¥å‡ºæ ˆã€‚ä½†è¿™é‡Œå› ä¸ºæœ‰ä¸€ä¸ªæ¯”eæ›´å¤§ä½†æ²¡é‡å¤çš„å…ƒç´ gåœ¨eåé¢ï¼Œå› æ­¤åœ¨då…¥æ ˆæ—¶eä¸ç”¨å‡ºæ ˆã€‚è€Œæ­¤æ—¶è‚¯å®šé‡‡ç”¨å‰é¢çš„eä¼šä½¿å­—å…¸åºæ›´å°ï¼Œacegd < acgde 



ğŸŒŸæˆ–è€…æ¢ç§è¯´æ³•ï¼š æˆ‘ä»¬è¿™é‡Œæ¯æ¬¡åˆ°ä¸€ä¸ªæ–°ä½ç½®æ—¶éƒ½å°½å¯èƒ½å¤„ç†æ‰€æœ‰çš„å­—ç¬¦ä¸²ï¼Œä»¥ç¡®ä¿å·²ç»åœ¨æ ˆä¸­çš„å­—ç¬¦éƒ½ä¸ä¼šè¢«åé¢çš„é‡å¤å­—ç¬¦æ‰€æ›¿ä»£ï¼



æµ‹è¯•æ•°æ®ï¼š

```js
console.log(removeDuplicateLetters('bcabc'));     //abc
console.log(removeDuplicateLetters('cbacdcbc'));  //acdb
console.log(removeDuplicateLetters('bbcaac'));    //bac
console.log(removeDuplicateLetters('abacb'));     //abc
```



**ğŸŒŸbetter: æ¢ç§å†™æ³•å¯ä»¥æå¤§æé«˜æ€§èƒ½ (é‡‡ç”¨ç¼–ç çš„å½¢å¼)**

```js
/**
 * @param {string} s
 * @return {string}
 */
const removeDuplicateLetters = function(s) {
	let counts = new Uint8Array(26), stack = [], i = s.length
	while (i--) counts[s.charCodeAt(i) - 97]++
	while (++i < s.length) {
		const n = s.charCodeAt(i)
		counts[n - 97]--
		if (stack.includes(n) === false) {
			let j = stack.length
			while(j-- && stack[j] > n && counts[stack[j] - 97]) stack.pop()
			stack.push(n)
		}
	}
	return String.fromCharCode(...stack)
};
```





ğŸ’way2: å‰é¢çš„æ€è·¯é‡‡ç”¨äº†hashæ•°ç»„æ¥è®°å½•å‡ºç°ä¸ªæ•°ï¼Œ è¿™é‡Œä¸é‡‡ç”¨hashæ•°ç»„ï¼Œåˆ©ç”¨Array.prototypeçš„includesæ–¹æ³•æ¥åˆ¤æ–­æ ˆé¡¶å…ƒç´ æ˜¯å¦è¿˜åœ¨åé¢å‡ºç°ï¼ˆindexOfåŒç†ï¼‰

```js
/**
 * @param {string} s
 * @return {string}
 */
const removeDuplicateLetters = function(s) {
	const stack=[];
	for (let i = 0; i < s.length; i++) {
		if (!stack.includes(s[i])){
			//å‡ºæ ˆ
			while (stack.length&&stack[stack.length-1]>s[i]&&s.includes(stack[stack.length-1],i)){
				stack.pop();
			}
			stack.push(s[i]);
		}
	}
	return stack.join('');
};
```

è¡¨ç°è¿˜è¡Œï¼š

 <img src="ä¸“é¢˜.assets/image-20210523203756035.png" alt="image-20210523203756035" style="zoom:67%;" />

â—å…¶å®åœ¨å‰é¢çš„æ—¶å€™æˆ‘ä»¬å»ºç«‹count{} ç„¶åå‡å‡çš„ç›®çš„å°±æ˜¯ä¸ºäº†åˆ¤æ–­åé¢è¿˜æœ‰æ²¡æœ‰é‡å¤çš„ï¼Œä¸å¦‚ç›´æ¥ä½¿ç”¨includesæ¥å®ç°



**ğŸ’£äºŒåˆ·æ³¨æ„:** å¤–å±‚çš„çš„ifæ˜¯  <span style="color:blue;">stack.includes</span> , é‡Œé¢çš„whileæ˜¯  <span style=" color:red;">s</span> <span style="color:blue;">.includes</span>



#### [â˜…â˜…â˜…321. æ‹¼æ¥æœ€å¤§æ•°](https://leetcode-cn.com/problems/create-maximum-number/)

éš¾åº¦å›°éš¾

ç»™å®šé•¿åº¦åˆ†åˆ«ä¸º `m` å’Œ `n` çš„ä¸¤ä¸ªæ•°ç»„ï¼Œå…¶å…ƒç´ ç”± `0-9` æ„æˆï¼Œè¡¨ç¤ºä¸¤ä¸ªè‡ªç„¶æ•°å„ä½ä¸Šçš„æ•°å­—ã€‚ç°åœ¨ä»è¿™ä¸¤ä¸ªæ•°ç»„ä¸­é€‰å‡º `k (k <= m + n)` ä¸ªæ•°å­—æ‹¼æ¥æˆä¸€ä¸ªæ–°çš„æ•°ï¼Œè¦æ±‚ä»åŒä¸€ä¸ªæ•°ç»„ä¸­å–å‡ºçš„æ•°å­—ä¿æŒå…¶åœ¨åŸæ•°ç»„ä¸­çš„ç›¸å¯¹é¡ºåºã€‚

æ±‚æ»¡è¶³è¯¥æ¡ä»¶çš„æœ€å¤§æ•°ã€‚ç»“æœè¿”å›ä¸€ä¸ªè¡¨ç¤ºè¯¥æœ€å¤§æ•°çš„é•¿åº¦ä¸º `k` çš„æ•°ç»„ã€‚

**è¯´æ˜:** è¯·å°½å¯èƒ½åœ°ä¼˜åŒ–ä½ ç®—æ³•çš„æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦ã€‚



ç¤ºä¾‹ 1:

è¾“å…¥:
nums1 = [3, 4, 6, 5]
nums2 = [9, 1, 2, 5, 8, 3]
k = 5
è¾“å‡º:
[9, 8, 6, 5, 3]
ç¤ºä¾‹ 2:

è¾“å…¥:
nums1 = [6, 7]
nums2 = [6, 0, 4]
k = 5
è¾“å‡º:
[6, 7, 6, 0, 4]
ç¤ºä¾‹ 3:

è¾“å…¥:
nums1 = [3, 9]
nums2 = [8, 9]
k = 3
è¾“å‡º:
[9, 8, 9]



å¥½éš¾ï¼ï¼ï¼ ä¸»è¦è®²ä¸€ä¸‹æ€è·¯å§ï¼

 ![img](ä¸“é¢˜.assets/08ED6C4C.jpg)

æˆ‘ä»¬è¿™é‡Œæ²¡åŠæ³•åƒå‰é¢çš„å•è°ƒæ ˆä¸€æ ·åªå¾ªç¯ä¸€æ¬¡å°±å‡ºç»“æœï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ªæ•°ç»„ï¼Œæ˜¯æ— æ³•ä¸€ä¸‹å­å†³å®šå“ªä¸ªæ•°ç»„è¦å¤šå°‘ä¸ªæ•°å­—èƒ½å¾—åˆ°æœ€ä¼˜è§£ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦è®¾ç½®æ‰€æœ‰çš„æƒ…å†µæ¥è¿›è¡Œè®¨è®ºï¼ï¼ï¼

1. **maxSub(nums, k)**: å…ˆå†™å‡ºå¦‚ä½•å¾—åˆ°æœ€å¤§çš„é•¿åº¦ä¸ºkçš„å­—ä¸²çš„æ–¹æ³•, è¿™é‡Œå°±æ˜¯å‰é¢æœ€ç»å…¸çš„å•è°ƒæ ˆ, åªä¸è¿‡è¦åŠ ä¸Šå¯¹å‡ºæ ˆä¸ªæ•°çš„è€ƒè™‘ 
2. **merge(sub1, sub2)**: æˆ‘ä»¬æ˜¯éœ€è¦è€ƒè™‘ä¸¤ä¸ªæ•°ç»„çš„, å› æ­¤å¿…ç„¶ä¼šæ¶‰åŠåˆ°åˆå¹¶ã€‚è¿™é‡Œçš„åˆå¹¶å¯ä»¥é‡‡ç”¨ç®€å•çš„æ•°ç»„æ¯”å¤§å°ï¼ˆjsä¸­å¯ä»¥æŒ‰é¡ºåºæ¯”è¾ƒ) ,  ä¸è¿‡è¿™ç§æ–¹æ³•æ—¶é—´ä¼šæ…¢ä¸€ç‚¹ã€‚å¯ä»¥è‡ªå·±å†™åˆ¤æ–­çš„ç®—æ³•ï¼Œä¸è¿‡æœ‰ç‚¹å¤æ‚
3. **for()**: æœ€åå°±æ˜¯forå¾ªç¯è¿›è¡Œæ±‚è§£äº†, è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯,  å¯¹äºforå¾ªç¯ä¸­ i çš„å–å€¼èŒƒå›´çš„åˆ¤æ–­, ä¸èƒ½è¶…å‡ºä»»ä½•ä¸€ä¸ªæ•°ç»„çš„é•¿åº¦è¿™é‡Œå¯ä»¥é€šè¿‡ç®€å•çš„æ•°å­¦æ–¹æ³•åˆ¤æ–­ï¼
   $\begin{cases} 
    0<i<k \\
    i<len1 \\
    \end{cases}$  å’Œ  $\begin{cases}
    0<k-i<k \\
    k-i<len2 \\
    \end{cases}$    ç»“åˆä¸€ä¸‹     $\begin{cases}0<i<k \\i<len1 \\i>k-len2
    \end{cases}$





![image-20210524094655786](ä¸“é¢˜.assets/image-20210524094655786.png)



##### way1:

```js
/**
 * @param {number[]} nums1
 * @param {number[]} nums2
 * @param {number} k
 * @return {number[]}
 */
const maxNumber = function (nums1, nums2, k) {
	const maxSubsequence = (nums, k) => {
		const stack = [];
		let count = nums.length - k; //è¡¨ç¤ºéœ€è¦å‡ºæ ˆçš„å…ƒç´ ä¸ªæ•°
		for (let i = 0; i < nums.length; i++) {
			while (stack.length && count && stack[stack.length - 1] < nums[i]){
				stack.pop();
				count--;
			}
			stack.push(nums[i]);
		}
		return stack.slice(0,k);  //åªéœ€è¦æ ˆä¸­å‰kä¸ªå…ƒç´ 
	}

	const merge=(sub1,sub2)=>{
		const res=[];
		while (sub1.length&&sub2.length){
			sub1>sub2? res.push(sub1.shift()) : res.push(sub2.shift());
		}
		return res.concat(sub1,sub2);
	}

	let result=Array(k).fill(0);
	const start=Math.max(0,k-nums2.length);
	const end=Math.min(nums1.length,k);
	for (let i = start; i <= end; i++) {
		let tmp=merge(maxSubsequence(nums1,i),maxSubsequence(nums2,k-i));
		result= result>tmp? result:tmp;
	}
	return result;
};
```

ğŸš©è¿™ç§å†™æ³•çš„æ—¶é—´å¤æ‚åº¦æœ‰ç‚¹é«˜ ! 

 <img src="ä¸“é¢˜.assets/image-20210524094448032.png" alt="image-20210524094448032" style="zoom:67%;" />

**â—æ³¨æ„:**

1. æˆ‘è¿™é‡Œçš„mergeåœ¨åˆ¤æ–­æ˜¯å¦æ”¾å…¥æ—¶,æ˜¯é€šè¿‡åˆ¤æ–­æ•´ä¸ªæ•°ç»„æ˜¯å¦å¤§äºå¦å¤–ä¸€ä¸ªæ•°ç»„, è€Œä¸æ˜¯å•çº¯çš„æ¯”è¾ƒæŸä¸€ä¸ªæ•°å€¼ã€‚å› ä¸ºå¯¹äºæ•°ç»„çš„æ¯”è¾ƒï¼Œjså°±æ˜¯æŒ‰ç…§å­—å…¸åºï¼









ğŸŒŸä¸»è¦æ˜¯å› ä¸ºmerge, æ¢ç§mergeçš„å†™æ³•å¯ä»¥å¤§å¤§æé«˜æ•ˆç‡!!!

```js
const maxNumber = function(nums1, nums2, k) {
	var r = Array(k).fill(0), end = Math.min(k, nums1.length);
	for(var i = Math.max(0, k - nums2.length); i <= end; i++)
		r = max(r, merge(maxSubsequence(nums1, i), maxSubsequence(nums2, k - i)))
	return r
};

const maxSubsequence = (nums, k) => {
	var mStack = [], len = nums.length, top = -1, last = len - k
	for(var i = 0; i < len; i++) {
		while (top > -1 && nums[i] > mStack[top] && last > 0) top--, last--
		top < k - 1 ? mStack[++top] = nums[i] : last--
	}
	return mStack
}

const merge = (nums1, nums2) => {
	var p1 = 0, p2 = 0, r = [], len1 = nums1.length, len2 = nums2.length
	while (p1 < len1 || p2 < len2) {
		if (p2 >= len2 || nums1[p1] > nums2[p2]) r.push(nums1[p1++])
		else if (nums1[p1] === nums2[p2]) {
			var _p1 = p1, _p2 = p2
			while(_p1 < len1 && nums1[++_p1] === nums2[++_p2]) {}
			r.push(_p2 >= len2 || nums1[_p1] > nums2[_p2] ? nums1[p1++] : nums2[p2++])
		} else r.push(nums2[p2++])
	}
	return r
}

const max = (nums1, nums2, p1 = p2 = -1, len1 = nums1.length) => {
	while(p1 < len1 && nums1[++p1] === nums2[++p2]) {}
	return nums2[p2] > nums1[p1] ? nums2 : nums1
}
```



**ğŸŒŸåˆå¹¶2ä¸ªåºåˆ—ï¼Œä¿æŒå…ƒç´ ç›¸å¯¹é¡ºåºï¼Œè¿”å›è¡¨ç¤ºæ•°æœ€å¤§çš„åºåˆ—**

å…¶å®è¿™é‡Œå’Œå½’å¹¶æ’åºå¾ˆåƒï¼Œåªä¸è¿‡å½’å¹¶æ’åºçš„ä¸¤ä¸ªæ•°ç»„æå‰æœ‰åºï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ä¿æŒäº†å…ƒç´ çš„ç›¸å¯¹é¡ºåº â—

â—é‡ç‚¹å­¦ä¹ ä¸€ä¸‹åˆ«äººçš„mergeæ–¹æ³•ï¼š

æœ€åŸå§‹çš„mergeï¼š

```js
const merge = (nums1, nums2) => {
	let p1 = 0, p2 = 0, r = [], len1 = nums1.length, len2 = nums2.length;
	while (p1 < len1 || p2 < len2) {
		if (p2 >= len2 || nums1[p1] > nums2[p2])
			r.push(nums1[p1++]);  // p2è¶Šç•Œæ”¾p1
		else
			r.push(nums2[p2++]);
	}
	return r;
}
```

* while ä¸­çš„æ¡ä»¶ä¿è¯äº†åªæœ‰åœ¨nums1å’Œnums2éƒ½æ”¾å…¥æ•°ç»„äº†æ‰ç»“æŸ
* æ”¾å…¥p1çš„æ¡ä»¶æ˜¯ p2 å¤§äºç­‰äº len2, è¿™ä¸ªæ¡ä»¶å¿…é¡»æ”¾è¿›æ¥ï¼Œä½†æ˜¯é¡ºåºå¯ä»¥æ”¾å‰é¢ä¹Ÿå¯ä»¥æ”¾åœ¨åé¢ã€‚å› ä¸ºwhileä¿è¯äº†p1å’Œp2è‡³å°‘æœ‰ä¸€ä¸ªæ²¡è¶Šç•Œï¼Œè€Œè¿™é‡Œçš„ if p2>=len2 åˆ™è¯´æ˜ p1å¿…å®šæ²¡è¶Šç•Œ, é‚£ä¹ˆåªèƒ½åŠ å…¥ p1ã€‚å…¶æ¬¡ nums[p1] > nums[p2] æ²¡åŠæ³•åˆ¤æ–­å“ªä¸ªè¶Šç•Œï¼Œå½“è¶Šç•Œçš„æ—¶å€™ å€¼ä¸º undefined è€Œåœ¨è¿›è¡Œæ¯”è¾ƒè¿ç®—æ—¶ä¼šè½¬åŒ– Number(undefined) ä¸ºNaNï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæœ‰è¶Šç•Œçš„è¯ nums1[p1] > nums2[p2] ç”±äºå­˜åœ¨ä¸€ä¸ªNaNå¿…å®šä¸ºfalseï¼Œæˆ‘ä»¬æ²¡æ³•åˆ¤æ–­å“ªä¸ªè¶Šç•Œã€‚ä½†æˆ‘ä»¬æœ‰  <span style="color:blue;">p2>=len2</span> æå‰åˆ¤æ–­äº†, ä¹Ÿå°±æ˜¯è¯´å¦‚æœp2æ²¡è¶Šç•Œè€Œ  <span style="color:blue;">nums1[p1] > nums2[p2]</span> äº§ç”Ÿäº†è¶Šç•Œçš„è¯é‚£ä¸€å®šæ˜¯p1, äºæ˜¯push p2
* p2è¶Šç•Œäº†ï¼Œæ”¾å…¥p1ï¼›p2æ²¡è¶Šç•Œï¼Œp1å¯¹åº”çš„å€¼å¤§äºp2ï¼Œä¹Ÿæ”¾å…¥p1ï¼›æœ‰å¯èƒ½ä¼šé—®p1è¶Šç•Œäº†æ€ä¹ˆåŠï¼Ÿ p1è¶Šç•Œåé¢çš„ nums1[p1] > nums2[p2] ä¸­çš„nums1[p1] ä¼šè½¬åŒ–ä¸ºNaNè¿›è€Œä½¿è¡¨è¾¾å¼å€¼ä¸ºfalse, å°±ä¼šæ”¾å…¥p2



ğŸ’£ä½†æ˜¯åœ¨æœ¬é¢˜ä¸­mergeéœ€è¦æ”¹å˜ä¸€ä¸‹:â—

æœ¬é¢˜åºåˆ—æœ‰åºï¼ˆä¿æŒåˆå§‹é¡ºåºï¼‰ä½†ä¸ä¸€å®šæ˜¯é™åºã€‚ä¸¾ä¾‹ï¼šåˆå¹¶ [1, 2, 3] [1, 2, 5], ä¸Šé¢çš„mergeæœ€ç»ˆç»“æœä¸º [1,2,3,1,2,5] è¿™è‚¯å®šä¸æ˜¯æœ€å¤§
åŒæŒ‡é’ˆéƒ½æŒ‡å‘1æ—¶ï¼Œç§»åŠ¨å“ªä¸ªæŒ‡é’ˆå‘¢ï¼Ÿæ˜¾ç„¶ï¼Œåº”è¯¥ç§»åŠ¨p2æŒ‡é’ˆï¼Œå› ä¸ºåºåˆ—2çš„5>åºåˆ—1çš„3
**ä¸Šé¢ä»£ç åªéœ€å¢åŠ æŒ‡é’ˆç›¸åŒæ—¶ï¼Œå‘åæ‰¾ä¸åŒä½é€»è¾‘ã€‚æ‰¾åˆ°åï¼Œä¾ç„¶ï¼Œè°å¤§æ”¾è°ï¼ŒæŒ‡é’ˆå³ç§»**

```js
const merge = (nums1, nums2) => {
	let p1 = 0, p2 = 0, r = [], len1 = nums1.length, len2 = nums2.length;
	while (p1 < len1 || p2 < len2) {
		if (p2 >= len2 || nums1[p1] > nums2[p2]) r.push(nums1[p1++]);
		else if (nums1[p1] === nums2[p2]) {
			let _p1 = p1, _p2 = p2;
			while(_p1 < len1 && nums1[++_p1] === nums2[++_p2]) {}
			r.push(_p2 >= len2 || nums1[_p1] > nums2[_p2] ? nums1[p1++] : nums2[p2++]);
		}
		else r.push(nums2[p2++]);
	}
	return r;
}
```

ğŸŒŸè¿™é‡Œå¾ˆå·§å¦™çš„åœ°æ–¹åœ¨äº <span style="color:blue ;"> while(\_p1 < len1 && nums1[++\_p1] === nums2[++_p2]) {}</span>  è¿™é‡Œç›´æ¥å¯ä»¥è®¡ç®—åˆ°æœ€åä¸ç›¸ç­‰çš„æ—¶å€™æˆ–è€…éƒ½åˆ°å°½å¤´çš„æ—¶å€™ã€‚ æ·»åŠ  \_p1 < len1 çš„æ¡ä»¶æ˜¯ä¸ºäº†é˜²æ­¢ nums1å’Œnums2å®Œå…¨ç›¸ç­‰æœ€åæ— é™å¾ªç¯ã€‚whileå¾ªç¯ç»“æŸåçš„æƒ…å†µï¼š 

  **1.\_p1è¶Šç•Œ(\_p2ä¸è¶Šç•Œ)  2. \_p1å’Œ\_p2éƒ½è¶Šç•Œ(è¯´æ˜å®Œå…¨ç›¸åŒâ—)  3. _p2è¶Šç•Œ, _p1ä¸è¶Šç•Œ(åé¢çš„===ä¼šä¸ºfalse)  **
  **4. \_p1å’Œ\_p2éƒ½ä¸è¶Šç•Œ, åªæ˜¯ä¸åŒäº†**

ğŸŒŸpushä¹Ÿæ˜¯å¾ˆå·§å¦™åŒæ ·é€šè¿‡è¶Šç•Œå’Œå¤§å°ä¸€èµ·æ¥åˆ¤æ–­!  `_p2>=len2` è¶Šç•Œå¯¹åº”ä¸Šé¢2,3ä¸¤ç§æƒ…å†µ, è€Œè¿™ä¸¤ç§æƒ…å†µéƒ½å¯ä»¥æ”¾p1è¿›å»(æ³¨æ„æ˜¯p1, è€Œä¸æ˜¯\_p1 â—)    `nums1[_p1] > nums2[_p2]` æˆç«‹å¯¹åº”äºä¸Šé¢çš„æƒ…å†µ4 (å¦‚æœè¶Šç•Œä¼šå˜ä¸ºNaNä¸è®ºå¦å¤–ä¸€ä¸ªæ•°æ˜¯ä»€ä¹ˆéƒ½ä¼šå˜æˆfalse) ,æ­¤æ—¶åŠ å…¥p1ä¹Ÿç¬¦åˆé¢˜æ„!!!   ğŸš©å¦‚æœå‰é¢ä¸¤ç§æƒ…å†µéƒ½ä¸ç¬¦åˆé‚£ä¹ˆå°±å¯¹åº”ä¸ä¸Šé¢çš„æƒ…å†µ1å’Œ3, \_p1è¶Šç•Œ\_p2ä¸è¶Šç•Œè‡ªç„¶åŠ å…¥p2, éƒ½ä¸è¶Šç•Œ \_p2æ›´å¤§ä¹Ÿè¯¥åŠ å…¥\_p2   (è¿™é‡Œçš„åˆ¤æ–­ $nums1[\_p1] > nums2[\_p2]$  ä¸­ `>` æ”¹ä¸º `>=` ä¹Ÿè¡Œçš„!)





æœ€åå†è´´ä¸€ä¸ªä¸¤è€…ç»“åˆçš„ç‰ˆæœ¬

##### way2:

```js
/**
 * @param {number[]} nums1
 * @param {number[]} nums2
 * @param {number} k
 * @return {number[]}
 */
const maxNumber = function (nums1, nums2, k) {
	let result=Array(k).fill(0);
	let start=Math.max(0,k-nums2.length),
			end=Math.min(k,nums1.length);
	for (let i = start; i <=end ; i++) {
		let tmp=merge(maxSub(nums1,i),maxSub(nums2,k-i));
		result= result>=tmp? result:tmp;
	}
	return  result;
}
const maxSub=(nums,k)=>{  //kæ˜¯è¿™ä¸ªå­æ•°ç»„çš„é•¿åº¦
	const stack=[];
	let count=nums.length-k;  //éœ€è¦åˆ é™¤çš„å…ƒç´ ä¸ªæ•°
	for (let i = 0; i < nums.length; i++) {
		while (stack.length&&count&&stack[stack.length-1]<nums[i]){
			stack.pop();
			count--;
		}
		stack.push(nums[i]);
	}
	return stack.slice(0,k);
}

const merge = (sub1, sub2) => {
	let p1 = 0, p2 = 0, len1 = sub1.length, len2 = sub2.length;
	const res = [];
	while (p1 < len1 || p2 < len2) {
		if (p2 >= len2 || sub1[p1] > sub2[p2]) {
			res.push(sub1[p1++]);
		} else if (sub1[p1] === sub2[p2]) {
			let _p1 = p1, _p2 = p2;
			while (_p1 < len1 && sub1[++_p1] === sub2[++_p2]) {}
			res.push(_p2 >= len2 || sub1[_p1] > sub2[_p2] ? sub1[p1++] : sub2[p2++])
		}else {
			res.push(sub2[p2++]);
		}
	}
	return res;
}
```

å¯ä»¥å‘ç°æ•ˆç‡æé«˜äº†å¾ˆå¤šğŸ˜‹ğŸ˜‹ğŸ˜‹

 <img src="D:\Study\FrontEnd\github_js_notes\FrontEnd_Notes\algorithms\Sword-for-offer\ä¸“é¢˜.assets\image-20210627170116050.png" alt="image-20210627170116050" style="zoom:67%;" />

ğŸ’£äºŒåˆ·: <span style="font-weight:bold; color:red;">ä¸€å®šè¦åŒºåˆ†å¼€ \_p1 å’Œ p1</span>



#### ğŸš©Summary: â€‹

ä»å‰é¢çš„ä¸‰ä¸ªé¢˜æ¥æ€»ç»“ä¸€ä¸‹è¿™ç±»é¢˜å‹: 

è¿™ä¸‰é“é¢˜éƒ½æ˜¯åˆ é™¤æˆ–è€…ä¿ç•™è‹¥å¹²ä¸ªå­—ç¬¦ï¼Œä½¿å¾—å‰©ä¸‹çš„æ•°å­—æœ€å°ï¼ˆæˆ–æœ€å¤§ï¼‰æˆ–è€…å­—å…¸åºæœ€å°ï¼ˆæˆ–æœ€å¤§ï¼‰ã€‚è€Œ**è§£å†³é—®é¢˜çš„å‰ææ˜¯è¦æœ‰ä¸€å®šæ•°å­¦å‰æã€‚è€ŒåŸºäºè¿™ä¸ªæ•°å­¦å‰æï¼Œæˆ‘ä»¬==è´ªå¿ƒ==åœ°åˆ é™¤æ ˆä¸­ç›¸é‚»çš„å­—ç¬¦ã€‚**æ¯”å¦‚402å…³é”®åœ¨äºæœ‰äº†ç§»é™¤ä¸ªæ•°(popCount)çš„è€ƒè™‘, 316å…³é”®åœ¨äºhashmapæå‰è®°å½•æ‰€æœ‰å­—æ¯çš„countæ¥åˆ¤æ–­æ˜¯å¦å¯ä»¥åˆ é™¤, 321å…³é”®åœ¨äºå¯¹é—®é¢˜é€æ­¥çš„åˆ†è§£, `maxSub => merge => maxNum`

316.å»é™¤é‡å¤å­—æ¯ï¼ˆä¸­ç­‰ï¼‰ï¼Œæˆ‘ä»¬ä½¿ç”¨ hashmap ä»£æ›¿äº†æ•°ç»„çš„éå†æŸ¥æ‰¾ï¼Œå±äºå…¸å‹çš„ç©ºé—´æ¢æ—¶é—´æ–¹å¼ï¼Œå¯ä»¥è®¤è¯†åˆ°æ•°æ®ç»“æ„çš„çµæ´»ä½¿ç”¨æ˜¯å¤šä¹ˆçš„é‡è¦ã€‚èƒŒåçš„æ€è·¯æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿä¸ºä»€ä¹ˆæƒ³åˆ°ç©ºé—´æ¢æ—¶é—´çš„æ–¹å¼ï¼Œæˆ‘åœ¨æ–‡ä¸­ä¹Ÿè¿›è¡Œäº†è¯¦ç»†çš„è¯´æ˜ï¼Œè¿™éƒ½æ˜¯å€¼å¾—å¤§å®¶æ€è€ƒçš„é—®é¢˜ã€‚ç„¶è€Œå®é™…ä¸Šï¼Œè¿™äº›é¢˜ç›®ä¸­ä½¿ç”¨çš„æ ˆä¹Ÿéƒ½æ˜¯ç©ºé—´æ¢æ—¶é—´çš„æ€æƒ³ã€‚å¤§å®¶ä¸‹æ¬¡ç¢°åˆ°éœ€è¦ç©ºé—´æ¢å–æ—¶é—´çš„åœºæ™¯ï¼Œæ˜¯å¦èƒ½å¤Ÿæƒ³åˆ°æœ¬æ–‡ç»™å¤§å®¶ä»‹ç»çš„æ ˆå’Œå“ˆå¸Œè¡¨å‘¢ï¼Ÿ

321.æ‹¼æ¥æœ€å¤§æ•°ï¼ˆå›°éš¾ï¼‰åˆ™éœ€è¦æˆ‘ä»¬èƒ½å¤Ÿå¯¹é—®é¢˜è¿›è¡Œåˆ†è§£ï¼Œè¿™ç»å¯¹ä¸æ˜¯ä¸€ä»¶ç®€å•çš„äº‹æƒ…ã€‚ä½†æ˜¯å¯¹éš¾ä»¥è§£å†³çš„é—®é¢˜è¿›è¡Œåˆ†è§£æ˜¯ä¸€ç§å¾ˆé‡è¦çš„æŠ€èƒ½











